(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[244],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>i});var l=t(8711),a=t(2115),o=t(9434);let i=a.forwardRef((e,r)=>{let{className:t,variant:a="default",size:i="default",asChild:s=!1,...n}=e;return(0,l.Y)(s?"slot":"button",{className:(0,o.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===a,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===a,"border border-input hover:bg-accent hover:text-accent-foreground":"outline"===a,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===a,"hover:bg-accent hover:text-accent-foreground":"ghost"===a,"underline-offset-4 hover:underline text-primary":"link"===a,"h-10 py-2 px-4":"default"===i,"h-9 px-3 rounded-md":"sm"===i,"h-11 px-8 rounded-md":"lg"===i,"h-10 w-10 p-0":"icon"===i},t),ref:r,...n})});i.displayName="Button"},1103:(e,r,t)=>{Promise.resolve().then(t.bind(t,9115))},6695:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>s,Zp:()=>i});var l=t(8711),a=t(2115),o=t(9434);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,l.Y)("div",{ref:r,className:(0,o.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50",t),...a})});i.displayName="Card",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,l.Y)("div",{ref:r,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",t),...a})}).displayName="CardHeader",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,l.Y)("h3",{ref:r,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})}).displayName="CardTitle",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,l.Y)("p",{ref:r,className:(0,o.cn)("text-sm text-gray-500 dark:text-gray-400",t),...a})}).displayName="CardDescription";let s=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,l.Y)("div",{ref:r,className:(0,o.cn)("p-6 pt-0",t),...a})});s.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,l.Y)("div",{ref:r,className:(0,o.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},9115:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var l=t(8711),a=t(2115),o=t(5695),i=t(6766),s=t(5095),n=t(5387),d=t(6854),c=t(285),p=t(6695),m=t(6671);function u(e){let{projectId:r,onFilesChange:t,existingFiles:o=[]}=e,[i,s]=(0,a.useState)(o||[]),[u,h]=(0,a.useState)(!1),f=(0,a.useCallback)(async e=>{if(!r)return void m.oR.error("Project ID is missing");h(!0);try{for(let l of e){let e=new FormData;e.append("projectId",r.toString()),e.append("file",l);let a=await fetch("/api/projects/files",{method:"POST",body:e,credentials:"include"});if(!a.ok){let e="Failed to upload file";try{e=(await a.json()).error||e}catch(e){console.error("Error parsing error response:",e)}throw Error(e)}let o=await a.json();o.files&&Array.isArray(o.files)?(s(o.files),t&&t(o.files),m.oR.success("File ".concat(l.name," uploaded successfully"))):(console.error("Invalid response format:",o),m.oR.error("Invalid server response"))}}catch(e){console.error("Error uploading file:",e),m.oR.error(e.message||"Failed to upload file")}finally{h(!1)}},[r,t]),{getRootProps:g,getInputProps:b,isDragActive:v}=(0,d.VB)({onDrop:f,maxSize:0x3200000,accept:{"image/*":[],"application/pdf":[],"text/*":[],"application/zip":[]}}),y=async e=>{if(!r)return void m.oR.error("Project ID is missing");try{let l=await fetch("/api/projects/files?projectId=".concat(r,"&fileUrl=").concat(encodeURIComponent(e)),{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json"}});if(!l.ok){let e="Failed to delete file";try{e=(await l.json()).error||e}catch(e){console.error("Error parsing error response:",e)}throw Error(e)}let a=await l.json();a.files&&Array.isArray(a.files)?(s(a.files),t&&t(a.files),m.oR.success("File deleted successfully")):(console.error("Invalid response format:",a),m.oR.error("Invalid server response"))}catch(e){console.error("Error deleting file:",e),m.oR.error(e.message||"Failed to delete file")}},w=e=>{var r;let t=null==e||null==(r=e.split(".").pop())?void 0:r.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(t||"")?(0,l.Y)(n.xf,{className:"h-5 w-5"}):["pdf","doc","docx"].includes(t||"")?(0,l.Y)(n.ds,{className:"h-5 w-5"}):["zip","rar","7z"].includes(t||"")?(0,l.Y)(n.UW,{className:"h-5 w-5"}):(0,l.Y)(n.oS,{className:"h-5 w-5"})},x=e=>{if(!e)return"file";try{let r=new URL(e).pathname.split("/");return r[r.length-1]}catch(r){return console.error("Error parsing file URL:",r),e.split("/").pop()||"file"}};return(0,l.FD)("div",{className:"space-y-4",children:[(0,l.FD)("div",{...g(),className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ".concat(v?"border-primary bg-primary/10":"border-gray-300 hover:border-primary"),children:[(0,l.Y)("input",{...b()}),(0,l.FD)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,l.Y)(n.JM,{className:"h-8 w-8 text-gray-400"}),(0,l.Y)("p",{className:"text-sm font-medium",children:v?"Drop the files here...":"Drag & drop files here, or click to select files"}),(0,l.Y)("p",{className:"text-xs text-gray-500",children:"Supports images, PDFs, text files, and archives (max 50MB)"})]})]}),u&&(0,l.FD)("div",{className:"flex items-center justify-center p-4",children:[(0,l.Y)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,l.Y)("span",{className:"ml-2 text-sm",children:"Uploading..."})]}),i&&i.length>0&&(0,l.FD)("div",{className:"space-y-2",children:[(0,l.Y)("h3",{className:"text-sm font-medium",children:"Uploaded files"}),(0,l.Y)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:i.map((e,r)=>(0,l.Y)(p.Zp,{className:"overflow-hidden",children:(0,l.FD)(p.Wu,{className:"p-3 flex items-center justify-between",children:[(0,l.FD)("div",{className:"flex items-center space-x-2 overflow-hidden",children:[w(e),(0,l.Y)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium truncate hover:underline",children:x(e)})]}),(0,l.Y)(c.$,{variant:"ghost",size:"icon",onClick:r=>{r.preventDefault(),y(e)},className:"h-8 w-8 text-gray-500 hover:text-red-500",children:(0,l.Y)(n.uv,{className:"h-4 w-4"})})]})},"".concat(e,"-").concat(r)))})]})]})}function h(){let e=(0,o.useRouter)(),[r,t]=(0,a.useState)({title:"",description:"",repoUrl:"",demoUrl:"",technologies:"",category:"web",status:"in_progress"}),[d,c]=(0,a.useState)(null),[p,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)(null),[b,v]=(0,a.useState)("details"),[y,w]=(0,a.useState)(null),[x,N]=(0,a.useState)(null),Y=(0,a.useRef)(null),F=e=>{t({...r,[e.target.name]:e.target.value})},D=async e=>{e.preventDefault(),h(!0),g(null);try{let e=r.technologies.split(",").map(e=>e.trim()).filter(e=>""!==e);if(0===e.length)throw Error("Please enter at least one technology");let t=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:r.title,description:r.description,repoUrl:r.repoUrl,demoUrl:r.demoUrl,technologies:e,category:r.category,status:r.status})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create project")}let l=await t.json();if(c(l.id),y&&l.id){let e=new FormData;e.append("projectId",l.id.toString()),e.append("file",y),e.append("isCoverImage","true"),(await fetch("/api/projects/files",{method:"POST",body:e,credentials:"include"})).ok?m.oR.success("Project and cover image uploaded successfully"):m.oR.error("Project created but failed to upload cover image")}v("files")}catch(e){console.error("Error creating project:",e),g(e.message||"Failed to create project. Please try again.")}finally{h(!1)}};return(0,l.FD)(l.FK,{children:[(0,l.Y)(s.default,{}),(0,l.Y)(m.l$,{position:"top-right"}),(0,l.Y)("div",{className:"min-h-screen pt-24 px-6",children:(0,l.FD)("div",{className:"max-w-4xl mx-auto",children:[(0,l.FD)("div",{className:"mb-8",children:[(0,l.Y)("h1",{className:"t-heading-lg mb-4",children:"Create New Project"}),(0,l.Y)("p",{className:"t-base opacity-80",children:"Share your project with the community and get feedback from other developers."})]}),(0,l.FD)("div",{className:"bg-white/5 rounded-2xl p-6 backdrop-blur-sm border border-white/10",children:[f&&(0,l.Y)("div",{className:"mb-6 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300",children:f}),"details"===b?(0,l.FD)("form",{onSubmit:D,className:"space-y-6",children:[(0,l.FD)("div",{children:[(0,l.Y)("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Project Title *"}),(0,l.Y)("input",{type:"text",id:"title",name:"title",required:!0,value:r.title,onChange:F,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",placeholder:"e.g. AI Chat Application"})]}),(0,l.FD)("div",{children:[(0,l.Y)("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Project Description *"}),(0,l.Y)("textarea",{id:"description",name:"description",rows:5,required:!0,value:r.description,onChange:F,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",placeholder:"Describe your project, its features, and what makes it unique..."})]}),(0,l.FD)("div",{children:[(0,l.Y)("label",{htmlFor:"repoUrl",className:"block text-sm font-medium mb-2",children:"Repository URL"}),(0,l.Y)("input",{type:"url",id:"repoUrl",name:"repoUrl",value:r.repoUrl,onChange:F,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",placeholder:"e.g. https://github.com/yourusername/project"})]}),(0,l.FD)("div",{children:[(0,l.Y)("label",{htmlFor:"demoUrl",className:"block text-sm font-medium mb-2",children:"Live Demo URL"}),(0,l.Y)("input",{type:"url",id:"demoUrl",name:"demoUrl",value:r.demoUrl,onChange:F,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",placeholder:"e.g. https://your-project.vercel.app"})]}),(0,l.FD)("div",{children:[(0,l.Y)("label",{htmlFor:"technologies",className:"block text-sm font-medium mb-2",children:"Technologies Used (comma separated) *"}),(0,l.Y)("input",{type:"text",id:"technologies",name:"technologies",required:!0,value:r.technologies,onChange:F,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",placeholder:"e.g. React, Node.js, MongoDB"})]}),(0,l.FD)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.FD)("div",{children:[(0,l.Y)("label",{htmlFor:"category",className:"block text-sm font-medium mb-2",children:"Category *"}),(0,l.FD)("select",{id:"category",name:"category",required:!0,value:r.category,onChange:F,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",children:[(0,l.Y)("option",{value:"web",children:"Web Development"}),(0,l.Y)("option",{value:"mobile",children:"Mobile App"}),(0,l.Y)("option",{value:"desktop",children:"Desktop Application"}),(0,l.Y)("option",{value:"ai",children:"AI/Machine Learning"}),(0,l.Y)("option",{value:"game",children:"Game Development"}),(0,l.Y)("option",{value:"blockchain",children:"Blockchain"}),(0,l.Y)("option",{value:"other",children:"Other"})]})]}),(0,l.FD)("div",{children:[(0,l.Y)("label",{htmlFor:"status",className:"block text-sm font-medium mb-2",children:"Project Status *"}),(0,l.FD)("select",{id:"status",name:"status",required:!0,value:r.status,onChange:F,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",children:[(0,l.Y)("option",{value:"in_progress",children:"In Progress"}),(0,l.Y)("option",{value:"completed",children:"Completed"}),(0,l.Y)("option",{value:"planning",children:"Planning/Concept"}),(0,l.Y)("option",{value:"looking_for_help",children:"Looking for Contributors"})]})]})]}),(0,l.FD)("div",{children:[(0,l.Y)("label",{className:"block text-sm font-medium mb-2",children:"Cover Image"}),(0,l.FD)("div",{className:"space-y-2",children:[x?(0,l.FD)("div",{className:"relative w-full h-48 border border-white/10 rounded-lg overflow-hidden",children:[(0,l.Y)(i.default,{src:x,alt:"Cover Preview",fill:!0,className:"object-cover"}),(0,l.Y)("button",{type:"button",onClick:()=>{w(null),N(null),Y.current&&(Y.current.value="")},className:"absolute top-2 right-2 bg-black/50 rounded-full p-1 hover:bg-black/70",children:(0,l.Y)(n.uv,{size:16,className:"text-white"})})]}):(0,l.FD)("div",{onClick:()=>{var e;return null==(e=Y.current)?void 0:e.click()},className:"w-full h-48 border-2 border-dashed border-white/20 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-white/40",children:[(0,l.Y)(n.JM,{size:24,className:"text-white/50 mb-2"}),(0,l.Y)("p",{className:"text-sm text-white/70",children:"Click to upload a cover image"}),(0,l.Y)("p",{className:"text-xs text-white/50 mt-1",children:"PNG, JPG, WebP (max 5MB)"})]}),(0,l.Y)("input",{type:"file",ref:Y,onChange:e=>{var r;let t=null==(r=e.target.files)?void 0:r[0];if(!t)return;if(!t.type.startsWith("image/"))return void m.oR.error("Please upload an image file");if(t.size>5242880)return void m.oR.error("Image size should be less than 5MB");w(t);let l=new FileReader;l.onloadend=()=>{N(l.result)},l.readAsDataURL(t)},className:"hidden",accept:"image/*"})]})]}),(0,l.FD)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,l.Y)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:"Cancel"}),(0,l.FD)("button",{type:"submit",disabled:p,className:"btn-primary px-6 py-3 flex items-center gap-2",children:[(0,l.Y)(n.Ab,{size:18}),p?"Creating...":"Continue to Files"]})]})]}):(0,l.FD)("div",{className:"space-y-6",children:[(0,l.FD)("div",{className:"mb-6",children:[(0,l.Y)("h2",{className:"text-xl font-medium mb-2",children:"Upload Project Files"}),(0,l.Y)("p",{className:"text-sm opacity-80",children:"Upload screenshots, demos, or other files to showcase your project. (Optional)"})]}),d&&(0,l.Y)(u,{projectId:d}),(0,l.Y)("div",{className:"flex justify-end space-x-4 pt-4",children:(0,l.FD)("button",{type:"button",onClick:()=>{e.push("/projects")},className:"btn-primary px-6 py-3 flex items-center gap-2",children:[(0,l.Y)(n.Ab,{size:18}),"Finish"]})})]})]})]})})]})}},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>o});var l=t(2596),a=t(9688);function o(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.QP)((0,l.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[788,674,874,212,277,671,854,95,441,684,358],()=>r(1103)),_N_E=e.O()}]);