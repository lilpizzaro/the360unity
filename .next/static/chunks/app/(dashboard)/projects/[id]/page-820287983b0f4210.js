(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[553],{285:(e,r,t)=>{"use strict";t.d(r,{$:()=>n});var a=t(8711),s=t(2115),l=t(9434);let n=s.forwardRef((e,r)=>{let{className:t,variant:s="default",size:n="default",asChild:i=!1,...o}=e;return(0,a.Y)(i?"slot":"button",{className:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===s,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===s,"border border-input hover:bg-accent hover:text-accent-foreground":"outline"===s,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===s,"hover:bg-accent hover:text-accent-foreground":"ghost"===s,"underline-offset-4 hover:underline text-primary":"link"===s,"h-10 py-2 px-4":"default"===n,"h-9 px-3 rounded-md":"sm"===n,"h-11 px-8 rounded-md":"lg"===n,"h-10 w-10 p-0":"icon"===n},t),ref:r,...o})});n.displayName="Button"},5313:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,6874,23)),Promise.resolve().then(t.bind(t,5095)),Promise.resolve().then(t.bind(t,5376))},5376:(e,r,t)=>{"use strict";t.d(r,{default:()=>o});var a=t(8711),s=t(2115),l=t(6695),n=t(285),i=t(5387);function o(e){let{project:r,isOwner:t=!1}=e,[o,d]=(0,s.useState)(r.files||[]),[c,u]=(0,s.useState)(!1),[f,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{var e;(null==r||null==(e=r.files)?void 0:e.length)>0?d(r.files):(null==r?void 0:r.id)&&m()},[null==r?void 0:r.id,null==r?void 0:r.files]);let m=async()=>{if(null==r?void 0:r.id){u(!0),p(null);try{let e=await fetch("/api/projects/files?projectId=".concat(r.id),{credentials:"include"});if(!e.ok){let r="Failed to fetch project files";try{r=(await e.json()).error||r}catch(e){console.error("Error parsing error response:",e)}throw Error(r)}let t=await e.json();d(t.files||[])}catch(e){console.error("Error fetching project files:",e),p(e.message||"Failed to load files")}finally{u(!1)}}},h=e=>{var r;if(!e)return(0,a.Y)(i.oS,{className:"h-5 w-5"});let t=null==(r=e.split(".").pop())?void 0:r.toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(t||"")?(0,a.Y)(i.xf,{className:"h-5 w-5"}):["pdf","doc","docx"].includes(t||"")?(0,a.Y)(i.ds,{className:"h-5 w-5"}):["zip","rar","7z"].includes(t||"")?(0,a.Y)(i.UW,{className:"h-5 w-5"}):(0,a.Y)(i.oS,{className:"h-5 w-5"})},g=e=>{if(!e)return"file";try{let r=new URL(e).pathname.split("/");return r[r.length-1]}catch(r){return console.error("Error parsing file URL:",r),e.split("/").pop()||"file"}};return c?(0,a.FD)("div",{className:"flex items-center justify-center p-6",children:[(0,a.Y)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),(0,a.Y)("span",{className:"ml-2",children:"Loading files..."})]}):f?(0,a.FD)("div",{className:"text-center p-6 border border-dashed rounded-lg bg-red-500/10 border-red-500/30",children:[(0,a.Y)("p",{className:"text-red-300",children:f}),(0,a.Y)("button",{onClick:m,className:"mt-2 text-sm px-3 py-1 bg-white/10 rounded hover:bg-white/20",children:"Try Again"})]}):o&&0!==o.length?(0,a.FD)("div",{className:"space-y-4",children:[(0,a.Y)("h3",{className:"text-lg font-medium",children:"Project Files"}),(0,a.Y)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:o.map((e,r)=>{var t;if(!e)return null;let s=["jpg","jpeg","png","gif","webp","svg"].includes((null==(t=e.split(".").pop())?void 0:t.toLowerCase())||"");return(0,a.Y)(l.Zp,{className:"overflow-hidden",children:(0,a.Y)(l.Wu,{className:"p-0",children:s?(0,a.FD)("div",{className:"relative aspect-video",children:[(0,a.Y)("img",{src:e,alt:g(e),className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>'}}),(0,a.Y)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-2 right-2 bg-black/50 text-white rounded-full p-1",children:(0,a.Y)(i.A6,{className:"h-4 w-4 rotate-[135deg]"})})]}):(0,a.FD)("div",{className:"p-4 flex items-center justify-between",children:[(0,a.FD)("div",{className:"flex items-center space-x-3",children:[h(e),(0,a.Y)("span",{className:"font-medium truncate max-w-[200px]",children:g(e)})]}),(0,a.Y)(n.$,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.FD)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1",children:[(0,a.Y)("span",{children:"View"}),(0,a.Y)(i.A6,{className:"h-3 w-3 rotate-[135deg]"})]})})]})})},"".concat(e,"-").concat(r))})})]}):(0,a.Y)("div",{className:"text-center p-6 border border-dashed rounded-lg",children:(0,a.Y)("p",{className:"text-gray-500",children:"No files available for this project"})})}},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"useParams")&&t.d(r,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},6695:(e,r,t)=>{"use strict";t.d(r,{Wu:()=>i,Zp:()=>n});var a=t(8711),s=t(2115),l=t(9434);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.Y)("div",{ref:r,className:(0,l.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50",t),...s})});n.displayName="Card",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.Y)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})}).displayName="CardHeader",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.Y)("h3",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})}).displayName="CardTitle",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.Y)("p",{ref:r,className:(0,l.cn)("text-sm text-gray-500 dark:text-gray-400",t),...s})}).displayName="CardDescription";let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.Y)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",t),...s})});i.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.Y)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},9434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>l});var a=t(2596),s=t(9688);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[788,674,874,277,95,441,684,358],()=>r(5313)),_N_E=e.O()}]);