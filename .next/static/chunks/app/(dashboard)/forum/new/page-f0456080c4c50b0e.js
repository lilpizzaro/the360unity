(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[937],{1983:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(8711),n=r(2115),o=r(5695),i=r(5095),s=r(5387);function l(){let e=(0,o.useRouter)(),[t,r]=(0,n.useState)({title:"",content:"",category:"general",tags:""}),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(null),h=e=>{r({...t,[e.target.name]:e.target.value})},m=async r=>{r.preventDefault(),c(!0),u(null);try{let r,a=t.tags.split(",").map(e=>e.trim()).filter(e=>""!==e),n=await fetch("/api/forum",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t.title,content:t.content,category:t.category,tags:a}),credentials:"include"});try{r=await n.json()}catch(e){console.error("Failed to parse response:",e),r={error:"Invalid server response"}}if(!n.ok){if(console.error("API error:",n.status,r),401===n.status){u("You need to be signed in to create a discussion. Please sign in and try again."),setTimeout(()=>{e.push("/sign-in?redirect_url="+encodeURIComponent("/forum/new"))},2e3);return}throw Error((null==r?void 0:r.error)||"Failed to create discussion")}e.push("/forum")}catch(e){console.error("Error creating discussion:",e),u(e.message||"Failed to create discussion. Please try again.")}finally{c(!1)}};return(0,a.FD)(a.FK,{children:[(0,a.Y)(i.default,{}),(0,a.Y)("div",{className:"min-h-screen pt-24 px-6",children:(0,a.FD)("div",{className:"max-w-4xl mx-auto",children:[(0,a.FD)("div",{className:"mb-8",children:[(0,a.Y)("h1",{className:"t-heading-lg mb-4",children:"Create New Discussion"}),(0,a.Y)("p",{className:"t-base opacity-80",children:"Start a new discussion thread in the developer community forum."})]}),(0,a.FD)("div",{className:"bg-white/5 rounded-2xl p-6 backdrop-blur-sm border border-white/10",children:[d&&(0,a.Y)("div",{className:"mb-6 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300",children:d}),(0,a.FD)("form",{onSubmit:m,className:"space-y-6",children:[(0,a.FD)("div",{children:[(0,a.Y)("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Discussion Title *"}),(0,a.Y)("input",{type:"text",id:"title",name:"title",required:!0,value:t.title,onChange:h,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",placeholder:"e.g. Best practices for React hooks?"})]}),(0,a.FD)("div",{children:[(0,a.Y)("label",{htmlFor:"category",className:"block text-sm font-medium mb-2",children:"Category *"}),(0,a.FD)("select",{id:"category",name:"category",required:!0,value:t.category,onChange:h,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",children:[(0,a.Y)("option",{value:"general",children:"General Discussion"}),(0,a.Y)("option",{value:"react",children:"React"}),(0,a.Y)("option",{value:"nextjs",children:"Next.js"}),(0,a.Y)("option",{value:"javascript",children:"JavaScript"}),(0,a.Y)("option",{value:"typescript",children:"TypeScript"}),(0,a.Y)("option",{value:"nodejs",children:"Node.js"}),(0,a.Y)("option",{value:"python",children:"Python"}),(0,a.Y)("option",{value:"devops",children:"DevOps"}),(0,a.Y)("option",{value:"design",children:"UI/UX Design"}),(0,a.Y)("option",{value:"career",children:"Career Advice"}),(0,a.Y)("option",{value:"help",children:"Help Wanted"})]})]}),(0,a.FD)("div",{children:[(0,a.Y)("label",{htmlFor:"tags",className:"block text-sm font-medium mb-2",children:"Tags (comma separated)"}),(0,a.Y)("input",{type:"text",id:"tags",name:"tags",value:t.tags,onChange:h,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white",placeholder:"e.g. hooks, state-management, performance"}),(0,a.Y)("p",{className:"text-xs opacity-70 mt-1",children:"Add relevant tags to help others find your discussion"})]}),(0,a.FD)("div",{children:[(0,a.Y)("label",{htmlFor:"content",className:"block text-sm font-medium mb-2",children:"Discussion Content *"}),(0,a.Y)("textarea",{id:"content",name:"content",rows:10,required:!0,value:t.content,onChange:h,className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-white font-mono text-sm",placeholder:"Write your discussion content here... Markdown is supported."}),(0,a.Y)("p",{className:"text-xs opacity-70 mt-2",children:"Tip: You can use Markdown to format your text, add code blocks, and more."})]}),(0,a.FD)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,a.Y)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:"Cancel"}),(0,a.FD)("button",{type:"submit",disabled:l,className:"btn-primary px-6 py-3 flex items-center gap-2",children:[(0,a.Y)(s.PB,{size:18}),l?"Creating...":"Post Discussion"]})]})]})]})]})})]})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},8050:(e,t,r)=>{Promise.resolve().then(r.bind(r,1983))}},e=>{var t=t=>e(e.s=t);e.O(0,[788,674,874,95,441,684,358],()=>t(8050)),_N_E=e.O()}]);