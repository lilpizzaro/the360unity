exports.id=443,exports.ids=[443],exports.modules={163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return n}});let n=r(71042).unstable_rethrow;("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1632:(e,t,r)=>{"use strict";r.d(t,{Lx:()=>n.Lx,W1:()=>n.W1,io:()=>n.io});var n=r(70386);r(51691)},2880:(e,t,r)=>{let n=r(22077);function i(e,t){return n.fetch(e,t)}for(let e in n)i[e]=n[e];e.exports=i},5020:(e,t,r)=>{"use strict";r.d(t,{At:()=>h,ES:()=>c,H$:()=>a,Lq:()=>l,Rg:()=>f,V2:()=>d,VN:()=>i,cI:()=>s,fS:()=>p,mG:()=>o,qW:()=>y,rB:()=>u,sE:()=>g});var n=r(1632);(process.env.CLERK_JS_VERSION||0)&&(0,n.io)("CLERK_JS_VERSION","Use `NEXT_PUBLIC_CLERK_JS_VERSION` environment variable instead.");let i=process.env.NEXT_PUBLIC_CLERK_JS_VERSION||"",s=process.env.NEXT_PUBLIC_CLERK_JS||"",a=process.env.CLERK_API_URL||"https://api.clerk.dev",o=process.env.CLERK_API_VERSION||"v1",l=process.env.CLERK_API_KEY||"";l&&(0,n.io)("CLERK_API_KEY","Use `CLERK_SECRET_KEY` environment variable instead.");let u=process.env.CLERK_SECRET_KEY||"",c=process.env.NEXT_PUBLIC_CLERK_FRONTEND_API||"";c&&(0,n.io)("NEXT_PUBLIC_CLERK_FRONTEND_API","Use `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` environment variable instead.");let h="pk_test_dXByaWdodC1yZXB0aWxlLTU5LmNsZXJrLmFjY291bnRzLmRldiQ",d=process.env.NEXT_PUBLIC_CLERK_DOMAIN||"",f=process.env.NEXT_PUBLIC_CLERK_PROXY_URL||"",p="true"===process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE,y=process.env.NEXT_PUBLIC_CLERK_SIGN_IN_URL||"",g=process.env.NEXT_PUBLIC_CLERK_SIGN_UP_URL||""},10773:(e,t,r)=>{"use strict";r.d(t,{TD:()=>e9,c2:()=>tZ,v$:()=>e0,AA:()=>eh,qT:()=>tG,iU:()=>tS,pY:()=>eF,V2:()=>tQ,LS:()=>eV,Z5:()=>eq,wI:()=>eH});var n=r(1632),i=(e,t)=>!t&&function(e){return e.endsWith(".lclstage.dev")||e.endsWith(".stgstage.dev")||e.endsWith(".clerkstage.dev")||e.endsWith(".accountsstage.dev")}(e)?"canary":t&&t.split(".")[0]||"latest",s=(e,{pkgVersion:t="4.73.9",clerkJSVersion:r})=>{let n=e.replace(/http(s)?:\/\//,""),s=i(e,t);return`https://${n}/npm/@clerk/clerk-js@${r||s}/dist/clerk.browser.js`};async function a(e,t=1,r=5){try{return await e()}catch(i){var n;if(t>=r)throw i;return await (n=2**t*100,new Promise(e=>setTimeout(e,n))),a(e,t+1,r)}}r(51691);var o=e=>"undefined"!=typeof atob&&"function"==typeof atob?atob(e):"undefined"!=typeof global&&global.Buffer?new global.Buffer(e,"base64").toString():e,l="pk_live_";function u(e){if(!function(e){let t=(e=e||"").startsWith(l)||e.startsWith("pk_test_"),r=o(e.split("_")[2]||"").endsWith("$");return t&&r}(e=e||""))return null;let t=e.startsWith(l)?"production":"development",r=o(e.split("_")[2]);return r.endsWith("$")?{instanceType:t,frontendApi:r=r.slice(0,-1)}:null}function c(e){return e.startsWith("test_")||e.startsWith("sk_test_")}var h=r(70386);function d(e){var t,r,n,i,s;return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:null==(t=null==e?void 0:e.meta)?void 0:t.param_name,sessionId:null==(r=null==e?void 0:e.meta)?void 0:r.session_id,emailAddresses:null==(n=null==e?void 0:e.meta)?void 0:n.email_addresses,identifiers:null==(i=null==e?void 0:e.meta)?void 0:i.identifiers,zxcvbn:null==(s=null==e?void 0:e.meta)?void 0:s.zxcvbn}}}var f=class e extends Error{constructor(t,{data:r,status:n,clerkTraceId:i}){super(t),this.toString=()=>{let e=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(e=>JSON.stringify(e))}`;return this.clerkTraceId&&(e+=`
Clerk Trace ID: ${this.clerkTraceId}`),e},Object.setPrototypeOf(this,e.prototype),this.status=n,this.message=t,this.clerkTraceId=i,this.clerkError=!0,this.errors=function(e=[]){return e.length>0?e.map(d):[]}(r)}};new Proxy({Expired:"expired",Failed:"failed"},{get:(e,t,r)=>((0,h.io)("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(e,t,r))});var p=Object.freeze({InvalidFrontendApiErrorMessage:"The frontendApi passed to Clerk is invalid. You can get your Frontend API key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys."}),y=r(22040),g=r.n(y),m=r(81309),b=r(43793),w=r.n(b),v=r(76463),S=r.n(v),A=r(25538),k=class{constructor(e){this.request=e}requireId(e){if(!e)throw Error("A valid resource ID is required.")}},_=RegExp("(?<!:)/{1,}","g");function E(...e){return e.filter(e=>e).join("/").replace(_,"/")}var B="/allowlist_identifiers",C=class extends k{async getAllowlistIdentifierList(){return this.request({method:"GET",path:B})}async createAllowlistIdentifier(e){return this.request({method:"POST",path:B,bodyParams:e})}async deleteAllowlistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:E(B,e)})}},T="/clients",x=class extends k{async getClientList(){return this.request({method:"GET",path:T})}async getClient(e){return this.requireId(e),this.request({method:"GET",path:E(T,e)})}verifyClient(e){return this.request({method:"POST",path:E(T,"verify"),bodyParams:{token:e}})}},R=class extends k{async deleteDomain(e){return this.request({method:"DELETE",path:E("/domains",e)})}},P="/email_addresses",O=class extends k{async getEmailAddress(e){return this.requireId(e),this.request({method:"GET",path:E(P,e)})}async createEmailAddress(e){return this.request({method:"POST",path:P,bodyParams:e})}async updateEmailAddress(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:E(P,e),bodyParams:t})}async deleteEmailAddress(e){return this.requireId(e),this.request({method:"DELETE",path:E(P,e)})}},N=class extends k{async createEmail(e){return(0,n.io)("EmailAPI.createEmail","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:"/emails",bodyParams:e})}},I=function({packageName:e,customMessages:t}){let r=e,n={...p,...t};function i(e,t){if(!t)return`${r}: ${e}`;let n=e;for(let r of e.matchAll(/{{([a-zA-Z0-9-_]+)}}/g)){let e=(t[r[1]]||"").toString();n=n.replace(`{{${r[1]}}}`,e)}return`${r}: ${n}`}return{setPackageName({packageName:e}){return"string"==typeof e&&(r=e),this},setMessages({customMessages:e}){return Object.assign(n,e||{}),this},throwInvalidPublishableKeyError(e){throw Error(i(n.InvalidPublishableKeyErrorMessage,e))},throwInvalidFrontendApiError(e){throw Error(i(n.InvalidFrontendApiErrorMessage,e))},throwInvalidProxyUrl(e){throw Error(i(n.InvalidProxyUrlErrorMessage,e))},throwMissingPublishableKeyError(){throw Error(i(n.MissingPublishableKeyErrorMessage))}}}({packageName:"@clerk/backend"}),{isDevOrStagingUrl:K}=function(){let e=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],t=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;let n="string"==typeof r?r:r.hostname,i=t.get(n);return void 0===i&&(i=e.some(e=>n.endsWith(e)),t.set(n,i)),i}}}(),U=class extends k{async getInterstitial(){return(0,n.io)("getInterstitial()",'Switch to `Clerk(...).localInterstitial(...)` from `import { Clerk } from "@clerk/backend"`.'),this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}},L="/invitations",j=class extends k{async getInvitationList(e={}){return this.request({method:"GET",path:L,queryParams:e})}async createInvitation(e){return this.request({method:"POST",path:L,bodyParams:e})}async revokeInvitation(e){return this.requireId(e),this.request({method:"POST",path:E(L,e,"revoke")})}},{RuntimeFetch:D,RuntimeAbortController:M,RuntimeBlob:$,RuntimeFormData:q,RuntimeHeaders:H,RuntimeRequest:z,RuntimeResponse:V}=m,F=D.bind(globalThis),W={crypto:g(),fetch:F,AbortController:M,Blob:$,FormData:q,Headers:H,Request:z,Response:V},J="/organizations",G=class extends k{async getOrganizationList(e){return this.request({method:"GET",path:J,queryParams:e})}async createOrganization(e){return this.request({method:"POST",path:J,bodyParams:e})}async getOrganization(e){let t="organizationId"in e?e.organizationId:e.slug;return this.requireId(t),this.request({method:"GET",path:E(J,t)})}async updateOrganization(e,t){return this.requireId(e),this.request({method:"PATCH",path:E(J,e),bodyParams:t})}async updateOrganizationLogo(e,t){this.requireId(e);let r=new W.FormData;return r.append("file",t?.file),r.append("uploader_user_id",t?.uploaderUserId),this.request({method:"PUT",path:E(J,e,"logo"),formData:r})}async deleteOrganizationLogo(e){return this.requireId(e),this.request({method:"DELETE",path:E(J,e,"logo")})}async updateOrganizationMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:E(J,e,"metadata"),bodyParams:t})}async deleteOrganization(e){return this.request({method:"DELETE",path:E(J,e)})}async getOrganizationMembershipList(e){let{organizationId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:E(J,t,"memberships"),queryParams:{limit:r,offset:n}})}async createOrganizationMembership(e){let{organizationId:t,userId:r,role:n}=e;return this.requireId(t),this.request({method:"POST",path:E(J,t,"memberships"),bodyParams:{userId:r,role:n}})}async updateOrganizationMembership(e){let{organizationId:t,userId:r,role:n}=e;return this.requireId(t),this.request({method:"PATCH",path:E(J,t,"memberships",r),bodyParams:{role:n}})}async updateOrganizationMembershipMetadata(e){let{organizationId:t,userId:r,publicMetadata:n,privateMetadata:i}=e;return this.request({method:"PATCH",path:E(J,t,"memberships",r,"metadata"),bodyParams:{publicMetadata:n,privateMetadata:i}})}async deleteOrganizationMembership(e){let{organizationId:t,userId:r}=e;return this.requireId(t),this.request({method:"DELETE",path:E(J,t,"memberships",r)})}async getOrganizationInvitationList(e){let{organizationId:t,status:r,limit:n,offset:i}=e;return this.requireId(t),this.request({method:"GET",path:E(J,t,"invitations"),queryParams:{status:r,limit:n,offset:i}})}async getPendingOrganizationInvitationList(e){(0,n.io)("getPendingOrganizationInvitationList","Use `getOrganizationInvitationList` instead.");let{organizationId:t,limit:r,offset:i}=e;return this.requireId(t),this.request({method:"GET",path:E(J,t,"invitations","pending"),queryParams:{limit:r,offset:i}})}async createOrganizationInvitation(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"POST",path:E(J,t,"invitations"),bodyParams:{...r}})}async getOrganizationInvitation(e){let{organizationId:t,invitationId:r}=e;return this.requireId(t),this.requireId(r),this.request({method:"GET",path:E(J,t,"invitations",r)})}async revokeOrganizationInvitation(e){let{organizationId:t,invitationId:r,requestingUserId:n}=e;return this.requireId(t),this.request({method:"POST",path:E(J,t,"invitations",r,"revoke"),bodyParams:{requestingUserId:n}})}},Y="/phone_numbers",X=class extends k{async getPhoneNumber(e){return this.requireId(e),this.request({method:"GET",path:E(Y,e)})}async createPhoneNumber(e){return this.request({method:"POST",path:Y,bodyParams:e})}async updatePhoneNumber(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:E(Y,e),bodyParams:t})}async deletePhoneNumber(e){return this.requireId(e),this.request({method:"DELETE",path:E(Y,e)})}},Q="/redirect_urls",Z=class extends k{async getRedirectUrlList(){return this.request({method:"GET",path:Q})}async getRedirectUrl(e){return this.requireId(e),this.request({method:"GET",path:E(Q,e)})}async createRedirectUrl(e){return this.request({method:"POST",path:Q,bodyParams:e})}async deleteRedirectUrl(e){return this.requireId(e),this.request({method:"DELETE",path:E(Q,e)})}},ee="/sessions",et=class extends k{async getSessionList(e){return this.request({method:"GET",path:ee,queryParams:e})}async getSession(e){return this.requireId(e),this.request({method:"GET",path:E(ee,e)})}async revokeSession(e){return this.requireId(e),this.request({method:"POST",path:E(ee,e,"revoke")})}async verifySession(e,t){return this.requireId(e),this.request({method:"POST",path:E(ee,e,"verify"),bodyParams:{token:t}})}async getToken(e,t){return this.requireId(e),(await this.request({method:"POST",path:E(ee,e,"tokens",t||"")})).jwt}},er="/sign_in_tokens",en=class extends k{async createSignInToken(e){return this.request({method:"POST",path:er,bodyParams:e})}async revokeSignInToken(e){return this.requireId(e),this.request({method:"POST",path:E(er,e,"revoke")})}},ei=class extends k{async createSMSMessage(e){return(0,n.io)("SMSMessageAPI.createSMSMessage","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:"/sms_messages",bodyParams:e})}},es="/users",ea=class extends k{async getUserList(e={}){return this.request({method:"GET",path:es,queryParams:e})}async getUser(e){return this.requireId(e),this.request({method:"GET",path:E(es,e)})}async createUser(e){return this.request({method:"POST",path:es,bodyParams:e})}async updateUser(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:E(es,e),bodyParams:t})}async updateUserProfileImage(e,t){this.requireId(e);let r=new W.FormData;return r.append("file",t?.file),this.request({method:"POST",path:E(es,e,"profile_image"),formData:r})}async updateUserMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:E(es,e,"metadata"),bodyParams:t})}async deleteUser(e){return this.requireId(e),this.request({method:"DELETE",path:E(es,e)})}async getCount(e={}){return this.request({method:"GET",path:E(es,"count"),queryParams:e})}async getUserOauthAccessToken(e,t){return this.requireId(e),this.request({method:"GET",path:E(es,e,"oauth_access_tokens",t)})}async disableUserMFA(e){return this.requireId(e),this.request({method:"DELETE",path:E(es,e,"mfa")})}async getOrganizationMembershipList(e){let{userId:t,limit:r,offset:n}=e;return this.requireId(t),this.request({method:"GET",path:E(es,t,"organization_memberships"),queryParams:{limit:r,offset:n}})}async verifyPassword(e){let{userId:t,password:r}=e;return this.requireId(t),this.request({method:"POST",path:E(es,t,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(e){let{userId:t,code:r}=e;return this.requireId(t),this.request({method:"POST",path:E(es,t,"verify_totp"),bodyParams:{code:r}})}},eo="https://api.clerk.dev",el="@clerk/backend@0.38.15",eu={AuthToken:"x-clerk-auth-token",AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",EnableDebug:"x-clerk-debug",ClerkRedirectTo:"x-clerk-redirect-to",CloudFrontForwardedProto:"cloudfront-forwarded-proto",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},ec={AuthStatus:eu.AuthStatus,AuthToken:eu.AuthToken},eh={Attributes:{AuthToken:"__clerkAuthToken",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},Cookies:{Session:"__session",ClientUat:"__client_uat"},Headers:eu,SearchParams:ec,ContentTypes:{Json:"application/json"}};function ed(e){if(!e||"string"!=typeof e)throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var ef=class e{constructor(e,t,r,n,i){this.id=e,this.identifier=t,this.createdAt=r,this.updatedAt=n,this.invitationId=i}static fromJSON(t){return new e(t.id,t.identifier,t.created_at,t.updated_at,t.invitation_id)}},ep=class e{constructor(e,t,r,n,i,s,a,o,l){this.id=e,this.clientId=t,this.userId=r,this.status=n,this.lastActiveAt=i,this.expireAt=s,this.abandonAt=a,this.createdAt=o,this.updatedAt=l}static fromJSON(t){return new e(t.id,t.client_id,t.user_id,t.status,t.last_active_at,t.expire_at,t.abandon_at,t.created_at,t.updated_at)}},ey=class e{constructor(e,t,r,n,i,s,a,o){this.id=e,this.sessionIds=t,this.sessions=r,this.signInId=n,this.signUpId=i,this.lastActiveSessionId=s,this.createdAt=a,this.updatedAt=o}static fromJSON(t){return new e(t.id,t.session_ids,t.sessions.map(e=>ep.fromJSON(e)),t.sign_in_id,t.sign_up_id,t.last_active_session_id,t.created_at,t.updated_at)}},eg=class e{constructor(e,t,r,n){this.object=e,this.id=t,this.slug=r,this.deleted=n}static fromJSON(t){return new e(t.object,t.id||null,t.slug||null,t.deleted)}},em=class e{constructor(e,t,r,n,i,s,a,o,l,u,c){this.id=e,this.fromEmailName=t,this.emailAddressId=r,this.toEmailAddress=n,this.subject=i,this.body=s,this.bodyPlain=a,this.status=o,this.slug=l,this.data=u,this.deliveredByClerk=c}static fromJSON(t){return new e(t.id,t.from_email_name,t.email_address_id,t.to_email_address,t.subject,t.body,t.body_plain,t.status,t.slug,t.data,t.delivered_by_clerk)}},eb=class e{constructor(e,t){this.id=e,this.type=t}static fromJSON(t){return new e(t.id,t.type)}},ew=class e{constructor(e,t,r=null,n=null,i=null,s=null){this.status=e,this.strategy=t,this.externalVerificationRedirectURL=r,this.attempts=n,this.expireAt=i,this.nonce=s}static fromJSON(t){return new e(t.status,t.strategy,t.external_verification_redirect_url?new URL(t.external_verification_redirect_url):null,t.attempts,t.expire_at,t.nonce)}},ev=class e{constructor(e,t,r,n){this.id=e,this.emailAddress=t,this.verification=r,this.linkedTo=n}static fromJSON(t){return new e(t.id,t.email_address,t.verification&&ew.fromJSON(t.verification),t.linked_to.map(e=>eb.fromJSON(e)))}},eS=class e{constructor(e,t,r,n,i,s,a,o,l,u,c,h={},d,f){this.id=e,this.provider=t,this.identificationId=r,this.externalId=n,this.approvedScopes=i,this.emailAddress=s,this.firstName=a,this.lastName=o,this.picture=l,this.imageUrl=u,this.username=c,this.publicMetadata=h,this.label=d,this.verification=f}static fromJSON(t){return new e(t.id,t.provider,t.identification_id,t.provider_user_id,t.approved_scopes,t.email_address,t.first_name,t.last_name,t.avatar_url,t.image_url,t.username,t.public_metadata,t.label,t.verification&&ew.fromJSON(t.verification))}};(0,n.Lx)(eS,"picture","Use `imageUrl` instead.");var eA=class e{constructor(e,t,r,n,i,s,a){this.id=e,this.emailAddress=t,this.publicMetadata=r,this.createdAt=n,this.updatedAt=i,this.status=s,this.revoked=a}static fromJSON(t){return new e(t.id,t.email_address,t.public_metadata,t.created_at,t.updated_at,t.status,t.revoked)}},ek=(e=>(e.AllowlistIdentifier="allowlist_identifier",e.Client="client",e.Email="email",e.EmailAddress="email_address",e.ExternalAccount="external_account",e.FacebookAccount="facebook_account",e.GoogleAccount="google_account",e.Invitation="invitation",e.OauthAccessToken="oauth_access_token",e.Organization="organization",e.OrganizationInvitation="organization_invitation",e.OrganizationMembership="organization_membership",e.PhoneNumber="phone_number",e.RedirectUrl="redirect_url",e.Session="session",e.SignInAttempt="sign_in_attempt",e.SignInToken="sign_in_token",e.SignUpAttempt="sign_up_attempt",e.SmsMessage="sms_message",e.User="user",e.Web3Wallet="web3_wallet",e.Token="token",e.TotalCount="total_count",e))(ek||{}),e_=class e{constructor(e,t,r={},n,i,s){this.provider=e,this.token=t,this.publicMetadata=r,this.label=n,this.scopes=i,this.tokenSecret=s}static fromJSON(t){return new e(t.provider,t.token,t.public_metadata,t.label,t.scopes,t.token_secret)}},eE=class e{constructor(e,t,r,n,i,s,a,o,l,u={},c={},h,d,f,p){this.id=e,this.name=t,this.slug=r,this.logoUrl=n,this.imageUrl=i,this.hasImage=s,this.createdBy=a,this.createdAt=o,this.updatedAt=l,this.publicMetadata=u,this.privateMetadata=c,this.maxAllowedMemberships=h,this.adminDeleteEnabled=d,this.members_count=f,this.membersCount=p}static fromJSON(t){return new e(t.id,t.name,t.slug,t.logo_url,t.image_url,t.has_image,t.created_by,t.created_at,t.updated_at,t.public_metadata,t.private_metadata,t.max_allowed_memberships,t.admin_delete_enabled,t.members_count,t.members_count)}};(0,n.Lx)(eE,"logoUrl","Use `imageUrl` instead."),(0,n.Lx)(eE,"members_count","Use `membersCount` instead.");var eB=class e{constructor(e,t,r,n,i,s,a,o={},l={}){this.id=e,this.emailAddress=t,this.role=r,this.organizationId=n,this.createdAt=i,this.updatedAt=s,this.status=a,this.publicMetadata=o,this.privateMetadata=l}static fromJSON(t){return new e(t.id,t.email_address,t.role,t.organization_id,t.created_at,t.updated_at,t.status,t.public_metadata,t.private_metadata)}},eC=class e{constructor(e,t,r={},n={},i,s,a,o){this.id=e,this.role=t,this.publicMetadata=r,this.privateMetadata=n,this.createdAt=i,this.updatedAt=s,this.organization=a,this.publicUserData=o}static fromJSON(t){return new e(t.id,t.role,t.public_metadata,t.private_metadata,t.created_at,t.updated_at,eE.fromJSON(t.organization),eT.fromJSON(t.public_user_data))}},eT=class e{constructor(e,t,r,n,i,s,a){this.identifier=e,this.firstName=t,this.lastName=r,this.profileImageUrl=n,this.imageUrl=i,this.hasImage=s,this.userId=a}static fromJSON(t){return new e(t.identifier,t.first_name,t.last_name,t.profile_image_url,t.image_url,t.has_image,t.user_id)}};(0,n.Lx)(eT,"profileImageUrl","Use `imageUrl` instead.");var ex=class e{constructor(e,t,r,n,i,s){this.id=e,this.phoneNumber=t,this.reservedForSecondFactor=r,this.defaultSecondFactor=n,this.verification=i,this.linkedTo=s}static fromJSON(t){return new e(t.id,t.phone_number,t.reserved_for_second_factor,t.default_second_factor,t.verification&&ew.fromJSON(t.verification),t.linked_to.map(e=>eb.fromJSON(e)))}},eR=class e{constructor(e,t,r,n){this.id=e,this.url=t,this.createdAt=r,this.updatedAt=n}static fromJSON(t){return new e(t.id,t.url,t.created_at,t.updated_at)}},eP=class e{constructor(e,t,r,n,i,s,a){this.id=e,this.userId=t,this.token=r,this.status=n,this.url=i,this.createdAt=s,this.updatedAt=a}static fromJSON(t){return new e(t.id,t.user_id,t.token,t.status,t.url,t.created_at,t.updated_at)}},eO=class e{constructor(e,t,r,n,i,s,a){this.id=e,this.fromPhoneNumber=t,this.toPhoneNumber=r,this.message=n,this.status=i,this.phoneNumberId=s,this.data=a}static fromJSON(t){return new e(t.id,t.from_phone_number,t.to_phone_number,t.message,t.status,t.phone_number_id,t.data)}},eN=class e{constructor(e){this.jwt=e}static fromJSON(t){return new e(t.jwt)}},eI=class e{constructor(e,t,r){this.id=e,this.web3Wallet=t,this.verification=r}static fromJSON(t){return new e(t.id,t.web3_wallet,t.verification&&ew.fromJSON(t.verification))}},eK=class e{constructor(e,t,r,n,i,s,a,o,l,u,c,h,d,f,p,y,g,m,b,w,v,S={},A={},k={},_=[],E=[],B=[],C=[],T){this.id=e,this.passwordEnabled=t,this.totpEnabled=r,this.backupCodeEnabled=n,this.twoFactorEnabled=i,this.banned=s,this.createdAt=a,this.updatedAt=o,this.profileImageUrl=l,this.imageUrl=u,this.hasImage=c,this.gender=h,this.birthday=d,this.primaryEmailAddressId=f,this.primaryPhoneNumberId=p,this.primaryWeb3WalletId=y,this.lastSignInAt=g,this.externalId=m,this.username=b,this.firstName=w,this.lastName=v,this.publicMetadata=S,this.privateMetadata=A,this.unsafeMetadata=k,this.emailAddresses=_,this.phoneNumbers=E,this.web3Wallets=B,this.externalAccounts=C,this.createOrganizationEnabled=T}static fromJSON(t){return new e(t.id,t.password_enabled,t.totp_enabled,t.backup_code_enabled,t.two_factor_enabled,t.banned,t.created_at,t.updated_at,t.profile_image_url,t.image_url,t.has_image,t.gender,t.birthday,t.primary_email_address_id,t.primary_phone_number_id,t.primary_web3_wallet_id,t.last_sign_in_at,t.external_id,t.username,t.first_name,t.last_name,t.public_metadata,t.private_metadata,t.unsafe_metadata,(t.email_addresses||[]).map(e=>ev.fromJSON(e)),(t.phone_numbers||[]).map(e=>ex.fromJSON(e)),(t.web3_wallets||[]).map(e=>eI.fromJSON(e)),(t.external_accounts||[]).map(e=>eS.fromJSON(e)),t.create_organization_enabled)}};function eU(e){if("string"!=typeof e&&"object"in e&&"deleted"in e)return eg.fromJSON(e);switch(e.object){case"allowlist_identifier":return ef.fromJSON(e);case"client":return ey.fromJSON(e);case"email_address":return ev.fromJSON(e);case"email":return em.fromJSON(e);case"invitation":return eA.fromJSON(e);case"oauth_access_token":return e_.fromJSON(e);case"organization":return eE.fromJSON(e);case"organization_invitation":return eB.fromJSON(e);case"organization_membership":return eC.fromJSON(e);case"phone_number":return ex.fromJSON(e);case"redirect_url":return eR.fromJSON(e);case"sign_in_token":return eP.fromJSON(e);case"session":return ep.fromJSON(e);case"sms_message":return eO.fromJSON(e);case"token":return eN.fromJSON(e);case"total_count":return e.total_count;case"user":return eK.fromJSON(e);default:return e}}(0,n.Lx)(eK,"profileImageUrl","Use `imageUrl` instead.");var eL=e=>async(...t)=>{let r=await e(...t);if(null===r.errors)return r.data;{let{errors:e,clerkTraceId:t}=r,{status:n,statusText:i}=r,s=new f(i||"",{data:[],status:n||"",clerkTraceId:t});throw s.errors=e,s}};function ej(e,t){return e&&"object"==typeof e&&"clerk_trace_id"in e&&"string"==typeof e.clerk_trace_id?e.clerk_trace_id:t?.get("cf-ray")||""}function eD(e){return{code:e.code,message:e.message,longMessage:e.long_message,meta:{paramName:e?.meta?.param_name,sessionId:e?.meta?.session_id}}}function eM(e){let t=eL(async t=>{let r,{apiKey:i,secretKey:s,httpOptions:a,apiUrl:o=eo,apiVersion:l="v1",userAgent:u=el}=e;i&&(0,n.io)("apiKey","Use `secretKey` instead."),a&&(0,n.io)("httpOptions","This option has been deprecated and will be removed with the next major release.\nA RequestInit init object used by the `request` method.");let{path:c,method:h,queryParams:d,headerParams:f,bodyParams:p,formData:y}=t,g=s||i;ed(g);let m=new URL(E(o,l,c));if(d)for(let[e,t]of Object.entries(S()({...d})))t&&[t].flat().forEach(t=>m.searchParams.append(e,t));let b={Authorization:`Bearer ${g}`,"User-Agent":u,...f};try{var v;if(y)r=await W.fetch(m.href,{...a,method:h,headers:b,body:y});else{b["Content-Type"]="application/json";let e="GET"!==h&&p&&Object.keys(p).length>0?{body:JSON.stringify(S()(p,{deep:!1}))}:null;r=await W.fetch(m.href,w()(a||{},{method:h,headers:b,...e}))}let e=r?.headers&&r.headers?.get(eh.Headers.ContentType)===eh.ContentTypes.Json,t=await (e?r.json():r.text());if(!r.ok)throw t;return{data:Array.isArray(t)?t.map(e=>eU(e)):(v=t,Array.isArray(v.data)&&void 0!==v.data)?t.data.map(e=>eU(e)):eU(t),errors:null}}catch(e){if(e instanceof Error)return{data:null,errors:[{code:"unexpected_error",message:e.message||"Unexpected error"}],clerkTraceId:ej(e,r?.headers)};return{data:null,errors:function(e){if(e&&"object"==typeof e&&"errors"in e){let t=e.errors;return t.length>0?t.map(eD):[]}return[]}(e),status:r?.status,statusText:r?.statusText,clerkTraceId:ej(e,r?.headers)}}});return{allowlistIdentifiers:new C(t),clients:new x(t),emailAddresses:new O(t),emails:new N(t),interstitial:new U(t),invitations:new j(t),organizations:new G(t),phoneNumbers:new X(t),redirectUrls:new Z(t),sessions:new et(t),signInTokens:new en(t),smsMessages:new ei(t),users:new ea(t),domains:new R(t)}}var e$=e=>()=>{let t={...e};return t.apiKey=(t.apiKey||"").substring(0,7),t.secretKey=(t.secretKey||"").substring(0,7),t.jwtKey=(t.jwtKey||"").substring(0,7),{...t}};function eq(e,t,r){let{act:i,sid:s,org_id:a,org_role:o,org_slug:l,org_permissions:u,sub:c}=e,{apiKey:h,secretKey:d,apiUrl:f,apiVersion:p,token:y,session:g,user:m,organization:b}=t;h&&(0,n.io)("apiKey","Use `secretKey` instead.");let{sessions:w}=eM({apiKey:h,secretKey:d,apiUrl:f,apiVersion:p}),v=eW({sessionId:s,sessionToken:y,fetcher:(...e)=>w.getToken(...e)});return{actor:i,sessionClaims:e,sessionId:s,session:g,userId:c,user:m,orgId:a,orgRole:o,orgSlug:l,orgPermissions:u,organization:b,getToken:v,has:eJ({orgId:a,orgRole:o,orgPermissions:u,userId:c}),debug:e$({...t,...r})}}function eH(e){return e?.apiKey&&(0,n.io)("apiKey","Use `secretKey` instead."),{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,organization:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:e$(e)}}function ez(e){return e&&(delete e.privateMetadata,delete e.private_metadata),e}function eV(e){let t=e.user?{...e.user}:e.user,r=e.organization?{...e.organization}:e.organization;return ez(t),ez(r),{...e,user:t,organization:r}}var eF=e=>{let{debug:t,getToken:r,has:n,...i}=e;return i},eW=e=>{let{fetcher:t,sessionToken:r,sessionId:n}=e||{};return async(e={})=>n?e.template?t(n,e.template):r:null},eJ=({orgId:e,orgRole:t,userId:r,orgPermissions:n})=>i=>{if(!i?.permission&&!i?.role)throw Error('Missing parameters. `has` from `auth` or `getAuth` requires a permission or role key to be passed. Example usage: `has({permission: "org:posts:edit"`');return!!e&&!!r&&!!t&&!!n&&(i.permission?n.includes(i.permission):!!i.role&&t===i.role)},eG=class e extends Error{constructor({action:t,message:r,reason:n}){super(r),Object.setPrototypeOf(this,e.prototype),this.reason=n,this.message=r,this.action=t}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};async function eY(e){e.frontendApi&&(0,n.io)("frontendApi","Use `publishableKey` instead."),e.pkgVersion&&(0,n.io)("pkgVersion","Use `clerkJSVersion` instead."),e.frontendApi=u(e.publishableKey)?.frontendApi||e.frontendApi||"";let t=eX(e),r=await a(()=>W.fetch(eX(e),{method:"GET",headers:{"Clerk-Backend-SDK":e.userAgent||el}}));if(!r.ok)throw new eG({action:"Contact support@clerk.com",message:`Error loading Clerk Interstitial from ${t} with code=${r.status}`,reason:"interstitial-remote-failed-to-load"});return r.text()}function eX(e){e.frontendApi&&(0,n.io)("frontendApi","Use `publishableKey` instead."),e.frontendApi=u(e.publishableKey)?.frontendApi||e.frontendApi||"";let{apiUrl:t,frontendApi:r,pkgVersion:s,clerkJSVersion:a,publishableKey:o,proxyUrl:l,isSatellite:c,domain:h,signInUrl:d}=e,f=new URL(t);return f.pathname=E(f.pathname,"v1","/public/interstitial"),f.searchParams.append("clerk_js_version",a||i(r,s)),o?f.searchParams.append("publishable_key",o):f.searchParams.append("frontend_api",r),l&&f.searchParams.append("proxy_url",l),c&&f.searchParams.append("is_satellite","true"),f.searchParams.append("sign_in_url",d||""),K(e.frontendApi)||f.searchParams.append("use_domain_for_script","true"),h&&f.searchParams.append("domain",h),f.href}var eQ=(e,t)=>e.headers.get(t),eZ=e=>e?.split(",")[0],e0=(e,t)=>{let r=new URL(e.url),n=eQ(e,eh.Headers.ForwardedProto),i=eQ(e,eh.Headers.ForwardedHost),s=eQ(e,eh.Headers.Host),a=e1({protocol:r.protocol,forwardedProto:n,forwardedHost:i,host:s||r.host});return new URL(t||r.pathname,a)},e1=({protocol:e,forwardedProto:t,forwardedHost:r,host:n})=>{let i=eZ(r)??n,s=eZ(t)??e?.replace(/[:/]/,"");return i&&s?`${s}://${i}`:""},e2=e=>{if(!e)return{};let t=e3(e);return{cookies:t,headers:e4(e),searchParams:e6(e)}},e8=e=>e?e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):e,e3=e=>{let t=e.headers&&e.headers?.get("cookie")?(0,A.q)(e.headers.get("cookie")):{};return e=>{let r=t?.[e];if(void 0!==r)return e8(r)}},e4=e=>t=>e?.headers?.get(t)||void 0,e6=e=>e?.url?new URL(e.url)?.searchParams:void 0,e5=e=>e?.replace("Bearer ",""),e9=(e=>(e.SignedIn="signed-in",e.SignedOut="signed-out",e.Interstitial="interstitial",e.Unknown="unknown",e))(e9||{});async function e7(e,t){let{apiKey:r,secretKey:n,apiUrl:i,apiVersion:s,cookieToken:a,frontendApi:o,proxyUrl:l,publishableKey:u,domain:c,isSatellite:h,headerToken:d,loadSession:f,loadUser:p,loadOrganization:y,signInUrl:g,signUpUrl:m,afterSignInUrl:b,afterSignUpUrl:w,token:v}=e,{sid:S,org_id:A,sub:k}=t,{sessions:_,users:E,organizations:B}=eM({apiKey:r,secretKey:n,apiUrl:i,apiVersion:s}),[C,T,x]=await Promise.all([f?_.getSession(S):Promise.resolve(void 0),p?E.getUser(k):Promise.resolve(void 0),y&&A?B.getOrganization({organizationId:A}):Promise.resolve(void 0)]),R=eq(t,{secretKey:n,apiKey:r,apiUrl:i,apiVersion:s,token:a||d||"",session:C,user:T,organization:x},{...e,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:o,proxyUrl:l,publishableKey:u,domain:c,isSatellite:h,signInUrl:g,signUpUrl:m,afterSignInUrl:b,afterSignUpUrl:w,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>R,token:v}}function te(e,t,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:o,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h}=e;return{status:"signed-out",reason:t,message:r,frontendApi:n,proxyUrl:s,publishableKey:i,isSatellite:a,domain:o,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>eH({...e,status:"signed-out",reason:t,message:r}),token:null}}function tt(e,t,r=""){let{frontendApi:n,publishableKey:i,proxyUrl:s,isSatellite:a,domain:o,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h}=e;return{status:"interstitial",reason:t,message:r,frontendApi:n,publishableKey:i,isSatellite:a,domain:o,proxyUrl:s,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null,token:null}}function tr({originURL:e,host:t,forwardedHost:r,forwardedProto:n}){let i=e1({forwardedProto:n,forwardedHost:r,protocol:e.protocol,host:t});return i&&new URL(i).origin!==e.origin}var tn=(e,t)=>e?e.find(e=>e.code===t):null,ti={parse:(e,t)=>(function(e,t,r={}){if(!t.codes){t.codes={};for(let e=0;e<t.chars.length;++e)t.codes[t.chars[e]]=e}if(!r.loose&&e.length*t.bits&7)throw SyntaxError("Invalid padding");let n=e.length;for(;"="===e[n-1];)if(--n,!r.loose&&!((e.length-n)*t.bits&7))throw SyntaxError("Invalid padding");let i=new(r.out??Uint8Array)(n*t.bits/8|0),s=0,a=0,o=0;for(let r=0;r<n;++r){let n=t.codes[e[r]];if(void 0===n)throw SyntaxError("Invalid character "+e[r]);a=a<<t.bits|n,(s+=t.bits)>=8&&(s-=8,i[o++]=255&a>>s)}if(s>=t.bits||255&a<<8-s)throw SyntaxError("Unexpected end of data");return i})(e,ts,t),stringify:(e,t)=>(function(e,t,r={}){let{pad:n=!0}=r,i=(1<<t.bits)-1,s="",a=0,o=0;for(let r=0;r<e.length;++r)for(o=o<<8|255&e[r],a+=8;a>t.bits;)a-=t.bits,s+=t.chars[i&o>>a];if(a&&(s+=t.chars[i&o<<t.bits-a]),n)for(;s.length*t.bits&7;)s+="=";return s})(e,ts,t)},ts={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},ta={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},to="RSASSA-PKCS1-v1_5",tl={RS256:to,RS384:to,RS512:to},tu=Object.keys(ta),tc=e=>Array.isArray(e)&&e.length>0&&e.every(e=>"string"==typeof e),th=(e,t)=>{let r=[t].flat().filter(e=>!!e),n=[e].flat().filter(e=>!!e);if(r.length>0&&n.length>0){if("string"==typeof e){if(!r.includes(e))throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}else if(tc(e)&&!e.some(e=>r.includes(e)))throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}},td=e=>{if(void 0!==e&&"JWT"!==e)throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(e)}. Expected "JWT".`})},tf=e=>{if(!tu.includes(e))throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(e)}. Supported: ${tu}.`})},tp=e=>{if("string"!=typeof e)throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(e)}.`})},ty=(e,t)=>{if(e&&t&&0!==t.length&&!t.includes(e))throw new eG({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(e)}. Expected "${t}".`})},tg=(e,t)=>{if("function"!=typeof t||t(e)){if("string"==typeof t&&e&&e!==t)throw new eG({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(e)}. Expected "${t}".`})}else throw new eG({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."})},tm=(e,t)=>{if("number"!=typeof e)throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(e),n.getTime()<=r.getTime()-t)throw new eG({reason:"token-expired",message:`JWT is expired. Expiry date: ${n.toUTCString()}, Current date: ${r.toUTCString()}.`})},tb=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(e),n.getTime()>r.getTime()+t)throw new eG({reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})},tw=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),n=new Date(0);if(n.setUTCSeconds(e),n.getTime()>r.getTime()+t)throw new eG({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${n.toUTCString()}; Current date: ${r.toUTCString()};`})};async function tv(e,t){let{header:r,signature:n,raw:i}=e,s=new TextEncoder().encode([i.header,i.payload].join(".")),a=function(e){let t=ta[e],r=tl[e];if(!t||!r)throw Error(`Unsupported algorithm ${e}, expected one of ${tu.join(",")}.`);return{hash:{name:ta[e]},name:tl[e]}}(r.alg),l=await function(e,t,r){if("object"==typeof e)return W.crypto.subtle.importKey("jwk",e,t,!1,[r]);let n=function(e){let t=o(e.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,"")),r=new Uint8Array(new ArrayBuffer(t.length));for(let e=0,n=t.length;e<n;e++)r[e]=t.charCodeAt(e);return r}(e),i="sign"===r?"pkcs8":"spki";return W.crypto.subtle.importKey(i,n,t,!1,[r])}(t,a,"verify");return W.crypto.subtle.verify(a.name,l,n,s)}function tS(e){let t=(e||"").toString().split(".");if(3!==t.length)throw new eG({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});let[r,i,s]=t,a=new TextDecoder,o=JSON.parse(a.decode(ti.parse(r,{loose:!0}))),l=JSON.parse(a.decode(ti.parse(i,{loose:!0}))),u=ti.parse(s,{loose:!0});return(0,n.W1)(l,"orgs",'Add orgs to your session token using the "user.organizations" shortcode in JWT Templates instead.',"decodeJwt:orgs"),{header:o,payload:l,signature:u,raw:{header:r,payload:i,signature:s,text:e}}}async function tA(e,{audience:t,authorizedParties:r,clockSkewInSeconds:i,clockSkewInMs:s,issuer:a,key:o}){let l;i&&(0,n.io)("clockSkewInSeconds","Use `clockSkewInMs` instead.");let u=s||i||5e3,c=tS(e),{header:h,payload:d}=c,{typ:f,alg:p}=h;td(f),tf(p);let{azp:y,sub:g,aud:m,iss:b,iat:w,exp:v,nbf:S}=d;tp(g),th([m],[t]),ty(y,r),tg(b,a),tm(v,u),tb(S,u),tw(w,u);try{l=await tv(c,o)}catch(e){throw new eG({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${e}`})}if(!l)throw new eG({reason:"token-invalid-signature",message:"JWT signature is invalid."});return d}var tk={},t_=0;function tE(e,t=!0){tk[e.kid]=e,t_=t?Date.now():-1}var tB="local";async function tC({apiKey:e,secretKey:t,apiUrl:r=eo,apiVersion:n="v1",issuer:i,kid:s,skipJwksCache:o}){-1!==t_&&Date.now()-t_>=3e5&&(tk={});let l=!tk[s];if(o||l){let s,o=t||e;if(o)s=()=>tx(r,o,n);else if(i)s=()=>tT(i);else throw new eG({action:"Contact support@clerk.com",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});let{keys:l}=await a(s);if(!l||!l.length)throw new eG({action:"Contact support@clerk.com",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:"jwk-remote-failed-to-load"});l.forEach(e=>tE(e))}let u=tk[s];if(!u){let e=Object.values(tk).map(e=>e.kid).join(", ");throw new eG({action:"Contact support@clerk.com",message:`Unable to find a signing key in JWKS that matches the kid='${s}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT.${e?` The following kid are available: ${e}`:""}`,reason:"jwk-remote-missing"})}return u}async function tT(e){let t=new URL(e);t.pathname=E(t.pathname,".well-known/jwks.json");let r=await W.fetch(t.href);if(!r.ok)throw new eG({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${t.href} with code=${r.status}`,reason:"jwk-remote-failed-to-load"});return r.json()}async function tx(e,t,r){if(!t)throw new eG({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:"jwk-remote-failed-to-load"});let n=new URL(e);n.pathname=E(n.pathname,r,"/jwks");let i=await W.fetch(n.href,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!i.ok){let e=await i.json(),t=tn(e?.errors,"clerk_key_invalid");if(t)throw new eG({action:"Contact support@clerk.com",message:t.message,reason:"secret-key-invalid"});throw new eG({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${n.href} with code=${i.status}`,reason:"jwk-remote-failed-to-load"})}return i.json()}async function tR(e,t){let r,{apiKey:i,secretKey:s,apiUrl:a,apiVersion:o,audience:l,authorizedParties:u,clockSkewInSeconds:c,clockSkewInMs:h,issuer:d,jwksCacheTtlInMs:f,jwtKey:p,skipJwksCache:y}=t;t.apiKey&&(0,n.io)("apiKey","Use `secretKey` instead.");let{header:g}=tS(e),{kid:m}=g;if(p)r=function(e){if(!tk[tB]){if(!e)throw new eG({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});tE({kid:"local",kty:"RSA",alg:"RS256",n:e.replace(/(\r\n|\n|\r)/gm,"").replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA","").replace("IDAQAB","").replace(/\+/g,"-").replace(/\//g,"_"),e:"AQAB"},!1)}return tk[tB]}(p);else if("string"==typeof d)r=await tC({issuer:d,kid:m,jwksCacheTtlInMs:f,skipJwksCache:y});else if(i||s)r=await tC({apiKey:i,secretKey:s,apiUrl:a,apiVersion:o,kid:m,jwksCacheTtlInMs:f,skipJwksCache:y});else throw new eG({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});return await tA(e,{audience:l,authorizedParties:u,clockSkewInSeconds:c,clockSkewInMs:h,key:r,issuer:d})}var tP=e=>!!e?.get("__clerk_satellite_url"),tO=e=>e?.get("__clerk_synced")==="true",tN=/^Mozilla\/|(Amazon CloudFront)/,tI=e=>tN.test(e||""),tK=e=>{let{apiKey:t,secretKey:r,userAgent:n}=e;if(c(r||t||"")&&!tI(n))return te(e,"header-missing-non-browser")},tU=e=>{let{origin:t,host:r,forwardedHost:n,forwardedProto:i}=e;if(t&&tr({originURL:new URL(t),host:r,forwardedHost:n,forwardedProto:i}))return te(e,"header-missing-cors")},tL=e=>{let{apiKey:t,secretKey:r,isSatellite:n,searchParams:i}=e;if(c(r||t||"")&&!n&&tP(i))return tt(e,"primary-responds-to-syncing")},tj=e=>{let{apiKey:t,secretKey:r,clientUat:n}=e;if(c(r||t||"")&&!n)return tt(e,"uat-missing")},tD=e=>{let{apiKey:t,secretKey:r,referrer:n,host:i,forwardedHost:s,forwardedProto:a}=e,o=n&&tr({originURL:new URL(n),host:i,forwardedHost:s,forwardedProto:a});if(c(r||t||"")&&o)return tt(e,"cross-origin-referrer")},tM=e=>{let{apiKey:t,secretKey:r,clientUat:n,cookieToken:i}=e;if(function(e){return e.startsWith("live_")||e.startsWith("sk_live_")}(r||t||"")&&!n&&!i)return te(e,"cookie-and-uat-missing")},t$=e=>{let{clientUat:t}=e;if("0"===t)return te(e,"standard-signed-out")},tq=e=>{let{clientUat:t,cookieToken:r}=e;if(t&&Number.parseInt(t)>0&&!r)return tt(e,"cookie-missing")},tH=async e=>{let{headerToken:t}=e,r=await tF(e,t);return await e7({...e,token:t},r)},tz=async e=>{let{cookieToken:t,clientUat:r}=e,n=await tF(e,t),i=await e7({...e,token:t},n),s=i.toAuth().sessionClaims.iat<Number.parseInt(r);return!r||s?tt(e,"cookie-outdated"):i};async function tV(e,t){for(let r of t){let t=await r(e);if(t)return t}return te(e,"unexpected-error")}async function tF(e,t){let r,{isSatellite:n,proxyUrl:i}=e;return r=n?null:i||(e=>e.startsWith("https://clerk.")||e.includes(".clerk.accounts")),tR(t,{...e,issuer:r})}var tW=e=>{let{clientUat:t,isSatellite:r,searchParams:n,userAgent:i}=e,s=!t||"0"===t;return r&&s&&!tI(i)?te(e,"satellite-needs-syncing"):r&&s&&!tO(n)?tt(e,"satellite-needs-syncing"):void 0};async function tJ(e){let{cookies:t,headers:r,searchParams:i}=e2(e?.request);if(e.frontendApi&&(0,n.io)("frontendApi","Use `publishableKey` instead."),e.apiKey&&(0,n.io)("apiKey","Use `secretKey` instead."),ed((e={...e,...tY(e,r),frontendApi:u(e.publishableKey)?.frontendApi||e.frontendApi,apiUrl:e.apiUrl||eo,apiVersion:e.apiVersion||"v1",cookieToken:e.cookieToken||t?.(eh.Cookies.Session),clientUat:e.clientUat||t?.(eh.Cookies.ClientUat),searchParams:e.searchParams||i||void 0}).secretKey||e.apiKey),e.isSatellite){var s=e.signInUrl,a=e.secretKey||e.apiKey;if(!s&&c(a))throw Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite");if(e.signInUrl&&e.origin&&function(e,t){let r;try{r=new URL(e)}catch{throw Error("The signInUrl needs to have a absolute url format.")}if(r.origin===t)throw Error("The signInUrl needs to be on a different origin than your satellite application.")}(e.signInUrl,e.origin),!(e.proxyUrl||e.domain))throw Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}async function o(){try{return await tV(e,[tH])}catch(e){return h(e,"header")}}async function l(){try{return await tV(e,[tU,tK,tW,tL,tM,tj,tD,tq,t$,tz])}catch(e){return h(e,"cookie")}}function h(t,r){if(t instanceof eG)return(t.tokenCarrier=r,["token-expired","token-not-active-yet"].includes(t.reason))?"header"===r?function(e,t,r=""){let{frontendApi:n,publishableKey:i,isSatellite:s,domain:a,signInUrl:o,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:c}=e;return{status:"unknown",reason:t,message:r,frontendApi:n,publishableKey:i,isSatellite:s,domain:a,signInUrl:o,signUpUrl:l,afterSignInUrl:u,afterSignUpUrl:c,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null,token:null}}(e,t.reason,t.getFullMessage()):tt(e,t.reason,t.getFullMessage()):te(e,t.reason,t.getFullMessage());return te(e,"unexpected-error",t.message)}return e.headerToken?o():l()}var tG=e=>{let{frontendApi:t,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:a,publishableKey:o,isSatellite:l,domain:u}=e;return{frontendApi:t,isSignedIn:r,proxyUrl:n,isInterstitial:i,reason:s,message:a,publishableKey:o,isSatellite:l,domain:u}},tY=(e,t)=>t?{headerToken:e5(e.headerToken||t(eh.Headers.Authorization)),origin:e.origin||t(eh.Headers.Origin),host:e.host||t(eh.Headers.Host),forwardedHost:e.forwardedHost||t(eh.Headers.ForwardedHost),forwardedPort:e.forwardedPort||t(eh.Headers.ForwardedPort),forwardedProto:e.forwardedProto||t(eh.Headers.CloudFrontForwardedProto)||t(eh.Headers.ForwardedProto),referrer:e.referrer||t(eh.Headers.Referrer),userAgent:e.userAgent||t(eh.Headers.UserAgent)}:{},tX=(e,t)=>{let r;if(e.startsWith("http"))r=new URL(e);else{if(!t||!t.startsWith("http"))throw Error("destination url or return back url should be an absolute path url!");let n=new URL(t);r=new URL(e,n.origin)}return t&&r.searchParams.set("redirect_url",t),r.toString()};function tQ({redirectAdapter:e,signUpUrl:t,signInUrl:r,frontendApi:i,publishableKey:s}){i?(0,n.io)("frontendApi","Use `publishableKey` instead."):i=u(s)?.frontendApi;let a=function(e){if(!e)return"";let t=e.replace(/(clerk\.accountsstage\.)/,"accountsstage.").replace(/(clerk\.accounts\.|clerk\.)/,"accounts.");return`https://${t}`}(i);return{redirectToSignUp:({returnBackUrl:r}={})=>{t||a||I.throwMissingPublishableKeyError();let n=`${a}/sign-up`;return e(tX(t||n,r))},redirectToSignIn:({returnBackUrl:t}={})=>{r||a||I.throwMissingPublishableKeyError();let n=`${a}/sign-in`;return e(tX(r||n,t))}}}function tZ(e){let t={...e},r=eM(t),i=function(e){let{apiClient:t}=e,{apiKey:r="",secretKey:i="",jwtKey:a="",apiUrl:o=eo,apiVersion:l="v1",frontendApi:c="",proxyUrl:h="",publishableKey:d="",isSatellite:f=!1,domain:p="",audience:y="",userAgent:g}=e.options;return{authenticateRequest:({apiKey:e,secretKey:t,audience:n,frontendApi:s,proxyUrl:u,publishableKey:g,jwtKey:m,isSatellite:b,domain:w,searchParams:v,...S})=>tJ({...S,apiKey:e||r,secretKey:t||i,audience:n||y,apiUrl:o,apiVersion:l,frontendApi:s||c,proxyUrl:u||h,publishableKey:g||d,isSatellite:b||f,domain:w||p,jwtKey:m||a,searchParams:v}),localInterstitial:({frontendApi:e,publishableKey:t,proxyUrl:r,isSatellite:i,domain:a,...o})=>(function(e){e.frontendApi&&(0,n.io)("frontendApi","Use `publishableKey` instead."),e.pkgVersion&&(0,n.io)("pkgVersion","Use `clerkJSVersion` instead."),e.frontendApi=u(e.publishableKey)?.frontendApi||e.frontendApi||"";let t=K(e.frontendApi)?"":function(e){let t;if(!e)return"";if(e.match(/^(clerk\.)+\w*$/))t=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;t=/^(clerk\.)*/gi}let r=e.replace(t,"");return`clerk.${r}`}(e.domain),{debugData:r,frontendApi:i,pkgVersion:a,clerkJSUrl:o,clerkJSVersion:l,publishableKey:c,proxyUrl:h,isSatellite:d=!1,domain:f,signInUrl:p}=e;return`
    <head>
        <meta charset="UTF-8" />
        <style>
          @media (prefers-color-scheme: dark) {
            body {
              background-color: black;
            }
          }
        </style>
    </head>
    <body>
        <script>
            window.__clerk_frontend_api = '${i}';
            window.__clerk_debug = ${JSON.stringify(r||{})};
            ${h?`window.__clerk_proxy_url = '${h}'`:""}
            ${f?`window.__clerk_domain = '${f}'`:""}
            window.startClerk = async () => {
                function formRedirect(){
                    const form = '<form method="get" action="" name="redirect"></form>';
                    document.body.innerHTML = document.body.innerHTML + form;

                    const searchParams = new URLSearchParams(window.location.search);
                    for (let paramTuple of searchParams) {
                        const input = document.createElement("input");
                        input.type = "hidden";
                        input.name = paramTuple[0];
                        input.value = paramTuple[1];
                        document.forms.redirect.appendChild(input);
                    }
                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);
                    window.history.pushState({}, '', url);

                    document.forms.redirect.action = window.location.pathname + window.location.hash;
                    document.forms.redirect.submit();
                }

                const Clerk = window.Clerk;
                try {
                    await Clerk.load({
                        isSatellite: ${d},
                        isInterstitial: true,
                        signInUrl: ${p?`'${p}'`:void 0}
                    });
                    if(Clerk.loaded){
                      if(window.location.href.indexOf("#") === -1){
                        window.location.href = window.location.href;
                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){
                          formRedirect();
                      } else {
                          window.location.reload();
                      }
                    }
                } catch (err) {
                    console.error('Clerk: ', err);
                }
            };
            (() => {
                const script = document.createElement('script');
                ${c?`script.setAttribute('data-clerk-publishable-key', '${c}');`:`script.setAttribute('data-clerk-frontend-api', '${i}');`}

                ${f?`script.setAttribute('data-clerk-domain', '${f}');`:""}
                ${h?`script.setAttribute('data-clerk-proxy-url', '${h}')`:""};
                script.async = true;
                script.src = '${o||s(h||t||i,{pkgVersion:a,clerkJSVersion:l})}';
                script.crossOrigin = 'anonymous';
                script.addEventListener('load', startClerk);
                document.body.appendChild(script);
            })();
        </script>
    </body>
`})({...o,frontendApi:e||c,proxyUrl:r||h,publishableKey:t||d,isSatellite:i||f,domain:a||p}),remotePublicInterstitial:({frontendApi:e,publishableKey:t,proxyUrl:r,isSatellite:n,domain:i,userAgent:s,...a})=>eY({...a,apiUrl:o,frontendApi:e||c,publishableKey:t||d,proxyUrl:r||h,isSatellite:n||f,domain:i||p,userAgent:s||g}),remotePrivateInterstitial:()=>t.interstitial.getInterstitial(),remotePublicInterstitialUrl:eX,debugRequestState:tG}}({options:t,apiClient:r}),a={...r,...i,__unstable_options:t};return(0,n.W1)(a,"__unstable_options","Use `createClerkClient({...})` to create a new clerk instance instead."),a}},13476:(e,t,r)=>{"use strict";r.d(t,{Cg:()=>i,Cl:()=>n});var n=function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function i(e,t,r,n){var i,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}Object.create;Object.create},18492:(e,t,r)=>{"use strict";r.d(t,{V:()=>o});let n={rE:"15.3.3"},i=e=>{if(!e||"string"!=typeof e)return e;try{return(e||"").replace(/^(sk_(live|test)_)(.+?)(.{3})$/,"$1*********$4")}catch(e){return""}},s=e=>(Array.isArray(e)?e:[e]).map(e=>"string"==typeof e?i(e):JSON.stringify(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,i(t)])),null,2)).join(", "),a=(e,t)=>()=>{let r=[],i=!1;return{enable:()=>{i=!0},debug:(...e)=>{i&&r.push(e.map(e=>"function"==typeof e?e():e))},commit:()=>{if(i){var s,a;for(let n of(console.log((s=e,`[clerk debug start: ${s}]`)),r)){let e=t(n);e=e.split("\n").map(e=>`  ${e}`).join("\n"),process.env.VERCEL&&(e=function(e,t){let r=new TextEncoder,n=new TextDecoder("utf-8"),i=r.encode(e).slice(0,4096);return n.decode(i).replace(/\uFFFD/g,"")}(e,4096)),console.log(e)}console.log((a=e,`[clerk debug end: ${a}] (@clerk/nextjs=4.31.8,next=${n.rE})`))}}}},o=(e,t)=>(...r)=>{let n=("string"==typeof e?a(e,s):e)(),i=t(n);try{let e=i(...r);if("object"==typeof e&&"then"in e&&"function"==typeof e.then)return e.then(e=>(n.commit(),e)).catch(e=>{throw n.commit(),e});return n.commit(),e}catch(e){throw n.commit(),e}}},22040:(e,t,r)=>{let n;try{(n=r(77598).webcrypto)||(n=new(r(44055)).Q)}catch(e){n=new(r(44055)).Q}e.exports=n},22077:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(92332),i=r(73024),s=r(76760);r(37067),r(44708),r(16141),r(57075),r(4573),r(57975),r(73136),r(77030);let{stat:a}=i.promises,o=(e,t,r="")=>new n._Blob([new u({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],{type:r}),l=(e,t,r="")=>new n.File([new u({path:t,size:e.size,lastModified:e.mtimeMs,start:0})],s.basename(t),{type:r,lastModified:e.mtimeMs});class u{#e;#t;constructor(e){this.#e=e.path,this.#t=e.start,this.size=e.size,this.lastModified=e.lastModified,this.originalSize=void 0===e.originalSize?e.size:e.originalSize}slice(e,t){return new u({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:t-e,start:this.#t+e})}async *stream(){let{mtimeMs:e,size:t}=await a(this.#e);if(e>this.lastModified||this.originalSize!==t)throw new n.nodeDomexception("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*i.createReadStream(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}let c=globalThis.fetch||n.fetch,h=globalThis.Blob||n._Blob,d=globalThis.File||n.File,f=globalThis.FormData||n.FormData,p=globalThis.Headers||n.Headers,y=globalThis.Request||n.Request,g=globalThis.Response||n.Response,m=globalThis.AbortController||n.AbortController;t.AbortError=n.AbortError,t.FetchError=n.FetchError,t.isRedirect=n.isRedirect,t.AbortController=m,t.Blob=h,t.File=d,t.FormData=f,t.Headers=p,t.Request=y,t.Response=g,t.blobFrom=(e,t)=>a(e).then(r=>o(r,e,t)),t.blobFromSync=(e,t)=>o(i.statSync(e),e,t),t.default=c,t.fetch=c,t.fileFrom=(e,t)=>a(e).then(r=>l(r,e,t)),t.fileFromSync=(e,t)=>l(i.statSync(e),e,t)},22580:(e,t,r)=>{"use strict";r.d(t,{Y_:()=>S,Bj:()=>v,NE:()=>h,_b:()=>d,Xk:()=>k,K_:()=>b,bD:()=>A,f9:()=>w,Wx:()=>c,li:()=>g});var n=r(10773);function i(e,t,r){return"function"==typeof e?e(t):void 0!==e?e:void 0!==r?r:void 0}function s(e){return/^http(s)?:\/\//.test(e||"")}r(51691),r(70386);var a=r(32190),o=r(73832),l=r(5020),u=r(49270);function c(e,t,r){Object.assign(e,{[t]:r})}function h(e,t){var r,i;let s=(r=e,((i=n.AA.Attributes[t])in r?r[i]:void 0)||d(e,n.AA.Headers[t]));return s||("AuthStatus"===t||"AuthToken"===t)&&function(e,t){let r;return f(e)?e.nextUrl.searchParams.get(t):("query"in e&&(r=e.query[t]),r||(r=new URLSearchParams((e.url||"").split("?")[1]).get(t)),r)}(e,t)||void 0}function d(e,t){var r,n;return f(e)?e.headers.get(t):e.headers[t]||e.headers[t.toLowerCase()]||(null==(n=null==(r=e.socket)?void 0:r._httpMessage)?void 0:n.getHeader(t))}function f(e){try{let{headers:t,nextUrl:r,cookies:n}=e||{};return"function"==typeof(null==t?void 0:t.get)&&"function"==typeof(null==r?void 0:r.searchParams.get)&&"function"==typeof(null==n?void 0:n.get)}catch(e){return!1}}let p="x-middleware-override-headers",y="x-middleware-request",g=(e,t,r)=>{e.headers.get(p)||(e.headers.set(p,[...t.headers.keys()]),t.headers.forEach((t,r)=>{e.headers.set(`${y}-${r}`,t)})),Object.entries(r).forEach(([t,r])=>{e.headers.set(p,`${e.headers.get(p)},${t}`),e.headers.set(`${y}-${t}`,r)})},m=()=>{try{let e="clerkTest",t=`${y}-${e}`;return a.NextResponse.next({request:{headers:new Headers({[e]:"true"})}}).headers.has(t)}catch(e){return!1}},b=(e,t)=>{let r={...t};return{...e,__clerk_ssr_state:r}};function w(e){return e.startsWith("test_")||e.startsWith("sk_test_")}function v(e,t,r){let i,{reason:s,message:l,status:u,token:c}=r;if(t||(t=a.NextResponse.next()),t.headers.get(o.A.Headers.NextRedirect))return t;"1"===t.headers.get(o.A.Headers.NextResume)&&(t.headers.delete(o.A.Headers.NextResume),i=new URL(e.url));let h=t.headers.get(o.A.Headers.NextRewrite);if(h){let r=new URL(e.url);if((i=new URL(h)).origin!==r.origin)return t}return i&&(m()?g(t,e,{[n.AA.Headers.AuthStatus]:u,[n.AA.Headers.AuthToken]:c||"",[n.AA.Headers.AuthMessage]:l||"",[n.AA.Headers.AuthReason]:s||""}):(t.headers.set(n.AA.Headers.AuthStatus,u),t.headers.set(n.AA.Headers.AuthToken,c||""),t.headers.set(n.AA.Headers.AuthMessage,l||""),t.headers.set(n.AA.Headers.AuthReason,s||""),i.searchParams.set(n.AA.SearchParams.AuthStatus,u),i.searchParams.set(n.AA.SearchParams.AuthToken,c||""),i.searchParams.set(n.AA.Headers.AuthMessage,l||""),i.searchParams.set(n.AA.Headers.AuthReason,s||"")),t.headers.set(o.A.Headers.NextRewrite,i.href)),t}let S=()=>a.NextResponse.json(null,{status:401,statusText:"Unauthorized"}),A=(e,t)=>{let r=new URL(e),n=new URL(t);return r.origin!==n.origin},k=(e,t)=>{let r,a=(0,n.v$)(e),o=i(null==t?void 0:t.proxyUrl,a,l.Rg);r=o&&!s(o)?new URL(o,a).toString():o;let c=i(t.isSatellite,new URL(e.url),l.fS),h=i(t.domain,new URL(e.url),l.V2),d=(null==t?void 0:t.signInUrl)||l.qW;if(c&&!r&&!h)throw Error(u.st);if(c&&!s(d)&&w(l.rB||l.Lq))throw Error(u.Sg);return{proxyUrl:r,isSatellite:c,domain:h,signInUrl:d}}},25538:(e,t)=>{"use strict";t.q=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},n=(t||{}).decode||i,s=0;s<e.length;){var a=e.indexOf("=",s);if(-1===a)break;var o=e.indexOf(";",s);if(-1===o)o=e.length;else if(o<a){s=e.lastIndexOf(";",a-1)+1;continue}var l=e.slice(s,a).trim();if(void 0===r[l]){var u=e.slice(a+1,o).trim();34===u.charCodeAt(0)&&(u=u.slice(1,-1)),r[l]=function(e,t){try{return t(e)}catch(t){return e}}(u,n)}s=o+1}return r};var r=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function s(e){return encodeURIComponent(e)}},39916:(e,t,r)=>{"use strict";r.r(t);var n=r(97576),i={};for(let e in n)"default"!==e&&(i[e]=()=>n[e]);r.d(t,i)},43793:e=>{"use strict";var t=function(e){var t,n,i;return!!(t=e)&&"object"==typeof t&&(n=e,"[object RegExp]"!==(i=Object.prototype.toString.call(n))&&"[object Date]"!==i&&n.$$typeof!==r)},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?o(Array.isArray(e)?[]:{},e,t):e}function i(e,t,r){return e.concat(t).map(function(e){return n(e,r)})}function s(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[])}function a(e,t){try{return t in e}catch(e){return!1}}function o(e,r,l){(l=l||{}).arrayMerge=l.arrayMerge||i,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=n;var u,c,h=Array.isArray(r);return h!==Array.isArray(e)?n(r,l):h?l.arrayMerge(e,r,l):(c={},(u=l).isMergeableObject(e)&&s(e).forEach(function(t){c[t]=n(e[t],u)}),s(r).forEach(function(t){a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))||(a(e,t)&&u.isMergeableObject(r[t])?c[t]=(function(e,t){if(!t.customMerge)return o;var r=t.customMerge(e);return"function"==typeof r?r:o})(t,u)(e[t],r[t],u):c[t]=n(r[t],u))}),c)}o.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,r){return o(e,r,t)},{})},e.exports=o},44055:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n1});var n,i,s,a,o,l={};r.r(l),r.d(l,{Any:()=>eq,BaseBlock:()=>q,BaseStringBlock:()=>H,BitString:()=>ei,BmpString:()=>ek,Boolean:()=>ee,CharacterString:()=>eI,Choice:()=>eH,Constructed:()=>G,DATE:()=>eL,DateTime:()=>eD,Duration:()=>eM,EndOfContent:()=>X,Enumerated:()=>el,GeneralString:()=>eN,GeneralizedTime:()=>eU,GraphicString:()=>eP,HexBlock:()=>U,IA5String:()=>eR,Integer:()=>eo,Null:()=>Q,NumericString:()=>eB,ObjectIdentifier:()=>eh,OctetString:()=>er,Primitive:()=>V,PrintableString:()=>eC,RawData:()=>eV,RelativeObjectIdentifier:()=>ep,Repeated:()=>ez,Sequence:()=>ey,Set:()=>eg,TIME:()=>e$,TeletexString:()=>eT,TimeOfDay:()=>ej,UTCTime:()=>eK,UniversalString:()=>eE,Utf8String:()=>eS,ValueBlock:()=>j,VideotexString:()=>ex,ViewWriter:()=>B,VisibleString:()=>eO,compareSchema:()=>eF,fromBER:()=>W,verifySchema:()=>eW});class u{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){let r=u.toUint8Array(e),n=u.toUint8Array(t);if(r.length!==n.byteLength)return!1;for(let e=0;e<r.length;e++)if(r[e]!==n[e])return!1;return!0}static concat(...e){let t;t=!Array.isArray(e[0])||e[1]instanceof Function?Array.isArray(e[0])&&e[1]instanceof Function?e[0]:e[e.length-1]instanceof Function?e.slice(0,e.length-1):e:e[0];let r=0;for(let e of t)r+=e.byteLength;let n=new Uint8Array(r),i=0;for(let e of t){let t=this.toUint8Array(e);n.set(t,i),i+=t.length}return e[e.length-1]instanceof Function?this.toView(n,e[e.length-1]):n.buffer}}let c="string",h=/^[0-9a-f\s]+$/i,d=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,f=/^[a-zA-Z0-9-_]+$/;class p{static fromString(e){let t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}static toString(e){let t=u.toUint8Array(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return decodeURIComponent(escape(r))}}class y{static toString(e,t=!1){let r=u.toArrayBuffer(e),n=new DataView(r),i="";for(let e=0;e<r.byteLength;e+=2)i+=String.fromCharCode(n.getUint16(e,t));return i}static fromString(e,t=!1){let r=new ArrayBuffer(2*e.length),n=new DataView(r);for(let r=0;r<e.length;r++)n.setUint16(2*r,e.charCodeAt(r),t);return r}}class g{static isHex(e){return typeof e===c&&h.test(e)}static isBase64(e){return typeof e===c&&d.test(e)}static isBase64Url(e){return typeof e===c&&f.test(e)}static ToString(e,t="utf8"){let r=u.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return y.toString(r,!0);case"utf16":case"utf16be":return y.toString(r);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return y.fromString(e,!0);case"utf16":case"utf16be":return y.fromString(e);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){let t=u.toUint8Array(e);return"undefined"!=typeof btoa?btoa(this.ToString(t,"binary")):Buffer.from(t).toString("base64")}static FromBase64(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!g.isBase64(t))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!g.isBase64Url(t))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=g.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return p.fromString(e);case"utf16":case"utf16be":return y.fromString(e);case"utf16le":case"usc2":return y.fromString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=g.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return p.toString(e);case"utf16":case"utf16be":return y.toString(e);case"utf16le":case"usc2":return y.toString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}static ToBinary(e){let t=u.toUint8Array(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return r}static ToHex(e){let t=u.toUint8Array(e),r="",n=t.length;for(let e=0;e<n;e++){let n=t[e];n<16&&(r+="0"),r+=n.toString(16)}return r}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!g.isHex(t))throw TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){let n=t.slice(e,e+2);r[e/2]=parseInt(n,16)}return r.buffer}static ToUtf16String(e,t=!1){return y.toString(e,t)}static FromUtf16String(e,t=!1){return y.fromString(e,t)}static Base64Padding(e){let t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}function m(...e){let t=new Uint8Array(e.map(e=>e.byteLength).reduce((e,t)=>e+t)),r=0;return e.map(e=>new Uint8Array(e)).forEach(e=>{for(let n of e)t[r++]=n}),t.buffer}function b(e,t){let r=0;if(1===e.length)return e[0];for(let n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function w(e,t,r=-1){let n=e,i=0,s=Math.pow(2,t);for(let a=1;a<8;a++){if(e<s){let e;if(r<0)e=new ArrayBuffer(a),i=a;else{if(r<a)return new ArrayBuffer(0);e=new ArrayBuffer(r),i=r}let s=new Uint8Array(e);for(let e=a-1;e>=0;e--){let r=Math.pow(2,e*t);s[i-e-1]=Math.floor(n/r),n-=s[i-e-1]*r}return e}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function v(...e){let t=0,r=0;for(let r of e)t+=r.length;let n=new Uint8Array(new ArrayBuffer(t));for(let t of e)n.set(t,r),r+=t.length;return n}function S(){let e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let t=255===e[0]&&128&e[1],r=0===e[0]&&(128&e[1])==0;(t||r)&&this.warnings.push("Needlessly long format")}let t=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let e=0;e<this.valueHex.byteLength;e++)t[e]=0;t[0]=128&e[0];let r=b(t,8),n=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let t=0;t<this.valueHex.byteLength;t++)n[t]=e[t];return n[0]&=127,b(n,8)-r}function A(e,t){let r=e.toString(10);if(t<r.length)return"";let n=t-r.length,i=Array(n);for(let e=0;e<n;e++)i[e]="0";return i.join("").concat(r)}g.DEFAULT_UTF8_ENCODING="utf8";function k(){if("undefined"==typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function _(e){let t=0,r=0;for(let r=0;r<e.length;r++)t+=e[r].byteLength;let n=new Uint8Array(t);for(let t=0;t<e.length;t++){let i=e[t];n.set(new Uint8Array(i),r),r+=i.byteLength}return n.buffer}function E(e,t,r,n){return t instanceof Uint8Array?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class B{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return _(this.items)}}let C=[new Uint8Array([1])],T="0123456789",x="name",R="valueHexView",P=new ArrayBuffer(0),O=new Uint8Array(0),N="EndOfContent",I="OCTET STRING",K="BIT STRING";function U(e){var t;return(t=class extends e{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}constructor(...e){var t;super(...e);let r=e[0]||{};this.isHexOnly=null!=(t=r.isHexOnly)&&t,this.valueHexView=r.valueHex?u.toUint8Array(r.valueHex):O}fromBER(e,t,r){let n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!E(this,n,t,r))return -1;let i=t+r;return(this.valueHexView=n.subarray(t,i),this.valueHexView.length)?(this.blockLength=r,i):(this.warnings.push("Zero buffer length"),t)}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",P)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:g.ToHex(this.valueHexView)}}}).NAME="hexBlock",t}class L{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:t="",warnings:r=[],valueBeforeDecode:n=O}={}){this.blockLength=e,this.error=t,this.warnings=r,this.valueBeforeDecodeView=u.toUint8Array(n)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:g.ToHex(this.valueBeforeDecodeView)}}}L.NAME="baseBlock";class j extends L{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}j.NAME="valueBlock";class D extends U(L){constructor({idBlock:e={}}={}){var t,r,n,i;super(),e?(this.isHexOnly=null!=(t=e.isHexOnly)&&t,this.valueHexView=e.valueHex?u.toUint8Array(e.valueHex):O,this.tagClass=null!=(r=e.tagClass)?r:-1,this.tagNumber=null!=(n=e.tagNumber)?n:-1,this.isConstructed=null!=(i=e.isConstructed)&&i):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",P}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){let r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,r[0]=t}return r.buffer}if(!this.isHexOnly){let r=w(this.tagNumber,7),n=new Uint8Array(r),i=r.byteLength,s=new Uint8Array(i+1);if(s[0]=31|t,!e){for(let e=0;e<i-1;e++)s[e+1]=128|n[e];s[i]=n[i-1]}return s.buffer}let r=new Uint8Array(this.valueHexView.byteLength+1);if(r[0]=31|t,!e){let e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=128|e[t];r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){let n=u.toUint8Array(e);if(!E(this,n,t,r))return -1;let i=n.subarray(t,t+r);if(0===i.length)return this.error="Zero buffer length",-1;switch(192&i[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&i[0])==32,this.isHexOnly=!1;let s=31&i[0];if(31!==s)this.tagNumber=s,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),r=255;for(;128&i[e];){if(t[e-1]=127&i[e],++e>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(e===r){let e=new Uint8Array(r+=255);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1,t[e-1]=127&i[e];let n=new Uint8Array(e);for(let r=0;r<e;r++)n[r]=t[r];(t=this.valueHexView=new Uint8Array(e)).set(n),this.blockLength<=9?this.tagNumber=b(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}D.NAME="identificationBlock";class M extends L{constructor({lenBlock:e={}}={}){var t,r,n;super(),this.isIndefiniteForm=null!=(t=e.isIndefiniteForm)&&t,this.longFormUsed=null!=(r=e.longFormUsed)&&r,this.length=null!=(n=e.length)?n:0}fromBER(e,t,r){let n=u.toUint8Array(e);if(!E(this,n,t,r))return -1;let i=n.subarray(t,t+r);if(0===i.length)return this.error="Zero buffer length",-1;if(255===i[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===i[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&i[0]),!1===this.longFormUsed)return this.length=i[0],this.blockLength=1,t+this.blockLength;let s=127&i[0];if(s>8)return this.error="Too big integer",-1;if(s+1>i.length)return this.error="End of input reached before message was fully decoded",-1;let a=t+1,o=n.subarray(a,a+s);return 0===o[s-1]&&this.warnings.push("Needlessly long encoded length"),this.length=b(o,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=s+1,t+this.blockLength}toBER(e=!1){let t,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=128),t;if(this.longFormUsed){let n=w(this.length,8);if(n.byteLength>127)return this.error="Too big length",P;if(t=new ArrayBuffer(n.byteLength+1),e)return t;let i=new Uint8Array(n);(r=new Uint8Array(t))[0]=128|n.byteLength;for(let e=0;e<n.byteLength;e++)r[e+1]=i[e];return t}return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}M.NAME="lengthBlock";let $={};class q extends L{constructor({name:e="",optional:t=!1,primitiveSchema:r,...n}={},i){super(n),this.name=e,this.optional=t,r&&(this.primitiveSchema=r),this.idBlock=new D(n),this.lenBlock=new M(n),this.valueBlock=i?new i(n):new j(n)}fromBER(e,t,r){let n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}toBER(e,t){let r=t||new B;t||function e(t){var r;if(t instanceof $.Constructed)for(let r of t.valueBlock.value)e(r)&&(t.lenBlock.isIndefiniteForm=!0);return!!(null==(r=t.lenBlock)?void 0:r.isIndefiniteForm)}(this);let n=this.idBlock.toBER(e);if(r.write(n),this.lenBlock.isIndefiniteForm)r.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,r),r.write(new ArrayBuffer(2));else{let t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;let n=this.lenBlock.toBER(e);r.write(n),r.write(t)}return t?P:r.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():g.ToHex(this.toBER())}onAsciiEncoding(){let e=this.constructor.NAME,t=g.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${t}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;let t=this.toBER(),r=e.toBER();if(t.byteLength!==r.byteLength)return!1;let n=new Uint8Array(t),i=new Uint8Array(r);for(let e=0;e<n.length;e++)if(n[e]!==i[e])return!1;return!0}}q.NAME="BaseBlock";class H extends q{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e="",...t}={},r){super(t,r),e&&this.fromString(e)}fromBER(e,t,r){let n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}H.NAME="BaseStringBlock";class z extends U(j){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}z.NAME="PrimitiveValueBlock";class V extends q{constructor(e={}){super(e,z),this.idBlock.isConstructed=!1}}function F(e,t=0,r=e.length){let n=t,i=new q({},j),s=new L;if(!E(s,e,t,r))return i.error=s.error,{offset:-1,result:i};if(!e.subarray(t,t+r).length)return i.error="Zero buffer length",{offset:-1,result:i};let a=i.idBlock.fromBER(e,t,r);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),-1===a)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=a,r-=i.idBlock.blockLength,a=i.lenBlock.fromBER(e,t,r),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),-1===a)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=a,r-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let o=q;if(1===i.idBlock.tagClass){if(i.idBlock.tagNumber>=37&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&i.lenBlock.length>0)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};o=$.EndOfContent;break;case 1:o=$.Boolean;break;case 2:o=$.Integer;break;case 3:o=$.BitString;break;case 4:o=$.OctetString;break;case 5:o=$.Null;break;case 6:o=$.ObjectIdentifier;break;case 10:o=$.Enumerated;break;case 12:o=$.Utf8String;break;case 13:o=$.RelativeObjectIdentifier;break;case 14:o=$.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:o=$.Sequence;break;case 17:o=$.Set;break;case 18:o=$.NumericString;break;case 19:o=$.PrintableString;break;case 20:o=$.TeletexString;break;case 21:o=$.VideotexString;break;case 22:o=$.IA5String;break;case 23:o=$.UTCTime;break;case 24:o=$.GeneralizedTime;break;case 25:o=$.GraphicString;break;case 26:o=$.VisibleString;break;case 27:o=$.GeneralString;break;case 28:o=$.UniversalString;break;case 29:o=$.CharacterString;break;case 30:o=$.BmpString;break;case 31:o=$.DATE;break;case 32:o=$.TimeOfDay;break;case 33:o=$.DateTime;break;case 34:o=$.Duration;break;default:{let e=i.idBlock.isConstructed?new $.Constructed:new $.Primitive;e.idBlock=i.idBlock,e.lenBlock=i.lenBlock,e.warnings=i.warnings,i=e}}}else o=i.idBlock.isConstructed?$.Constructed:$.Primitive;return a=(i=function(e,t){if(e instanceof t)return e;let r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecodeView=e.valueBeforeDecodeView,r}(i,o)).fromBER(e,t,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecodeView=e.subarray(n,n+i.blockLength),{offset:a,result:i}}function W(e){if(!e.byteLength){let e=new q({},j);return e.error="Input buffer has zero length",{offset:-1,result:e}}return F(u.toUint8Array(e).slice(),0,e.byteLength)}$.Primitive=V,V.NAME="PRIMITIVE";class J extends j{constructor({value:e=[],isIndefiniteForm:t=!1,...r}={}){super(r),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,r){var n,i;let s=u.toUint8Array(e);if(!E(this,s,t,r))return -1;if(this.valueBeforeDecodeView=s.subarray(t,t+r),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let a=t;for(;n=this.isIndefiniteForm,i=r,(n?1:i)>0;){let e=F(s,a,r);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(a=e.offset,this.blockLength+=e.result.blockLength,r-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===N)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===N?this.value.pop():this.warnings.push("No EndOfContent block encoded")),a}toBER(e,t){let r=t||new B;for(let t=0;t<this.value.length;t++)this.value[t].toBER(e,r);return t?P:r.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let t of this.value)e.value.push(t.toJSON());return e}}J.NAME="ConstructedValueBlock";class G extends q{constructor(e={}){super(e,J),this.idBlock.isConstructed=!0}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===n?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),n}onAsciiEncoding(){let e=[];for(let t of this.valueBlock.value)e.push(t.toString("ascii").split("\n").map(e=>`  ${e}`).join("\n"));let t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join("\n")}`:`${t} :`}}$.Constructed=G,G.NAME="CONSTRUCTED";class Y extends j{fromBER(e,t,r){return t}toBER(e){return P}}Y.override="EndOfContentValueBlock";class X extends q{constructor(e={}){super(e,Y),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}$.EndOfContent=X,X.NAME=N;class Q extends q{constructor(e={}){super(e,j),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,r){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e,t){let r=new ArrayBuffer(2);if(!e){let e=new Uint8Array(r);e[0]=5,e[1]=0}return t&&t.write(r),r}onAsciiEncoding(){return`${this.constructor.NAME}`}}$.Null=Q,Q.NAME="NULL";class Z extends U(j){get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=255*!!e}constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=u.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,t,r){let n=u.toUint8Array(e);return E(this,n,t,r)?(this.valueHexView=n.subarray(t,t+r),r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,S.call(this),this.blockLength=r,t+r):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}Z.NAME="BooleanValueBlock";class ee extends q{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,Z),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}$.Boolean=ee,ee.NAME="BOOLEAN";class et extends U(J){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,r){let n=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(n=J.prototype.fromBER.call(this,e,t,r)))return n;for(let e=0;e<this.value.length;e++){let t=this.value[e].constructor.NAME;if(t===N)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;else break;if(t!==I)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(e,t,r),this.blockLength=r;return n}toBER(e,t){return this.isConstructed?J.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}et.NAME="OctetStringValueBlock";class er extends q{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;null!=r.isConstructed||(r.isConstructed=!!(null==(i=r.value)?void 0:i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},et),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){let n=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+r);try{if(n.byteLength){let e=F(n,0,n.byteLength);-1!==e.offset&&e.offset===r&&(this.valueBlock.value=[e.result])}}catch{}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return G.prototype.onAsciiEncoding.call(this);let e=this.constructor.NAME,t=g.ToHex(this.valueBlock.valueHexView);return`${e} : ${t}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let t of this.valueBlock.value)t instanceof n&&e.push(t.valueBlock.valueHexView);return u.concat(e)}}$.OctetString=n=er,er.NAME=I;class en extends U(J){constructor({unusedBits:e=0,isConstructed:t=!1,...r}={}){super(r),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r)return t;let n=-1;if(this.isConstructed){if(-1===(n=J.prototype.fromBER.call(this,e,t,r)))return n;for(let e of this.value){let t=e.constructor.NAME;if(t===N)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;else break;if(t!==K)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=r.unusedBits}return n}let i=u.toUint8Array(e);if(!E(this,i,t,r))return -1;let s=i.subarray(t,t+r);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let e=s.subarray(1);try{if(e.byteLength){let t=F(e,0,e.byteLength);-1!==t.offset&&t.offset===r-1&&(this.value=[t.result])}}catch{}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,t+r}toBER(e,t){if(this.isConstructed)return J.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return P;let r=new Uint8Array(this.valueHexView.length+1);return r[0]=this.unusedBits,r.set(this.valueHexView,1),r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}en.NAME="BitStringValueBlock";class ei extends q{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,i;null!=r.isConstructed||(r.isConstructed=!!(null==(i=r.value)?void 0:i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},en),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return G.prototype.onAsciiEncoding.call(this);{let e=[];for(let t of this.valueBlock.valueHexView)e.push(t.toString(2).padStart(8,"0"));let t=e.join(""),r=this.constructor.NAME,n=t.substring(0,t.length-this.valueBlock.unusedBits);return`${r} : ${n}`}}}function es(e){if(e>=C.length)for(let t=C.length;t<=e;t++){let e=new Uint8Array([0]),r=C[t-1].slice(0);for(let t=r.length-1;t>=0;t--){let n=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=n[0]/10,r[t]=n[0]%10}e[0]>0&&(r=v(e,r)),C.push(r)}return C[e]}$.BitString=ei,ei.NAME=K;class ea extends U(j){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=S.call(this)))}constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function(e){let t=e<0?-1*e:e,r=128;for(let n=1;n<8;n++){if(t<=r){if(e<0){let e=w(r-t,8,n),i=new Uint8Array(e);return i[0]|=128,e}let i=w(t,8,n),s=new Uint8Array(i);if(128&s[0]){let e=i.slice(0),t=new Uint8Array(e);s=new Uint8Array(i=new ArrayBuffer(i.byteLength+1));for(let r=0;r<e.byteLength;r++)s[r+1]=t[r];s[0]=0}return i}r*=256}return new ArrayBuffer(0)}(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){let i=this.fromBER(e,t,r);if(-1===i)return i;let s=this.valueHexView;return 0===s[0]&&(128&s[1])!=0?this.valueHexView=s.subarray(1):0!==n&&s.length<n&&(n-s.length>1&&(n=s.length+1),this.valueHexView=s.subarray(n-s.length)),i}toDER(e=!1){let t=this.valueHexView;switch(!0){case(128&t[0])!=0:{let e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&(128&t[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,r){let n=super.fromBER(e,t,r);return -1===n||this.setValueHex(),n}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e,t=8*this.valueHexView.length-1,r=new Uint8Array(8*this.valueHexView.length/3),n=0,i=this.valueHexView,s="",a=!1;for(let a=i.byteLength-1;a>=0;a--){e=i[a];for(let i=0;i<8;i++)(1&e)==1&&(n===t?(r=function(e,t){let r,n=0,i=new Uint8Array(e),s=new Uint8Array(t),a=i.slice(0),o=a.length-1,l=s.slice(0),u=l.length-1,c=0;for(let e=u;e>=0;e--,c++)!0==(r=a[o-c]-l[u-c]-n)<0?(n=1,a[o-c]=r+10):(n=0,a[o-c]=r);if(n>0)for(let e=o-u+1;e>=0;e--,c++)if((r=a[o-c]-n)<0)n=1,a[o-c]=r+10;else{n=0,a[o-c]=r;break}return a.slice()}(es(n),r),s="-"):r=function(e,t){let r=new Uint8Array([0]),n=new Uint8Array(e),i=new Uint8Array(t),s=n.slice(0),a=s.length-1,o=i.slice(0),l=o.length-1,u=0,c=l<a?a:l,h=0;for(let e=c;e>=0;e--,h++)u=!0==h<o.length?s[a-h]+o[l-h]+r[0]:s[a-h]+r[0],r[0]=u/10,!0==h>=s.length?s=v(new Uint8Array([u%10]),s):s[a-h]=u%10;return r[0]>0&&(s=v(r,s)),s}(r,es(n))),n++,e>>=1}for(let e=0;e<r.length;e++)r[e]&&(a=!0),a&&(s+=T.charAt(r[e]));return!1===a&&(s+=T.charAt(0)),s}}ea.NAME="IntegerValueBlock",Object.defineProperty(ea.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class eo extends q{constructor(e={}){super(e,ea),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return k(),BigInt(this.valueBlock.toString())}static fromBigInt(e){k();let t=BigInt(e),r=new B,n=t.toString(16).replace(/^-/,""),s=new Uint8Array(g.FromHex(n));if(t<0){let e=new Uint8Array(s.length+(128&s[0]?1:0));e[0]|=128;let n=BigInt(`0x${g.ToHex(e)}`)+t,i=u.toUint8Array(g.FromHex(n.toString(16)));i[0]|=128,r.write(i)}else 128&s[0]&&r.write(new Uint8Array([0])),r.write(s);return new i({valueHex:r.final()})}convertToDER(){let e=new i({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new i({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}$.Integer=i=eo,eo.NAME="INTEGER";class el extends eo{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}$.Enumerated=el,el.NAME="ENUMERATED";class eu extends U(j){constructor({valueDec:e=-1,isFirstSid:t=!1,...r}={}){super(r),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,r){if(!r)return t;let n=u.toUint8Array(e);if(!E(this,n,t,r))return -1;let i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&i[e],this.blockLength++,(128&i[e])!=0);e++);let s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)s[e]=this.valueHexView[e];return(this.valueHexView=s,(128&i[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=b(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){k();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;let r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++)r[e]=parseInt(t.slice(7*e,7*e+7),2)+128*(e+1<r.length);this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=w(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",P;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=128|e[t];r[n]=e[n]}return r}toString(){let e="";if(this.isHexOnly)e=g.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}eu.NAME="sidBlock";class ec extends j{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let n=t;for(;r>0;){let t=new eu;if(-1===(n=t.fromBER(e,n,r))){this.blockLength=0,this.error=t.error;break}0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e){let t=[];for(let r=0;r<this.value.length;r++){let n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,P;t.push(n)}return _(t)}fromString(e){this.value=[];let t=0,r=0,n="",i=!1;do if(n=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1,i){let e=this.value[0],t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}let r=parseInt(n,10);if(isNaN(r))return;e.valueDec=r+t,i=!1}else{let e=new eu;if(n>Number.MAX_SAFE_INTEGER)k(),e.valueBigInt=BigInt(n);else if(e.valueDec=parseInt(n,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,i=!0),this.value.push(e)}while(-1!==r)}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e=`${e}.`),t?(n=`{${n}}`,this.value[r].isFirstSid?e=`2.{${n} - 80}`:e+=n):e+=n}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}ec.NAME="ObjectIdentifierValueBlock";class eh extends q{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,ec),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}$.ObjectIdentifier=eh,eh.NAME="OBJECT IDENTIFIER";class ed extends U(L){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,r){if(0===r)return t;let n=u.toUint8Array(e);if(!E(this,n,t,r))return -1;let i=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&i[e],this.blockLength++,(128&i[e])!=0);e++);let s=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)s[e]=this.valueHexView[e];return(this.valueHexView=s,(128&i[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=b(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=w(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",P;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=128|e[t];r[n]=e[n]}return r.buffer}toString(){let e="";return this.isHexOnly?g.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}ed.NAME="relativeSidBlock";class ef extends j{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let n=t;for(;r>0;){let t=new ed;if(-1===(n=t.fromBER(e,n,r))){this.blockLength=0,this.error=t.error;break}this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e,t){let r=[];for(let t=0;t<this.value.length;t++){let n=this.value[t].toBER(e);if(0===n.byteLength)return this.error=this.value[t].error,P;r.push(n)}return _(r)}fromString(e){this.value=[];let t=0,r=0,n="";do{n=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1;let i=new ed;if(i.valueDec=parseInt(n,10),isNaN(i.valueDec))break;this.value.push(i)}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e=`${e}.`),t?e+=n=`{${n}}`:e+=n}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}ef.NAME="RelativeObjectIdentifierValueBlock";class ep extends q{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,ef),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}$.RelativeObjectIdentifier=ep,ep.NAME="RelativeObjectIdentifier";class ey extends G{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}$.Sequence=ey,ey.NAME="SEQUENCE";class eg extends G{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}$.Set=eg,eg.NAME="SET";class em extends U(j){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}}em.NAME="StringValueBlock";class eb extends em{}eb.NAME="SimpleStringValueBlock";class ew extends H{constructor({...e}={}){super(e,eb)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,u.toUint8Array(e))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}ew.NAME="SIMPLE STRING";class ev extends ew{fromBuffer(e){this.valueBlock.valueHexView=u.toUint8Array(e);try{this.valueBlock.value=g.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=g.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(g.FromUtf8String(e)),this.valueBlock.value=e}}ev.NAME="Utf8StringValueBlock";class eS extends ev{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}$.Utf8String=eS,eS.NAME="UTF8String";class eA extends ew{fromBuffer(e){this.valueBlock.value=g.ToUtf16String(e),this.valueBlock.valueHexView=u.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(g.FromUtf16String(e))}}eA.NAME="BmpStringValueBlock";class ek extends eA{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}$.BmpString=ek,ek.NAME="BMPString";class e_ extends ew{fromBuffer(e){let t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),r=new Uint8Array(t);for(let e=0;e<r.length;e+=4)r[e]=r[e+3],r[e+1]=r[e+2],r[e+2]=0,r[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let n=0;n<t;n++){let t=new Uint8Array(w(e.charCodeAt(n),8));if(t.length>4)continue;let i=4-t.length;for(let e=t.length-1;e>=0;e--)r[4*n+e+i]=t[e]}this.valueBlock.value=e}}e_.NAME="UniversalStringValueBlock";class eE extends e_{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}$.UniversalString=eE,eE.NAME="UniversalString";class eB extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}$.NumericString=eB,eB.NAME="NumericString";class eC extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}$.PrintableString=eC,eC.NAME="PrintableString";class eT extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}$.TeletexString=eT,eT.NAME="TeletexString";class ex extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}$.VideotexString=ex,ex.NAME="VideotexString";class eR extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}$.IA5String=eR,eR.NAME="IA5String";class eP extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}$.GraphicString=eP,eP.NAME="GraphicString";class eO extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}$.VisibleString=eO,eO.NAME="VisibleString";class eN extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}$.GeneralString=eN,eN.NAME="GeneralString";class eI extends ew{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}$.CharacterString=eI,eI.NAME="CharacterString";class eK extends eO{constructor({value:e,valueDate:t,...r}={}){if(super(r),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,u.toUint8Array(e)))}toBuffer(){let e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(null===t){this.error="Wrong input string for conversion";return}let r=parseInt(t[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(e="iso"){if("iso"===e){let e=Array(7);return e[0]=A(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=A(this.month,2),e[2]=A(this.day,2),e[3]=A(this.hour,2),e[4]=A(this.minute,2),e[5]=A(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}$.UTCTime=eK,eK.NAME="UTCTime";class eU extends eK{constructor(e={}){var t;super(e),null!=this.millisecond||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,r=!1,n="",i="",s=0,a=0,o=0;if("Z"===e[e.length-1])n=e.substring(0,e.length-1),r=!0;else{if(isNaN(new Number(e[e.length-1]).valueOf()))throw Error("Wrong input string for conversion");n=e}if(r){if(-1!==n.indexOf("+")||-1!==n.indexOf("-"))throw Error("Wrong input string for conversion")}else{let e=1,t=n.indexOf("+"),r="";if(-1===t&&(t=n.indexOf("-"),e=-1),-1!==t){if(r=n.substring(t+1),n=n.substring(0,t),2!==r.length&&4!==r.length)throw Error("Wrong input string for conversion");let i=parseInt(r.substring(0,2),10);if(isNaN(i.valueOf()))throw Error("Wrong input string for conversion");if(a=e*i,4===r.length){if(isNaN((i=parseInt(r.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");o=e*i}}}let l=n.indexOf(".");if(-1===l&&(l=n.indexOf(",")),-1!==l){let e=new Number(`0${n.substring(l)}`);if(isNaN(e.valueOf()))throw Error("Wrong input string for conversion");s=e.valueOf(),i=n.substring(0,l)}else i=n;switch(!0){case 8===i.length:if(t=/(\d{4})(\d{2})(\d{2})/ig,-1!==l)throw Error("Wrong input string for conversion");break;case 10===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=60*s;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=60*s;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==l){let e=1e3*s;this.millisecond=Math.floor(e)}break;default:throw Error("Wrong input string for conversion")}let u=t.exec(i);if(null===u)throw Error("Wrong input string for conversion");for(let e=1;e<u.length;e++)switch(e){case 1:this.year=parseInt(u[e],10);break;case 2:this.month=parseInt(u[e],10);break;case 3:this.day=parseInt(u[e],10);break;case 4:this.hour=parseInt(u[e],10)+a;break;case 5:this.minute=parseInt(u[e],10)+o;break;case 6:this.second=parseInt(u[e],10);break;default:throw Error("Wrong input string for conversion")}if(!1===r){let e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if("iso"===e){let e=[];return e.push(A(this.year,4)),e.push(A(this.month,2)),e.push(A(this.day,2)),e.push(A(this.hour,2)),e.push(A(this.minute,2)),e.push(A(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(A(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}$.GeneralizedTime=eU,eU.NAME="GeneralizedTime";class eL extends eS{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}$.DATE=eL,eL.NAME="DATE";class ej extends eS{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}$.TimeOfDay=ej,ej.NAME="TimeOfDay";class eD extends eS{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}$.DateTime=eD,eD.NAME="DateTime";class eM extends eS{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}$.Duration=eM,eM.NAME="Duration";class e$ extends eS{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}$.TIME=e$,e$.NAME="TIME";class eq{constructor({name:e="",optional:t=!1}={}){this.name=e,this.optional=t}}class eH extends eq{constructor({value:e=[],...t}={}){super(t),this.value=e}}class ez extends eq{constructor({value:e=new eq,local:t=!1,...r}={}){super(r),this.value=e,this.local=t}}class eV{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=u.toUint8Array(e)}constructor({data:e=O}={}){this.dataView=u.toUint8Array(e)}fromBER(e,t,r){let n=t+r;return this.dataView=u.toUint8Array(e).subarray(t,n),n}toBER(e){return this.dataView.slice().buffer}}function eF(e,t,r){if(r instanceof eH){for(let n of r.value)if(eF(e,t,n).verified)return{verified:!0,result:e};{let e={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(x)&&(e.name=r.name),e}}if(r instanceof eq)return r.hasOwnProperty(x)&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1||"idBlock"in r==!1||"fromBER"in r.idBlock==!1||"toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let n=r.idBlock.toBER(!1);if(0===n.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(n,0,n.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!("isHexOnly"in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly){if(R in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let n=r.idBlock.valueHexView,i=t.idBlock.valueHexView;if(n.length!==i.length)return{verified:!1,result:e};for(let t=0;t<n.length;t++)if(n[t]!==i[1])return{verified:!1,result:e}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(e[r.name]=t)),r instanceof $.Constructed){let n=0,i={verified:!1,result:{error:"Unknown error"}},s=r.valueBlock.value.length;if(s>0&&r.valueBlock.value[0]instanceof ez&&(s=t.valueBlock.value.length),0===s)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){let t=!0;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let a=0;a<s;a++)if(a-n>=t.valueBlock.value.length){if(!1===r.valueBlock.value[a].optional){let t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}}else if(r.valueBlock.value[0]instanceof ez){if(!1===(i=eF(e,t.valueBlock.value[a],r.valueBlock.value[0].value)).verified)if(!r.valueBlock.value[0].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),i;else n++;if(x in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let n={};void 0===(n="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(n[r.valueBlock.value[0].name]=[]),n[r.valueBlock.value[0].name].push(t.valueBlock.value[a])}}else if(!1===(i=eF(e,t.valueBlock.value[a-n],r.valueBlock.value[a])).verified)if(!r.valueBlock.value[a].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),i;else n++;if(!1===i.verified){let t={verified:!1,result:e};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}return{verified:!0,result:e}}if(r.primitiveSchema&&R in t.valueBlock){let n=F(t.valueBlock.valueHexView);if(-1===n.offset){let t={verified:!1,result:n.result};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}return eF(e,n.result,r.primitiveSchema)}return{verified:!0,result:e}}function eW(e,t){if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let r=F(u.toUint8Array(e));return -1===r.offset?{verified:!1,result:r.result}:eF(r.result,r.result,t)}!function(e){e[e.Sequence=0]="Sequence",e[e.Set=1]="Set",e[e.Choice=2]="Choice"}(s||(s={})),function(e){e[e.Any=1]="Any",e[e.Boolean=2]="Boolean",e[e.OctetString=3]="OctetString",e[e.BitString=4]="BitString",e[e.Integer=5]="Integer",e[e.Enumerated=6]="Enumerated",e[e.ObjectIdentifier=7]="ObjectIdentifier",e[e.Utf8String=8]="Utf8String",e[e.BmpString=9]="BmpString",e[e.UniversalString=10]="UniversalString",e[e.NumericString=11]="NumericString",e[e.PrintableString=12]="PrintableString",e[e.TeletexString=13]="TeletexString",e[e.VideotexString=14]="VideotexString",e[e.IA5String=15]="IA5String",e[e.GraphicString=16]="GraphicString",e[e.VisibleString=17]="VisibleString",e[e.GeneralString=18]="GeneralString",e[e.CharacterString=19]="CharacterString",e[e.UTCTime=20]="UTCTime",e[e.GeneralizedTime=21]="GeneralizedTime",e[e.DATE=22]="DATE",e[e.TimeOfDay=23]="TimeOfDay",e[e.DateTime=24]="DateTime",e[e.Duration=25]="Duration",e[e.TIME=26]="TIME",e[e.Null=27]="Null"}(a||(a={}));let eJ={fromASN:e=>e instanceof Q?null:e.valueBeforeDecodeView,toASN:e=>{if(null===e)return new Q;let t=W(e);if(t.result.error)throw Error(t.result.error);return t.result}},eG={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new eo({value:+e})},eY={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new el({value:e})},eX={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new ei({valueHex:e})},eQ={fromASN:e=>e.valueBlock.toString(),toASN:e=>new eh({value:e})},eZ={fromASN:e=>e.valueBlock.value,toASN:e=>new ee({value:e})},e0={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new er({valueHex:e})};function e1(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}let e2=e1(eS),e8=e1(ek),e3=e1(eE),e4=e1(eB),e6=e1(eC),e5=e1(eT),e9=e1(ex),e7=e1(eR),te=e1(eP),tt=e1(eO),tr=e1(eN),tn=e1(eI),ti={fromASN:e=>e.toDate(),toASN:e=>new eK({valueDate:e})},ts={fromASN:e=>e.toDate(),toASN:e=>new eU({valueDate:e})},ta={fromASN:()=>null,toASN:()=>new Q};function to(e){switch(e){case a.Any:return eJ;case a.BitString:return eX;case a.BmpString:return e8;case a.Boolean:return eZ;case a.CharacterString:return tn;case a.Enumerated:return eY;case a.GeneralString:return tr;case a.GeneralizedTime:return ts;case a.GraphicString:return te;case a.IA5String:return e7;case a.Integer:return eG;case a.Null:return ta;case a.NumericString:return e4;case a.ObjectIdentifier:return eQ;case a.OctetString:return e0;case a.PrintableString:return e6;case a.TeletexString:return e5;case a.UTCTime:return ti;case a.UniversalString:return e3;case a.Utf8String:return e2;case a.VideotexString:return e9;case a.VisibleString:return tt;default:return null}}function tl(e){return"function"==typeof e&&e.prototype?!!e.prototype.toASN&&!!e.prototype.fromASN||tl(e.prototype):!!(e&&"object"==typeof e&&"toASN"in e&&"fromASN"in e)}class tu{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=!1){let r=this.items.get(e);if(!r)throw Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(t&&!r.schema)throw Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return r}cache(e){let t=this.get(e);t.schema||(t.schema=this.create(e,!0))}createDefault(e){let t={type:s.Sequence,items:{}},r=this.findParentSchema(e);return r&&(Object.assign(t,r),t.items=Object.assign({},t.items,r.items)),t}create(e,t){let r=this.items.get(e)||this.createDefault(e),n=[];for(let e in r.items){let i,o=r.items[e],u=t?e:"";if("number"==typeof o.type){let e=a[o.type],t=l[e];if(!t)throw Error(`Cannot get ASN1 class by name '${e}'`);i=new t({name:u})}else tl(o.type)?i=new o.type().toSchema(u):o.optional?this.get(o.type).type===s.Choice?i=new eq({name:u}):(i=this.create(o.type,!1)).name=u:i=new eq({name:u});let c=!!o.optional||void 0!==o.defaultValue;if(o.repeated&&(i.name="",i=new("set"===o.repeated?eg:ey)({name:"",value:[new ez({name:u,value:i})]})),null!==o.context&&void 0!==o.context)if(o.implicit)if("number"==typeof o.type||tl(o.type)){let e=o.repeated?G:V;n.push(new e({name:u,optional:c,idBlock:{tagClass:3,tagNumber:o.context}}))}else{this.cache(o.type);let e=!!o.repeated,t=e?i:this.get(o.type,!0).schema;t="valueBlock"in t?t.valueBlock.value:t.value,n.push(new G({name:e?"":u,optional:c,idBlock:{tagClass:3,tagNumber:o.context},value:t}))}else n.push(new G({optional:c,idBlock:{tagClass:3,tagNumber:o.context},value:[i]}));else i.optional=c,n.push(i)}switch(r.type){case s.Sequence:return new ey({value:n,name:""});case s.Set:return new eg({value:n,name:""});case s.Choice:return new eH({value:n,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=Object.getPrototypeOf(e);return t?this.items.get(t)||this.findParentSchema(t):null}}let tc=new tu,th=e=>t=>{let r;tc.has(t)?r=tc.get(t):(r=tc.createDefault(t),tc.set(t,r)),Object.assign(r,e)},td=e=>(t,r)=>{let n;tc.has(t.constructor)?n=tc.get(t.constructor):(n=tc.createDefault(t.constructor),tc.set(t.constructor,n));let i=Object.assign({},e);if("number"==typeof i.type&&!i.converter){let n=to(e.type);if(!n)throw Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`);i.converter=n}n.items[r]=i};class tf extends Error{constructor(){super(...arguments),this.schemas=[]}}class tp{static parse(e,t){let r=W(e);if(r.result.error)throw Error(r.result.error);return this.fromASN(r.result,t)}static fromASN(e,t){var r;try{if(tl(t))return new t().fromASN(e);let n=tc.get(t);tc.cache(t);let i=n.schema;if(e.constructor===G&&n.type!==s.Choice)for(let t in i=new G({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value}),n.items)delete e[t];let o=eF({},e,i);if(!o.verified)throw new tf(`Data does not match to ${t.name} ASN1 schema. ${o.result.error}`);let u=new t;if(function e(t){var r;if(t){let n=Object.getPrototypeOf(t);return(null==(r=null==n?void 0:n.prototype)?void 0:r.constructor)===Array||e(n)}return!1}(t)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let r=n.itemType;if("number"!=typeof r)return t.from(e.valueBlock.value,e=>this.fromASN(e,r));{let n=to(r);if(!n)throw Error(`Cannot get default converter for array item of ${t.name} ASN1 schema`);return t.from(e.valueBlock.value,e=>n.fromASN(e))}}for(let e in n.items){let t=o.result[e];if(!t)continue;let i=n.items[e],s=i.type;if("number"==typeof s||tl(s)){let n=null!=(r=i.converter)?r:tl(s)?new s:null;if(!n)throw Error("Converter is empty");if(i.repeated)if(i.implicit){let r=new("sequence"===i.repeated?ey:eg);r.valueBlock=t.valueBlock;let s=W(r.toBER(!1));if(-1===s.offset)throw Error(`Cannot parse the child item. ${s.result.error}`);if(!("value"in s.result.valueBlock&&Array.isArray(s.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let a=s.result.valueBlock.value;u[e]=Array.from(a,e=>n.fromASN(e))}else u[e]=Array.from(t,e=>n.fromASN(e));else{let r=t;if(i.implicit){let e;if(tl(s))e=new s().toSchema("");else{let t=a[s],r=l[t];if(!r)throw Error(`Cannot get '${t}' class from asn1js module`);e=new r}e.valueBlock=r.valueBlock,r=W(e.toBER(!1)).result}u[e]=n.fromASN(r)}}else if(i.repeated){if(!Array.isArray(t))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");u[e]=Array.from(t,e=>this.fromASN(e,s))}else u[e]=this.fromASN(t,s)}return u}catch(e){throw e instanceof tf&&e.schemas.push(t.name),e}}}class ty{static serialize(e){return e instanceof q?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){let t;if(e&&"object"==typeof e&&tl(e))return e.toASN();if(!(e&&"object"==typeof e))throw TypeError("Parameter 1 should be type of Object.");let r=e.constructor,n=tc.get(r);tc.cache(r);let i=[];if(n.itemType){if(!Array.isArray(e))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof n.itemType){let t=to(n.itemType);if(!t)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);i=e.map(e=>t.toASN(e))}else i=e.map(e=>this.toAsnItem({type:n.itemType},"[]",r,e))}else for(let t in n.items){let s=n.items[t],a=e[t];if(void 0===a||s.defaultValue===a||"object"==typeof s.defaultValue&&"object"==typeof a&&function(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==n[t])return!1;return!0}(this.serialize(s.defaultValue),this.serialize(a)))continue;let o=ty.toAsnItem(s,t,r,a);if("number"==typeof s.context)if(s.implicit)if(!s.repeated&&("number"==typeof s.type||tl(s.type))){let e={};e.valueHex=o instanceof Q?o.valueBeforeDecodeView:o.valueBlock.toBER(),i.push(new V({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},...e}))}else i.push(new G({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:o.valueBlock.value}));else i.push(new G({optional:s.optional,idBlock:{tagClass:3,tagNumber:s.context},value:[o]}));else s.repeated?i=i.concat(o):i.push(o)}switch(n.type){case s.Sequence:t=new ey({value:i});break;case s.Set:t=new eg({value:i});break;case s.Choice:if(!i[0])throw Error(`Schema '${r.name}' has wrong data. Choice cannot be empty.`);t=i[0]}return t}static toAsnItem(e,t,r,n){let i;if("number"==typeof e.type){let s=e.converter;if(!s)throw Error(`Property '${t}' doesn't have converter for type ${a[e.type]} in schema '${r.name}'`);if(e.repeated){if(!Array.isArray(n))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(n,e=>s.toASN(e));i=new("sequence"===e.repeated?ey:eg)({value:t})}else i=s.toASN(n)}else if(e.repeated){if(!Array.isArray(n))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(n,e=>this.toASN(e));i=new("sequence"===e.repeated?ey:eg)({value:t})}else i=this.toASN(n);return i}}class tg{static serialize(e){return ty.serialize(e)}static parse(e,t){return tp.parse(e,t)}static toString(e){let t=W(u.isBufferSource(e)?u.toArrayBuffer(e):tg.serialize(e));if(-1===t.offset)throw Error(`Cannot decode ASN.1 data. ${t.result.error}`);return t.result.toString()}}function tm(e,t,r,n){var i,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}Object.create;Object.create,"function"==typeof SuppressedError&&SuppressedError;class tb extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e),this.message=e,this.innerError=t}}class tw extends tb{constructor(e,t,r){super(t,r),this.schema=e}}class tv extends tw{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class tS extends tb{}class tA extends tb{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r),this.schemaName=e}}class tk extends tv{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema"),this.keys=t,this.errors=r}}function t_(e,t){if(!function(e,t){switch(t){case o.Boolean:return"boolean"==typeof e;case o.Number:return"number"==typeof e;case o.String:return"string"==typeof e}return!0}(e,t))throw TypeError(`Value must be ${o[t]}`)}function tE(e){return e&&e.prototype?!!e.prototype.toJSON&&!!e.prototype.fromJSON||tE(e.prototype):!!(e&&e.toJSON&&e.fromJSON)}!function(e){e[e.Any=0]="Any",e[e.Boolean=1]="Boolean",e[e.Number=2]="Number",e[e.String=3]="String"}(o||(o={}));class tB{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){let t=this.items.get(e)||this.findParentSchema(e);if(!t)throw Error("Cannot get schema for current target");return t}create(e){let t={names:{}},r=this.findParentSchema(e);if(r)for(let e in Object.assign(t,r),t.names={},r.names)t.names[e]=Object.assign({},r.names[e]);return t.target=e,t}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=e.__proto__;return t?this.items.get(t)||this.findParentSchema(t):null}}let tC="default",tT=new tB;class tx{constructor(e){this.pattern=new RegExp(e)}validate(e){let t=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof e)throw new tS("Incoming value must be string");if(!t.exec(e))throw new tS(`Value doesn't match to pattern '${t.toString()}'`)}}class tR{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(t_(e,o.Number),!(this.min<=e&&e<=this.max)){let e=this.min===Number.MIN_VALUE?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new tS(`Value doesn't match to diapason [${e},${t}]`)}}}class tP{constructor(e=Number.MIN_VALUE,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(t_(e,o.Number),!(this.min<e&&e<this.max)){let e=this.min===Number.MIN_VALUE?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new tS(`Value doesn't match to diapason (${e},${t})`)}}}class tO{constructor(e,t,r){this.length=e,this.minLength=t,this.maxLength=r}validate(e){if(void 0!==this.length){if(e.length!==this.length)throw new tS(`Value length must be exactly ${this.length}.`);return}if(void 0!==this.minLength&&e.length<this.minLength)throw new tS(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&e.length>this.maxLength)throw new tS(`Value length must be less than ${this.maxLength}.`)}}class tN{constructor(e){this.enumeration=e}validate(e){if(t_(e,o.String),!this.enumeration.includes(e))throw new tS(`Value must be one of ${this.enumeration.map(e=>`'${e}'`).join(", ")}`)}}class tI{static checkValues(e,t){for(let r of Array.isArray(e)?e:[e])for(let n of t.validations)n instanceof tO&&t.repeated?n.validate(e):n.validate(r)}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e))throw TypeError("Value must be Array");if("number"==typeof t.type)for(let r of Array.isArray(e)?e:[e])t_(r,t.type)}static getSchemaByName(e,t=tC){return{...e.names[tC],...e.names[t]}}}class tK extends tI{static serialize(e,t,r,n){return JSON.stringify(this.toJSON(e,t),r,n)}static toJSON(e,t={}){let r,n=t.targetSchema,i=t.schemaName||tC;if(tE(e))return e.toJSON();if(Array.isArray(e))for(let n of(r=[],e))r.push(this.toJSON(n,t));else if("object"==typeof e){if(n&&!tT.has(n))throw new tb("Cannot get schema for `targetSchema` param");if(n=n||e.constructor,tT.has(n)){let t=tT.get(n);r={};let s=this.getSchemaByName(t,i);for(let a in s)try{let t,o=s[a],l=e[a];if(o.optional&&void 0===l||void 0!==o.defaultValue&&l===o.defaultValue)continue;if(!o.optional&&void 0===l)throw new tA(n.name,`Property '${a}' is required.`);t="number"==typeof o.type?o.converter?o.repeated?l.map(t=>o.converter.toJSON(t,e)):o.converter.toJSON(l,e):l:o.repeated?l.map(e=>this.toJSON(e,{schemaName:i})):this.toJSON(l,{schemaName:i}),this.checkTypes(t,o),this.checkValues(t,o),r[o.name||a]=t}catch(e){if(e instanceof tA)throw e;throw new tA(t.target.name,`Property '${a}' is wrong. ${e.message}`,e)}}else for(let t in r={},e)r[t]=this.toJSON(e[t],{schemaName:i})}else r=e;return r}}class tU extends tI{static parse(e,t){let r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){let r=t.targetSchema,n=t.schemaName||tC,i=new r;if(tE(i))return i.fromJSON(e);let s=tT.get(r),a=this.getSchemaByName(s,n),o={};for(let r in t.strictProperty&&!Array.isArray(e)&&tU.checkStrictProperty(e,a,s),a)try{let o=a[r],l=o.name||r,u=e[l];if(void 0===u&&(o.optional||void 0!==o.defaultValue))continue;if(!o.optional&&void 0===u)throw new tv(s,`Property '${l}' is required.`);if(this.checkTypes(u,o),this.checkValues(u,o),"number"==typeof o.type)o.converter?o.repeated?i[r]=u.map(e=>o.converter.fromJSON(e,i)):i[r]=o.converter.fromJSON(u,i):i[r]=u;else{let e={...t,targetSchema:o.type,schemaName:n};o.repeated?i[r]=u.map(t=>this.fromJSON(t,e)):i[r]=this.fromJSON(u,e)}}catch(e){if(e instanceof tv||(e=new tv(s,`Property '${r}' is wrong. ${e.message}`,e)),t.strictAllKeys)o[r]=e;else throw e}let l=Object.keys(o);if(l.length)throw new tk(s,l,o);return i}static checkStrictProperty(e,t,r){let n=Object.keys(e),i=Object.keys(t),s=[];for(let e of n)-1===i.indexOf(e)&&s.push(e);if(s.length)throw new tk(r,s)}}let tL=(e={})=>(t,r)=>{let n,i,s=`Cannot set type for ${r} property of ${t.constructor.name} schema`;tT.has(t.constructor)?(n=tT.get(t.constructor)).target!==t.constructor&&(n=tT.create(t.constructor),tT.set(t.constructor,n)):(n=tT.create(t.constructor),tT.set(t.constructor,n));let a=Object.assign({type:o.Any,validations:[]},e);if(a.validations=function(e){let t=[];return e.pattern&&t.push(new tx(e.pattern)),(e.type===o.Number||e.type===o.Any)&&((void 0!==e.minInclusive||void 0!==e.maxInclusive)&&t.push(new tR(e.minInclusive,e.maxInclusive)),(void 0!==e.minExclusive||void 0!==e.maxExclusive)&&t.push(new tP(e.minExclusive,e.maxExclusive)),void 0!==e.enumeration&&t.push(new tN(e.enumeration))),(e.type===o.String||e.repeated||e.type===o.Any)&&(void 0!==e.length||void 0!==e.minLength||void 0!==e.maxLength)&&t.push(new tO(e.length,e.minLength,e.maxLength)),t}(a),"number"!=typeof a.type&&!tT.has(a.type)&&!tE(a.type))throw Error(`${s}. Assigning type doesn't have schema.`);for(let t of Array.isArray(e.schema)?e.schema:[e.schema||tC])n.names[t]||(n.names[t]={}),n.names[t][r]=a};class tj extends Error{}class tD extends tj{}class tM extends tj{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}}class t$ extends tj{}class tq extends tj{constructor(e){super(`${e}: Missing required property`)}}class tH{async digest(...e){return this.checkDigest.apply(this,e),this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new tM("digest")}async generateKey(...e){return this.checkGenerateKey.apply(this,e),this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r,...n){let i;if(this.checkAlgorithmName(e),this.checkGenerateKeyParams(e),!(r&&r.length))throw TypeError("Usages cannot be empty when creating a key.");i=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(r,i)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r,...n){throw new tM("generateKey")}async sign(...e){return this.checkSign.apply(this,e),this.onSign.apply(this,e)}checkSign(e,t,r,...n){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"sign")}async onSign(e,t,r,...n){throw new tM("sign")}async verify(...e){return this.checkVerify.apply(this,e),this.onVerify.apply(this,e)}checkVerify(e,t,r,n,...i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,n,...i){throw new tM("verify")}async encrypt(...e){return this.checkEncrypt.apply(this,e),this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,n={},...i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r,...n){throw new tM("encrypt")}async decrypt(...e){return this.checkDecrypt.apply(this,e),this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,n={},...i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r,...n){throw new tM("decrypt")}async deriveBits(...e){return this.checkDeriveBits.apply(this,e),this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,n={},...i){if(this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,n.keyUsage?"deriveBits":void 0),r%8!=0)throw new t$("length: Is not multiple of 8")}async onDeriveBits(e,t,r,...n){throw new tM("deriveBits")}async exportKey(...e){return this.checkExportKey.apply(this,e),this.onExportKey.apply(this,e)}checkExportKey(e,t,...r){if(this.checkKeyFormat(e),this.checkCryptoKey(t),!t.extractable)throw new tj("key: Is not extractable")}async onExportKey(e,t,...r){throw new tM("exportKey")}async importKey(...e){return this.checkImportKey.apply(this,e),this.onImportKey.apply(this,e)}checkImportKey(e,t,r,n,i,...s){this.checkKeyFormat(e),this.checkKeyData(e,t),this.checkAlgorithmName(r),this.checkImportParams(r),Array.isArray(this.usages)&&this.checkKeyUsages(i,this.usages)}async onImportKey(e,t,r,n,i,...s){throw new tM("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase())throw new tD("Unrecognized name")}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(let r of e)if(-1===t.indexOf(r))throw TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(e,t){if(this.checkAlgorithmName(e.algorithm),t&&-1===e.usages.indexOf(t))throw new tj("key does not match that of operation")}checkRequiredProperty(e,t){if(!(t in e))throw new tq(t)}checkHashAlgorithm(e,t){for(let r of t)if(r.toLowerCase()===e.name.toLowerCase())return;throw new t$(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,t){if(!t)throw TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===e){if(!("object"==typeof t&&"kty"in t))throw TypeError("keyData: Is not JsonWebToken")}else if(!u.isBufferSource(t))throw TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(e){return u.toArrayBuffer(e)}}class tz extends tH{checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not of type Number");switch(e.length){case 128:case 192:case 256:break;default:throw TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class tV extends tz{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.iv.byteLength)throw TypeError("iv: Must have length 16 bytes")}}class tF extends tz{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw new t$("length: Must be more than 0")}}class tW extends tz{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"counter"),!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter)))throw TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.counter.byteLength)throw TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw new t$("length: Must be more than 0")}}class tJ extends tz{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class tG extends tz{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){var t;if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength<1)throw new t$("iv: Must have length more than 0 and less than 2^64 - 1");switch(null!=e.tagLength||(e.tagLength=128),e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new t$("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class tY extends tz{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}}class tX extends tH{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength!==this.ivSize)throw TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not of type Number");if(e.length!==this.keySizeBits)throw new t$(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class tQ extends tH{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let t=g.ToBase64(e.publicExponent);if("Aw=="!==t&&"AQAB"!==t)throw TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384)throw TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class tZ extends tQ{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class t0 extends tQ{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"saltLength"),"number"!=typeof e.saltLength)throw TypeError("saltLength: Is not a Number");if(e.saltLength<0)throw RangeError("saltLength: Must be positive number")}}class t1 extends tQ{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label)))throw TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}class t2 extends tH{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve"),this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(let t of this.namedCurves)if(t.toLowerCase()===e.toLowerCase())return;throw new t$(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class t8 extends t2{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}let t3=["secret","private","public"];class t4{static create(e,t,r,n){let i=new this;return i.algorithm=e,i.type=t,i.extractable=r,i.usages=n,i}static isKeyType(e){return -1!==t3.indexOf(e)}get[Symbol.toStringTag](){return"CryptoKey"}}class t6 extends t2{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"public"),!(e.public instanceof t4))throw TypeError("public: Is not a CryptoKey");if("public"!==e.public.type)throw new t$("public: Is not a public key");if(e.public.algorithm.name!==this.name)throw new t$(`public: Is not ${this.name} key`)}}class t5 extends t6{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}}class t9 extends t2{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}}let t7=class{constructor(e){e&&(this.value=e)}};tm([td({type:a.ObjectIdentifier})],t7.prototype,"value",void 0),t7=tm([th({type:s.Choice})],t7);class re{constructor(e){Object.assign(this,e)}}tm([td({type:a.ObjectIdentifier})],re.prototype,"algorithm",void 0),tm([td({type:a.Any,optional:!0})],re.prototype,"parameters",void 0);class rt{constructor(){this.version=0,this.privateKeyAlgorithm=new re,this.privateKey=new ArrayBuffer(0)}}tm([td({type:a.Integer})],rt.prototype,"version",void 0),tm([td({type:re})],rt.prototype,"privateKeyAlgorithm",void 0),tm([td({type:a.OctetString})],rt.prototype,"privateKey",void 0),tm([td({type:a.Any,optional:!0})],rt.prototype,"attributes",void 0);class rr{constructor(){this.publicKeyAlgorithm=new re,this.publicKey=new ArrayBuffer(0)}}tm([td({type:re})],rr.prototype,"publicKeyAlgorithm",void 0),tm([td({type:a.BitString})],rr.prototype,"publicKey",void 0);let rn={fromJSON:e=>g.FromBase64Url(e),toJSON:e=>g.ToBase64Url(new Uint8Array(e))},ri={fromASN:e=>new Uint8Array(e.valueBlock.valueHex)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1),toASN:e=>new eo({valueHex:new Uint8Array(e)[0]>127?m(new Uint8Array([0]).buffer,e):e})};class rs{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}}tm([td({type:a.Integer,converter:eG})],rs.prototype,"version",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"n",converter:rn})],rs.prototype,"modulus",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"e",converter:rn})],rs.prototype,"publicExponent",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"d",converter:rn})],rs.prototype,"privateExponent",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"p",converter:rn})],rs.prototype,"prime1",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"q",converter:rn})],rs.prototype,"prime2",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"dp",converter:rn})],rs.prototype,"exponent1",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"dq",converter:rn})],rs.prototype,"exponent2",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"qi",converter:rn})],rs.prototype,"coefficient",void 0),tm([td({type:a.Any,optional:!0})],rs.prototype,"otherPrimeInfos",void 0);class ra{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}}tm([td({type:a.Integer,converter:ri}),tL({name:"n",converter:rn})],ra.prototype,"modulus",void 0),tm([td({type:a.Integer,converter:ri}),tL({name:"e",converter:rn})],ra.prototype,"publicExponent",void 0);let ro=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){let e=new Uint8Array(this.value);if(4!==e[0])throw new tj("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");let t=(e=new Uint8Array(this.value.slice(1))).length/2;return{x:g.ToBase64Url(e.buffer.slice(0,0+t)),y:g.ToBase64Url(e.buffer.slice(0+t,0+t+t))}}fromJSON(e){if(!("x"in e))throw Error("x: Missing required property");if(!("y"in e))throw Error("y: Missing required property");let t=g.FromBase64Url(e.x),r=g.FromBase64Url(e.y),n=m(new Uint8Array([4]).buffer,t,r);return this.value=new Uint8Array(n).buffer,this}};tm([td({type:a.OctetString})],ro.prototype,"value",void 0),ro=tm([th({type:s.Choice})],ro);class rl{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e))throw Error("d: Missing required property");if(this.privateKey=g.FromBase64Url(e.d),"x"in e){let t=new ro;t.fromJSON(e);let r=ty.toASN(t);"valueHex"in r.valueBlock&&(this.publicKey=r.valueBlock.valueHex)}return this}toJSON(){let e={};return e.d=g.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new ro(this.publicKey).toJSON()),e}}tm([td({type:a.Integer,converter:eG})],rl.prototype,"version",void 0),tm([td({type:a.OctetString})],rl.prototype,"privateKey",void 0),tm([td({context:0,type:a.Any,optional:!0})],rl.prototype,"parameters",void 0),tm([td({context:1,type:a.BitString,optional:!0})],rl.prototype,"publicKey",void 0);let ru={fromASN:e=>{let t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:e=>{let t=new Uint8Array(e);if(t[0]>127){let e=new Uint8Array(t.length+1);return e.set(t,1),new eo({valueHex:e.buffer})}return new eo({valueHex:e})}};var rc=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:ru});class rh{static decodePoint(e,t){let r=u.toUint8Array(e);if(0===r.length||4!==r[0])throw Error("Only uncompressed point format supported");let n=(r.length-1)/2;if(n!==Math.ceil(t/8))throw Error("Point does not match field size");return{x:r.slice(1,n+1),y:r.slice(n+1,n+1+n)}}static encodePoint(e,t){let r=Math.ceil(t/8);if(e.x.byteLength!==r||e.y.byteLength!==r)throw Error("X,Y coordinates don't match point size criteria");let n=u.toUint8Array(e.x),i=u.toUint8Array(e.y),s=new Uint8Array(2*r+1);return s[0]=4,s.set(n,1),s.set(i,r+1),s}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,t){let r=this.getSize(t),n=u.toUint8Array(e.r),i=u.toUint8Array(e.s),s=new Uint8Array(2*r);return s.set(this.padStart(n,r)),s.set(this.padStart(i,r),r),s}static decodeSignature(e,t){let r=this.getSize(t),n=u.toUint8Array(e);if(n.length!==2*r)throw Error("Incorrect size of the signature");let i=n.slice(0,r),s=n.slice(r);return{r:this.trimStart(i),s:this.trimStart(s)}}static trimStart(e){let t=0;for(;t<e.length-1&&0===e[t];)t++;return 0===t?e:e.slice(t,e.length)}static padStart(e,t){if(t===e.length)return e;let r=new Uint8Array(t);return r.set(e,t-e.length),r}}class rd{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){let t=e.byteLength/2,r=rh.decodeSignature(e,8*t),n=new rd;return n.r=u.toArrayBuffer(r.r),n.s=u.toArrayBuffer(r.s),n}toWebCryptoSignature(e){if(!e){let t=Math.max(this.r.byteLength,this.s.byteLength);e=t<=32?256:t<=48?384:521}return rh.encodeSignature(this,e).buffer}}tm([td({type:a.Integer,converter:ru})],rd.prototype,"r",void 0),tm([td({type:a.Integer,converter:ru})],rd.prototype,"s",void 0);class rf extends rt{}tm([td({context:1,implicit:!0,type:a.BitString,optional:!0})],rf.prototype,"publicKey",void 0);let rp=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d)throw Error("d: Missing required property");return this.value=g.FromBase64Url(e.d),this}toJSON(){return{d:g.ToBase64Url(this.value)}}};tm([td({type:a.OctetString})],rp.prototype,"value",void 0),rp=tm([th({type:s.Choice})],rp);let ry=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){return{x:g.ToBase64Url(this.value)}}fromJSON(e){if(!("x"in e))throw Error("x: Missing required property");return this.value=g.FromBase64Url(e.x),this}};tm([td({type:a.BitString})],ry.prototype,"value",void 0),ry=tm([th({type:s.Choice})],ry);let rg=class{};tm([td({type:a.OctetString}),tL({type:o.String,converter:rn})],rg.prototype,"d",void 0),rg=tm([th({type:s.Choice})],rg);let rm="1.2.840.10045.3.1.7",rb="1.3.132.0",rw=`${rb}.34`,rv=`${rb}.35`,rS=`${rb}.10`,rA="1.3.36.3.3.2.8.1.1",rk=`${rA}.1`,r_=`${rA}.2`,rE=`${rA}.3`,rB=`${rA}.4`,rC=`${rA}.5`,rT=`${rA}.6`,rx=`${rA}.7`,rR=`${rA}.8`,rP=`${rA}.9`,rO=`${rA}.10`,rN=`${rA}.11`,rI=`${rA}.12`,rK=`${rA}.13`,rU=`${rA}.14`;var rL=Object.freeze({__proto__:null,AlgorithmIdentifier:re,get CurvePrivateKey(){return rg},EcDsaSignature:rd,EcPrivateKey:rl,get EcPublicKey(){return ro},get EdPrivateKey(){return rp},get EdPublicKey(){return ry},get ObjectIdentifier(){return t7},OneAsymmetricKey:rf,PrivateKeyInfo:rt,PublicKeyInfo:rr,RsaPrivateKey:rs,RsaPublicKey:ra,converters:rc,idBrainpoolP160r1:rk,idBrainpoolP160t1:r_,idBrainpoolP192r1:rE,idBrainpoolP192t1:rB,idBrainpoolP224r1:rC,idBrainpoolP224t1:rT,idBrainpoolP256r1:rx,idBrainpoolP256t1:rR,idBrainpoolP320r1:rP,idBrainpoolP320t1:rO,idBrainpoolP384r1:rN,idBrainpoolP384t1:rI,idBrainpoolP512r1:rK,idBrainpoolP512t1:rU,idEd25519:"1.3.101.112",idEd448:"1.3.101.113",idEllipticCurve:rb,idSecp256k1:rS,idSecp256r1:rm,idSecp384r1:rw,idSecp521r1:rv,idVersionOne:rA,idX25519:"1.3.101.110",idX448:"1.3.101.111"});class rj{constructor(){}static register(e){let t=new t7;t.value=e.id;let r=tg.serialize(t);this.items.push({...e,raw:r}),this.names.push(e.name)}static find(e){for(let t of(e=e.toUpperCase(),this.items))if(t.name.toUpperCase()===e||t.id.toUpperCase()===e)return t;return null}static get(e){let t=this.find(e);if(!t)throw Error(`Unsupported EC named curve '${e}'`);return t}}rj.items=[],rj.names=[],rj.register({name:"P-256",id:rm,size:256}),rj.register({name:"P-384",id:rw,size:384}),rj.register({name:"P-521",id:rv,size:521}),rj.register({name:"K-256",id:rS,size:256}),rj.register({name:"brainpoolP160r1",id:rk,size:160}),rj.register({name:"brainpoolP160t1",id:r_,size:160}),rj.register({name:"brainpoolP192r1",id:rE,size:192}),rj.register({name:"brainpoolP192t1",id:rB,size:192}),rj.register({name:"brainpoolP224r1",id:rC,size:224}),rj.register({name:"brainpoolP224t1",id:rT,size:224}),rj.register({name:"brainpoolP256r1",id:rx,size:256}),rj.register({name:"brainpoolP256t1",id:rR,size:256}),rj.register({name:"brainpoolP320r1",id:rP,size:320}),rj.register({name:"brainpoolP320t1",id:rO,size:320}),rj.register({name:"brainpoolP384r1",id:rN,size:384}),rj.register({name:"brainpoolP384t1",id:rI,size:384}),rj.register({name:"brainpoolP512r1",id:rK,size:512}),rj.register({name:"brainpoolP512t1",id:rU,size:512});class rD extends tH{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),"length"in e){if("number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw RangeError("length: Number is out of range")}}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class rM extends tH{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(e,"iterations"),"number"!=typeof e.iterations)throw TypeError("iterations: Is not a Number");if(e.iterations<1)throw TypeError("iterations: Is less than 1")}checkImportKey(e,t,r,n,i,...s){if(super.checkImportKey(e,t,r,n,i,...s),n)throw SyntaxError("extractable: Must be 'false'")}}class r$ extends tH{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!u.isBufferSource(e.salt)||(this.checkRequiredProperty(e,"info"),!u.isBufferSource(e.info)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(e,t,r,n,i,...s){if(super.checkImportKey(e,t,r,n,i,...s),n)throw SyntaxError("extractable: Must be 'false'")}}class rq extends tH{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...e){return e[0]={length:this.defaultLength,...e[0]},super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);let r=e.length||0;if("number"!=typeof r)throw TypeError("length: Is not a Number");if(r<0)throw TypeError("length: Is negative")}}class rH extends rq{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}}class rz extends rq{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}}class rV{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let e=this.getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=g.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-${t.substring(20)}`}}class rF{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){let t=this.get(e.toLowerCase());return t&&delete this.items[e],t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){let e=[];for(let t in this.items){let r=this.items[t];e.push(r.name)}return e.sort()}}let rW={jwk:["private","public","secret"],pkcs8:["private"],spki:["public"],raw:["secret","public"]},rJ=["pkcs8","spki","raw"];class rG{constructor(){this.providers=new rF}static isHashedAlgorithm(e){return!!e&&"object"==typeof e&&"name"in e&&"hash"in e}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");let[t,r,...n]=e,i=this.prepareAlgorithm(t),s=u.toArrayBuffer(r),a=this.getProvider(i.name);return await a.digest(i,s,...n)}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");let[t,r,n,...i]=e,s=this.prepareAlgorithm(t),a=this.getProvider(s.name);return await a.generateKey({...s,name:a.name},r,n,...i)}async sign(...e){this.checkRequiredArguments(e,3,"sign");let[t,r,n,...i]=e;this.checkCryptoKey(r);let s=this.prepareAlgorithm(t),a=u.toArrayBuffer(n),o=this.getProvider(s.name);return await o.sign({...s,name:o.name},r,a,...i)}async verify(...e){this.checkRequiredArguments(e,4,"verify");let[t,r,n,i,...s]=e;this.checkCryptoKey(r);let a=this.prepareAlgorithm(t),o=u.toArrayBuffer(i),l=u.toArrayBuffer(n),c=this.getProvider(a.name);return await c.verify({...a,name:c.name},r,l,o,...s)}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");let[t,r,n,...i]=e;this.checkCryptoKey(r);let s=this.prepareAlgorithm(t),a=u.toArrayBuffer(n),o=this.getProvider(s.name);return await o.encrypt({...s,name:o.name},r,a,{keyUsage:!0},...i)}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");let[t,r,n,...i]=e;this.checkCryptoKey(r);let s=this.prepareAlgorithm(t),a=u.toArrayBuffer(n),o=this.getProvider(s.name);return await o.decrypt({...s,name:o.name},r,a,{keyUsage:!0},...i)}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");let[t,r,n,...i]=e;this.checkCryptoKey(r);let s=this.prepareAlgorithm(t),a=this.getProvider(s.name);return await a.deriveBits({...s,name:a.name},r,n,{keyUsage:!0},...i)}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");let[t,r,n,i,s,...a]=e,o=this.prepareAlgorithm(n);this.getProvider(o.name).checkDerivedKeyParams(o);let l=this.prepareAlgorithm(t),u=this.getProvider(l.name);u.checkCryptoKey(r,"deriveKey");let c=await u.deriveBits({...l,name:u.name},r,n.length||512,{keyUsage:!1},...a);return this.importKey("raw",c,n,i,s,...a)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");let[t,r,...n]=e;if(this.checkCryptoKey(r),!rW[t])throw TypeError("Invalid keyFormat argument");if(!rW[t].includes(r.type))throw new DOMException("The key is not of the expected type");let i=this.getProvider(r.algorithm.name);return await i.exportKey(t,r,...n)}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");let[t,r,n,i,s,...a]=e,o=this.prepareAlgorithm(n),l=this.getProvider(o.name);if("jwk"===t){if("object"!=typeof r||!r.kty)throw TypeError("Key data must be an object for JWK import")}else if(rJ.includes(t)){if(!u.isBufferSource(r))throw TypeError("Key data must be a BufferSource for non-JWK formats")}else throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView or JsonWebKey)'");return l.importKey(t,r,{...o,name:l.name},i,s,...a)}async wrapKey(e,t,r,n,...i){let s=await this.exportKey(e,t,...i);if("jwk"===e){let e=JSON.stringify(s);s=g.FromUtf8String(e)}let a=this.prepareAlgorithm(n),o=u.toArrayBuffer(s),l=this.getProvider(a.name);return l.encrypt({...a,name:l.name},r,o,{keyUsage:!1},...i)}async unwrapKey(e,t,r,n,i,s,a,...o){let l=this.prepareAlgorithm(n),c=u.toArrayBuffer(t),h=this.getProvider(l.name),d=await h.decrypt({...l,name:h.name},r,c,{keyUsage:!1},...o);if("jwk"===e)try{d=JSON.parse(g.ToUtf8String(d))}catch(t){let e=TypeError("wrappedKey: Is not a JSON");throw e.internal=t,e}return this.importKey(e,d,i,s,a,...o)}checkRequiredArguments(e,t,r){if(e.length<t)throw TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}prepareAlgorithm(e){if("string"==typeof e)return{name:e};if(rG.isHashedAlgorithm(e)){let t={...e};return t.hash=this.prepareAlgorithm(e.hash),t}return{...e}}getProvider(e){let t=this.providers.get(e);if(!t)throw new tD("Unrecognized name");return t}checkCryptoKey(e){if(!(e instanceof t4))throw TypeError("Key is not of type 'CryptoKey'")}}var rY=r(55511),rX=r.n(rY),rQ=r(19771),rZ=r(13476);let r0={fromJSON:e=>Buffer.from(g.FromBase64Url(e)),toJSON:e=>g.ToBase64Url(e)};class r1 extends t4{constructor(){super(...arguments),this.data=Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}}(0,rZ.Cg)([tL({name:"ext",type:o.Boolean,optional:!0})],r1.prototype,"extractable",void 0),(0,rZ.Cg)([tL({name:"key_ops",type:o.String,repeated:!0,optional:!0})],r1.prototype,"usages",void 0),(0,rZ.Cg)([tL({type:o.String})],r1.prototype,"kty",void 0),(0,rZ.Cg)([tL({type:o.String,optional:!0})],r1.prototype,"alg",void 0);class r2 extends r1{constructor(){super(...arguments),this.kty="oct",this.type="secret"}}class r8 extends r1{}class r3 extends r2{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new tD("Unsupported algorithm name")}}set alg(e){}}(0,rZ.Cg)([tL({name:"k",converter:r0})],r3.prototype,"data",void 0);let r4=new WeakMap;function r6(e){let t=r4.get(e);if(!t)throw new t$("Cannot get CryptoKey from secure storage");return t}function r5(e){let t=t4.create(e.algorithm,e.type,e.extractable,e.usages);return Object.freeze(t),r4.set(t,e),t}class r9{static async generateKey(e,t,r){let n=new r3;return n.algorithm=e,n.extractable=t,n.usages=r,n.data=rX().randomBytes(e.length>>3),n}static async exportKey(e,t){if(!(t instanceof r3))throw Error("key: Is not AesCryptoKey");switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new t$("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,n,i){let s;switch(e.toLowerCase()){case"jwk":s=tU.fromJSON(t,{targetSchema:r3});break;case"raw":(s=new r3).data=Buffer.from(t);break;default:throw new t$("format: Must be 'jwk' or 'raw'")}switch(s.algorithm=r,s.algorithm.length=s.data.length<<3,s.extractable=n,s.usages=i,s.algorithm.length){case 128:case 192:case 256:break;default:throw new t$("keyData: Is wrong key length")}return s}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(e,t,Buffer.from(r));case"AES-CTR":return this.encryptAesCTR(e,t,Buffer.from(r));case"AES-GCM":return this.encryptAesGCM(e,t,Buffer.from(r));case"AES-KW":return this.encryptAesKW(e,t,Buffer.from(r));case"AES-ECB":return this.encryptAesECB(e,t,Buffer.from(r));default:throw new t$("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof r3))throw Error("key: Is not AesCryptoKey");switch(e.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(e,t,Buffer.from(r));case"AES-CTR":return this.decryptAesCTR(e,t,Buffer.from(r));case"AES-GCM":return this.decryptAesGCM(e,t,Buffer.from(r));case"AES-KW":return this.decryptAesKW(e,t,Buffer.from(r));case"AES-ECB":return this.decryptAesECB(e,t,Buffer.from(r));default:throw new t$("algorithm: Is not recognized")}}static async encryptAesCBC(e,t,r){let n=rX().createCipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async decryptAesCBC(e,t,r){let n=rX().createDecipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async encryptAesCTR(e,t,r){let n=rX().createCipheriv(`aes-${t.algorithm.length}-ctr`,t.data,Buffer.from(e.counter)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async decryptAesCTR(e,t,r){let n=rX().createDecipheriv(`aes-${t.algorithm.length}-ctr`,t.data,new Uint8Array(e.counter)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async encryptAesGCM(e,t,r){let n=rX().createCipheriv(`aes-${t.algorithm.length}-gcm`,t.data,Buffer.from(e.iv),{authTagLength:(e.tagLength||128)>>3});e.additionalData&&n.setAAD(Buffer.from(e.additionalData));let i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final(),n.getAuthTag()])).buffer}static async decryptAesGCM(e,t,r){let n=rX().createDecipheriv(`aes-${t.algorithm.length}-gcm`,t.data,new Uint8Array(e.iv)),i=(e.tagLength||128)>>3,s=r.slice(0,r.length-i),a=r.slice(r.length-i);e.additionalData&&n.setAAD(Buffer.from(e.additionalData)),n.setAuthTag(a);let o=n.update(s);return new Uint8Array(o=Buffer.concat([o,n.final()])).buffer}static async encryptAesKW(e,t,r){let n=rX().createCipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async decryptAesKW(e,t,r){let n=rX().createDecipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async encryptAesECB(e,t,r){let n=rX().createCipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async decryptAesECB(e,t,r){let n=rX().createDecipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}}r9.AES_KW_IV=Buffer.from("A6A6A6A6A6A6A6A6","hex");class r7 extends tV{async onGenerateKey(e,t,r){return r5(await r9.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return r9.encrypt(e,r6(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r9.decrypt(e,r6(t),new Uint8Array(r))}async onExportKey(e,t){return r9.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await r9.importKey(e,t,{name:r.name},n,i))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof r3))throw TypeError("key: Is not a AesCryptoKey")}}let ne=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),nt=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);function nr(e){let t=Buffer.alloc(e.length),r=e.length-1;for(let n=0;n<r;n++)t[n]=e[n]<<1,128&e[n+1]&&(t[n]+=1);return t[r]=e[r]<<1,t}function nn(e,t){let r=Math.min(e.length,t.length),n=Buffer.alloc(r);for(let i=0;i<r;i++)n[i]=e[i]^t[i];return n}function ni(e,t){let r=rY.createCipheriv(`aes${e.length<<3}`,e,ne),n=r.update(t);return r.final(),n}function ns(e,t){let r=Buffer.alloc(16),n=16*t;return e.copy(r,0,n,n+16),r}class na extends tF{async onGenerateKey(e,t,r){return r5(await r9.generateKey({name:this.name,length:e.length},t,r))}async onSign(e,t,r){return new Uint8Array(function(e,t){let r,n,i,s=function(e){let t=ni(e,ne),r=nr(t);128&t[0]&&(r=nn(r,nt));let n=nr(r);return 128&r[0]&&(n=nn(n,nt)),{subkey1:r,subkey2:n}}(e),a=Math.ceil(t.length/16);0===a?(a=1,r=!1):r=t.length%16==0;let o=a-1;n=r?nn(ns(t,o),s.subkey1):nn(function(e,t){let r=Buffer.alloc(16),n=16*t,i=e.length;return r.fill(0),e.copy(r,0,n,i),r[i-n]=128,r}(t,o),s.subkey2);let l=ne;for(let r=0;r<o;r++)l=ni(e,nn(l,ns(t,r)));return ni(e,nn(n,l))}(r6(t).data,Buffer.from(r))).buffer}async onVerify(e,t,r,n){let i=await this.sign(e,t,n);return 0===Buffer.from(r).compare(Buffer.from(i))}async onExportKey(e,t){return r9.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await r9.importKey(e,t,{name:r.name},n,i))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof r3))throw TypeError("key: Is not a AesCryptoKey")}}class no extends tW{async onGenerateKey(e,t,r){return r5(await r9.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return r9.encrypt(e,r6(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r9.decrypt(e,r6(t),new Uint8Array(r))}async onExportKey(e,t){return r9.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await r9.importKey(e,t,{name:r.name},n,i))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof r3))throw TypeError("key: Is not a AesCryptoKey")}}class nl extends tG{async onGenerateKey(e,t,r){return r5(await r9.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return r9.encrypt(e,r6(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r9.decrypt(e,r6(t),new Uint8Array(r))}async onExportKey(e,t){return r9.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await r9.importKey(e,t,{name:r.name},n,i))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof r3))throw TypeError("key: Is not a AesCryptoKey")}}class nu extends tY{async onGenerateKey(e,t,r){return r5(await r9.generateKey({name:this.name,length:e.length},t,r))}async onExportKey(e,t){return r9.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await r9.importKey(e,t,{name:r.name},n,i))}async onEncrypt(e,t,r){return r9.encrypt(e,r6(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r9.decrypt(e,r6(t),new Uint8Array(r))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof r3))throw TypeError("key: Is not a AesCryptoKey")}}class nc extends tJ{async onGenerateKey(e,t,r){return r5(await r9.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return r9.encrypt(e,r6(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r9.decrypt(e,r6(t),new Uint8Array(r))}async onExportKey(e,t){return r9.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await r9.importKey(e,t,{name:r.name},n,i))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof r3))throw TypeError("key: Is not a AesCryptoKey")}}class nh extends r2{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new tD("Unsupported algorithm name")}}set alg(e){}}(0,rZ.Cg)([tL({name:"k",converter:r0})],nh.prototype,"data",void 0);class nd{static async generateKey(e,t,r){let n=new nh;return n.algorithm=e,n.extractable=t,n.usages=r,n.data=rX().randomBytes(e.length>>3),n}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new t$("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,n,i){let s;switch(e.toLowerCase()){case"jwk":s=tU.fromJSON(t,{targetSchema:nh});break;case"raw":(s=new nh).data=Buffer.from(t);break;default:throw new t$("format: Must be 'jwk' or 'raw'")}return s.algorithm=r,s.extractable=n,s.usages=i,s}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(e,t,Buffer.from(r));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(e,t,Buffer.from(r));default:throw new t$("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof nh))throw Error("key: Is not DesCryptoKey");switch(e.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(e,t,Buffer.from(r));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(e,t,Buffer.from(r));default:throw new t$("algorithm: Is not recognized")}}static async encryptDesCBC(e,t,r){let n=rX().createCipheriv("des-cbc",t.data,new Uint8Array(e.iv)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async decryptDesCBC(e,t,r){let n=rX().createDecipheriv("des-cbc",t.data,new Uint8Array(e.iv)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async encryptDesEDE3CBC(e,t,r){let n=rX().createCipheriv("des-ede3-cbc",t.data,Buffer.from(e.iv)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}static async decryptDesEDE3CBC(e,t,r){let n=rX().createDecipheriv("des-ede3-cbc",t.data,new Uint8Array(e.iv)),i=n.update(r);return new Uint8Array(i=Buffer.concat([i,n.final()])).buffer}}class nf extends tX{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(e,t,r){return r5(await nd.generateKey({name:this.name,length:this.keySizeBits},t,r))}async onEncrypt(e,t,r){return nd.encrypt(e,r6(t),new Uint8Array(r))}async onDecrypt(e,t,r){return nd.decrypt(e,r6(t),new Uint8Array(r))}async onExportKey(e,t){return nd.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){let s=await nd.importKey(e,t,{name:this.name,length:this.keySizeBits},n,i);if(s.data.length!==this.keySizeBits>>3)throw new t$("keyData: Wrong key size");return r5(s)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof nh))throw TypeError("key: Is not a DesCryptoKey")}}class np extends tX{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(e,t,r){return r5(await nd.generateKey({name:this.name,length:this.keySizeBits},t,r))}async onEncrypt(e,t,r){return nd.encrypt(e,r6(t),new Uint8Array(r))}async onDecrypt(e,t,r){return nd.decrypt(e,r6(t),new Uint8Array(r))}async onExportKey(e,t){return nd.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){let s=await nd.importKey(e,t,{name:this.name,length:this.keySizeBits},n,i);if(s.data.length!==this.keySizeBits>>3)throw new t$("keyData: Wrong key size");return r5(s)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof nh))throw TypeError("key: Is not a DesCryptoKey")}}function ny(e){switch(e.name.toUpperCase()){case"RSA-OAEP":{let t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${"1"!==t?`-${t}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new t$("algorithm: Is not recognized")}}class ng extends r8{constructor(){super(...arguments),this.type="private"}getKey(){let e=tp.parse(this.data,rL.PrivateKeyInfo);return tp.parse(e.privateKey,rL.RsaPrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"RSA",alg:ny(this.algorithm),key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){let t=tU.fromJSON(e,{targetSchema:rL.RsaPrivateKey}),r=new rL.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.privateKeyAlgorithm.parameters=null,r.privateKey=ty.serialize(t),this.data=Buffer.from(ty.serialize(r))}}class nm extends r8{constructor(){super(...arguments),this.type="public"}getKey(){let e=tp.parse(this.data,rL.PublicKeyInfo);return tp.parse(e.publicKey,rL.RsaPublicKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"RSA",alg:ny(this.algorithm),key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){let t=tU.fromJSON(e,{targetSchema:rL.RsaPublicKey}),r=new rL.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.publicKeyAlgorithm.parameters=null,r.publicKey=ty.serialize(t),this.data=Buffer.from(ty.serialize(r))}}class nb{static async generateKey(e,t,r){let n=new ng;n.algorithm=e,n.extractable=t,n.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let i=new nm;i.algorithm=e,i.extractable=!0,i.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let s=Buffer.concat([Buffer.alloc(4-e.publicExponent.byteLength,0),Buffer.from(e.publicExponent)]).readInt32BE(0),a=rX().generateKeyPairSync("rsa",{modulusLength:e.modulusLength,publicExponent:s,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=a.privateKey,i.data=a.publicKey,{privateKey:n,publicKey:i}}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;default:throw new t$("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":if(t.d){let e=tU.fromJSON(t,{targetSchema:rL.RsaPrivateKey});return this.importPrivateKey(e,r,n,i)}{let e=tU.fromJSON(t,{targetSchema:rL.RsaPublicKey});return this.importPublicKey(e,r,n,i)}case"spki":{let e=tp.parse(new Uint8Array(t),rL.PublicKeyInfo),s=tp.parse(e.publicKey,rL.RsaPublicKey);return this.importPublicKey(s,r,n,i)}case"pkcs8":{let e=tp.parse(new Uint8Array(t),rL.PrivateKeyInfo),s=tp.parse(e.privateKey,rL.RsaPrivateKey);return this.importPrivateKey(s,r,n,i)}default:throw new t$("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(e,t,r){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(e,t,r);default:throw new t$("algorithm: Is not recognized")}}static async verify(e,t,r,n){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(e,t,n,r);default:throw new t$("algorithm: Is not recognized")}}static async encrypt(e,t,r){if("RSA-OAEP"===e.name.toUpperCase())return this.encryptOAEP(e,t,r);throw new t$("algorithm: Is not recognized")}static async decrypt(e,t,r){if("RSA-OAEP"===e.name.toUpperCase())return this.decryptOAEP(e,t,r);throw new t$("algorithm: Is not recognized")}static importPrivateKey(e,t,r,n){let i=new rL.PrivateKeyInfo;i.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",i.privateKeyAlgorithm.parameters=null,i.privateKey=ty.serialize(e);let s=new ng;return s.data=Buffer.from(ty.serialize(i)),s.algorithm=Object.assign({},t),s.algorithm.publicExponent=new Uint8Array(e.publicExponent),s.algorithm.modulusLength=e.modulus.byteLength<<3,s.extractable=r,s.usages=n,s}static importPublicKey(e,t,r,n){let i=new rL.PublicKeyInfo;i.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",i.publicKeyAlgorithm.parameters=null,i.publicKey=ty.serialize(e);let s=new nm;return s.data=Buffer.from(ty.serialize(i)),s.algorithm=Object.assign({},t),s.algorithm.publicExponent=new Uint8Array(e.publicExponent),s.algorithm.modulusLength=e.modulus.byteLength<<3,s.extractable=r,s.usages=n,s}static getCryptoAlgorithm(e){switch(e.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new t$("algorithm.hash: Is not recognized")}}static signRsa(e,t,r){let n=this.getCryptoAlgorithm(t.algorithm),i=rX().createSign(n);i.update(Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let s={key:t.pem};return"RSA-PSS"===e.name.toUpperCase()&&(s.padding=rX().constants.RSA_PKCS1_PSS_PADDING,s.saltLength=e.saltLength),new Uint8Array(i.sign(s)).buffer}static verifySSA(e,t,r,n){let i=this.getCryptoAlgorithm(t.algorithm),s=rX().createVerify(i);s.update(Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:t.pem};return"RSA-PSS"===e.name.toUpperCase()&&(a.padding=rX().constants.RSA_PKCS1_PSS_PADDING,a.saltLength=e.saltLength),s.verify(a,n)}static encryptOAEP(e,t,r){let n={key:`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:rX().constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(rX().publicEncrypt(n,r)).buffer}static decryptOAEP(e,t,r){let n={key:`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:rX().constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(rX().privateDecrypt(n,r)).buffer}}nb.publicKeyUsages=["verify","encrypt","wrapKey"],nb.privateKeyUsages=["sign","decrypt","unwrapKey"];class nw extends tZ{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let n=await nb.generateKey({...e,name:this.name},t,r);return{privateKey:r5(n.privateKey),publicKey:r5(n.publicKey)}}async onSign(e,t,r){return nb.sign(e,r6(t),new Uint8Array(r))}async onVerify(e,t,r,n){return nb.verify(e,r6(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return nb.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await nb.importKey(e,t,{...r,name:this.name},n,i))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r6(e);if(!(r instanceof ng||r instanceof nm))throw TypeError("key: Is not RSA CryptoKey")}}class nv extends t0{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let n=await nb.generateKey({...e,name:this.name},t,r);return{privateKey:r5(n.privateKey),publicKey:r5(n.publicKey)}}async onSign(e,t,r){return nb.sign(e,r6(t),new Uint8Array(r))}async onVerify(e,t,r,n){return nb.verify(e,r6(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return nb.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await nb.importKey(e,t,{...r,name:this.name},n,i))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r6(e);if(!(r instanceof ng||r instanceof nm))throw TypeError("key: Is not RSA CryptoKey")}}class nS{static size(e){switch(e.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw Error("Unrecognized name")}}static getAlgorithmName(e){switch(e.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw Error("Unrecognized name")}}static digest(e,t){let r=this.getAlgorithmName(e);return new Uint8Array(rX().createHash(r).update(Buffer.from(t)).digest()).buffer}}class nA extends t1{async onGenerateKey(e,t,r){let n=await nb.generateKey({...e,name:this.name},t,r);return{privateKey:r5(n.privateKey),publicKey:r5(n.publicKey)}}async onEncrypt(e,t,r){let n=r6(t),i=new Uint8Array(r),s=Math.ceil(n.algorithm.modulusLength>>3),a=nS.size(n.algorithm.hash)>>3,o=i.byteLength,l=s-o-2*a-2;if(o>s-2*a-2)throw Error("Data too large");let c=new Uint8Array(s),h=c.subarray(1,a+1),d=c.subarray(a+1);d.set(i,a+l+1);let f=rX().createHash(n.algorithm.hash.name.replace("-","")).update(u.toUint8Array(e.label||new Uint8Array(0))).digest();d.set(f,0),d[a+l]=1,rX().randomFillSync(h);let p=this.mgf1(n.algorithm.hash,h,d.length);for(let e=0;e<d.length;e++)d[e]^=p[e];let y=this.mgf1(n.algorithm.hash,d,h.length);for(let e=0;e<h.length;e++)h[e]^=y[e];return n.pem||(n.pem=`-----BEGIN PUBLIC KEY-----
${n.data.toString("base64")}
-----END PUBLIC KEY-----`),new Uint8Array(rX().publicEncrypt({key:n.pem,padding:rX().constants.RSA_NO_PADDING},Buffer.from(c))).buffer}async onDecrypt(e,t,r){let n=r6(t),i=Math.ceil(n.algorithm.modulusLength>>3),s=nS.size(n.algorithm.hash)>>3;if(r.byteLength!==i)throw Error("Bad data");n.pem||(n.pem=`-----BEGIN PRIVATE KEY-----
${n.data.toString("base64")}
-----END PRIVATE KEY-----`);let a=rX().privateDecrypt({key:n.pem,padding:rX().constants.RSA_NO_PADDING},Buffer.from(r)),o=a[0],l=a.subarray(1,s+1),c=a.subarray(s+1);if(0!==o)throw Error("Decryption failed");let h=this.mgf1(n.algorithm.hash,c,l.length);for(let e=0;e<l.length;e++)l[e]^=h[e];let d=this.mgf1(n.algorithm.hash,l,c.length);for(let e=0;e<c.length;e++)c[e]^=d[e];let f=rX().createHash(n.algorithm.hash.name.replace("-","")).update(u.toUint8Array(e.label||new Uint8Array(0))).digest();for(let e=0;e<s;e++)if(f[e]!==c[e])throw Error("Decryption failed");let p=s;for(;p<c.length;p++){let e=c[p];if(1===e)break;if(0!==e)throw Error("Decryption failed")}if(p===c.length)throw Error("Decryption failed");return new Uint8Array(a=c.subarray(p+1)).buffer}async onExportKey(e,t){return nb.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await nb.importKey(e,t,{...r,name:this.name},n,i))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r6(e);if(!(r instanceof ng||r instanceof nm))throw TypeError("key: Is not RSA CryptoKey")}mgf1(e,t,r=0){let n=nS.size(e)>>3,i=new Uint8Array(r),s=new Uint8Array(4),a=Math.ceil(r/n);for(let r=0;r<a;r++){s[0]=r>>>24,s[1]=r>>>16&255,s[2]=r>>>8&255,s[3]=255&r;let a=i.subarray(r*n),o=rX().createHash(e.name.replace("-","")).update(t).update(s).digest();o.length>a.length&&(o=o.subarray(0,a.length)),a.set(o)}return i}}class nk extends tH{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(e,t,r){let n=await nb.generateKey({...e,name:this.name},t,r);return{privateKey:r5(n.privateKey),publicKey:r5(n.publicKey)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let t=g.ToBase64(e.publicExponent);if("Aw=="!==t&&"AQAB"!==t)throw TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(e,t,r){let n=this.toCryptoOptions(t),i=rY.publicEncrypt(n,new Uint8Array(r));return new Uint8Array(i).buffer}async onDecrypt(e,t,r){let n=this.toCryptoOptions(t),i=rY.privateDecrypt(n,new Uint8Array(r));return new Uint8Array(i).buffer}async onExportKey(e,t){return nb.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await nb.importKey(e,t,{...r,name:this.name},n,i))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r6(e);if(!(r instanceof ng||r instanceof nm))throw TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(e){let t=e.type.toUpperCase();return{key:`-----BEGIN ${t} KEY-----
${r6(e).data.toString("base64")}
-----END ${t} KEY-----`,padding:rY.constants.RSA_PKCS1_PADDING}}}let n_={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function nE(e){let t=n_[e];if(!t)throw new t$(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class nB extends r8{constructor(){super(...arguments),this.type="private"}getKey(){let e=tp.parse(this.data,rL.PrivateKeyInfo);return tp.parse(e.privateKey,rL.EcPrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){if(!e.crv)throw new t$("Cannot get named curve from JWK. Property 'crv' is required");let t=new rL.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",t.privateKeyAlgorithm.parameters=ty.serialize(new rL.ObjectIdentifier(nE(e.crv)));let r=tU.fromJSON(e,{targetSchema:rL.EcPrivateKey});return t.privateKey=ty.serialize(r),this.data=Buffer.from(ty.serialize(t)),this}}class nC extends r8{constructor(){super(...arguments),this.type="public"}getKey(){let e=tp.parse(this.data,rL.PublicKeyInfo);return new rL.EcPublicKey(e.publicKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){if(!e.crv)throw new t$("Cannot get named curve from JWK. Property 'crv' is required");let t=tU.fromJSON(e,{targetSchema:rL.EcPublicKey}),r=new rL.PublicKeyInfo;return r.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",r.publicKeyAlgorithm.parameters=ty.serialize(new rL.ObjectIdentifier(nE(e.crv))),r.publicKey=ty.toASN(t).valueHex,this.data=Buffer.from(ty.serialize(r)),this}}class nT extends tH{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(e,t){return nS.digest(e,t)}}class nx extends tH{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(e,t){return nS.digest(e,t)}}class nR extends tH{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(e,t){return nS.digest(e,t)}}class nP extends tH{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(e,t){return nS.digest(e,t)}}class nO extends tH{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(e,t){return nS.digest(e,t)}}class nN extends tH{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(e,t){return nS.digest(e,t)}}class nI extends tH{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(e,t){return nS.digest(e,t)}}class nK{static async generateKey(e,t,r){let n=new nB;n.algorithm=e,n.extractable=t,n.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let i=new nC;i.algorithm=e,i.extractable=!0,i.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let s=rX().generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(e.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=s.privateKey,i.data=s.publicKey,{privateKey:n,publicKey:i}}static async sign(e,t,r){let n=nS.getAlgorithmName(e.hash),i=rX().createSign(n);i.update(Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let s={key:t.pem},a=i.sign(s),o=tp.parse(a,rL.EcDsaSignature);return rh.encodeSignature(o,rj.get(t.algorithm.namedCurve).size).buffer}static async verify(e,t,r,n){let i=nS.getAlgorithmName(e.hash),s=rX().createVerify(i);s.update(Buffer.from(n)),t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:t.pem},o=new rL.EcDsaSignature,l=rj.get(t.algorithm.namedCurve),c=rh.decodeSignature(r,l.size);o.r=u.toArrayBuffer(c.r),o.s=u.toArrayBuffer(c.s);let h=Buffer.from(ty.serialize(o));return s.verify(a,h)}static async deriveBits(e,t,r){let n=this.getOpenSSLNamedCurve(t.algorithm.namedCurve),i=rX().createECDH(n),s=tp.parse(t.data,rL.PrivateKeyInfo),a=tp.parse(s.privateKey,rL.EcPrivateKey);i.setPrivateKey(Buffer.from(a.privateKey));let o=tp.parse(e.public.data,rL.PublicKeyInfo),l=i.computeSecret(Buffer.from(o.publicKey));return null===r?l:new Uint8Array(l).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":return tp.parse(t.data,rL.PublicKeyInfo).publicKey;default:throw new t$("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":if(t.d){let e=tU.fromJSON(t,{targetSchema:rL.EcPrivateKey});return this.importPrivateKey(e,r,n,i)}{let e=tU.fromJSON(t,{targetSchema:rL.EcPublicKey});return this.importPublicKey(e,r,n,i)}case"raw":{let e=new rL.EcPublicKey(t);return this.importPublicKey(e,r,n,i)}case"spki":{let e=tp.parse(new Uint8Array(t),rL.PublicKeyInfo),s=new rL.EcPublicKey(e.publicKey);return this.assertKeyParameters(e.publicKeyAlgorithm.parameters,r.namedCurve),this.importPublicKey(s,r,n,i)}case"pkcs8":{let e=tp.parse(new Uint8Array(t),rL.PrivateKeyInfo),s=tp.parse(e.privateKey,rL.EcPrivateKey);return this.assertKeyParameters(e.privateKeyAlgorithm.parameters,r.namedCurve),this.importPrivateKey(s,r,n,i)}default:throw new t$("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(e,t){if(!e)throw new tj("Key info doesn't have required parameters");let r="";try{r=tp.parse(e,rL.ObjectIdentifier).value}catch(e){throw new tj("Cannot read key info parameters")}if(nE(t)!==r)throw new tj("Key info parameter doesn't match to named curve")}static async importPrivateKey(e,t,r,n){let i=new rL.PrivateKeyInfo;i.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",i.privateKeyAlgorithm.parameters=ty.serialize(new rL.ObjectIdentifier(nE(t.namedCurve))),i.privateKey=ty.serialize(e);let s=new nB;return s.data=Buffer.from(ty.serialize(i)),s.algorithm=Object.assign({},t),s.extractable=r,s.usages=n,s}static async importPublicKey(e,t,r,n){let i=new rL.PublicKeyInfo;i.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let s=nE(t.namedCurve);i.publicKeyAlgorithm.parameters=ty.serialize(new rL.ObjectIdentifier(s)),i.publicKey=e.value;let a=new nC;return a.data=Buffer.from(ty.serialize(i)),a.algorithm=Object.assign({},t),a.extractable=r,a.usages=n,a}static getOpenSSLNamedCurve(e){switch(e.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return e}}}nK.publicKeyUsages=["verify"],nK.privateKeyUsages=["sign","deriveKey","deriveBits"];class nU extends t8{constructor(){super(...arguments),this.namedCurves=rj.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let n=await nK.generateKey({...e,name:this.name},t,r);return{privateKey:r5(n.privateKey),publicKey:r5(n.publicKey)}}async onSign(e,t,r){return nK.sign(e,r6(t),new Uint8Array(r))}async onVerify(e,t,r,n){return nK.verify(e,r6(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return nK.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await nK.importKey(e,t,{...r,name:this.name},n,i))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r6(e);if(!(r instanceof nB||r instanceof nC))throw TypeError("key: Is not EC CryptoKey")}}class nL extends t6{constructor(){super(...arguments),this.namedCurves=rj.names}async onGenerateKey(e,t,r){let n=await nK.generateKey({...e,name:this.name},t,r);return{privateKey:r5(n.privateKey),publicKey:r5(n.publicKey)}}async onExportKey(e,t){return nK.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await nK.importKey(e,t,{...r,name:this.name},n,i))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r6(e);if(!(r instanceof nB||r instanceof nC))throw TypeError("key: Is not EC CryptoKey")}async onDeriveBits(e,t,r){return await nK.deriveBits({...e,public:r6(e.public)},r6(t),r)}}let nj={[rL.idEd448]:"Ed448",ed448:rL.idEd448,[rL.idX448]:"X448",x448:rL.idX448,[rL.idEd25519]:"Ed25519",ed25519:rL.idEd25519,[rL.idX25519]:"X25519",x25519:rL.idX25519};function nD(e){let t=nj[e.toLowerCase()];if(!t)throw new t$(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class nM extends r8{constructor(){super(...arguments),this.type="private"}getKey(){let e=tp.parse(this.data,rL.PrivateKeyInfo);return tp.parse(e.privateKey,rL.CurvePrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){if(!e.crv)throw new t$("Cannot get named curve from JWK. Property 'crv' is required");let t=new rL.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=nD(e.crv);let r=tU.fromJSON(e,{targetSchema:rL.CurvePrivateKey});return t.privateKey=ty.serialize(r),this.data=Buffer.from(ty.serialize(t)),this}}class n$ extends r8{constructor(){super(...arguments),this.type="public"}getKey(){return tp.parse(this.data,rL.PublicKeyInfo).publicKey}toJSON(){let e=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},{x:g.ToBase64Url(e)})}fromJSON(e){if(!e.crv)throw new t$("Cannot get named curve from JWK. Property 'crv' is required");if(!e.x)throw new t$("Cannot get property from JWK. Property 'x' is required");let t=new rL.PublicKeyInfo;return t.publicKeyAlgorithm.algorithm=nD(e.crv),t.publicKey=g.FromBase64Url(e.x),this.data=Buffer.from(ty.serialize(t)),this}}class nq{static async generateKey(e,t,r){let n=new nM;n.algorithm=e,n.extractable=t,n.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let i=new n$;i.algorithm=e,i.extractable=!0,i.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let s=e.namedCurve.toLowerCase(),a=rX().generateKeyPairSync(s,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return n.data=a.privateKey,i.data=a.publicKey,{privateKey:n,publicKey:i}}static async sign(e,t,r){t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let n={key:t.pem},i=rX().sign(null,Buffer.from(r),n);return u.toArrayBuffer(i)}static async verify(e,t,r,n){t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let i={key:t.pem};return rX().verify(null,Buffer.from(n),i,Buffer.from(r))}static async deriveBits(e,t,r){let n=rX().createPublicKey({key:e.public.data,format:"der",type:"spki"}),i=rX().createPrivateKey({key:t.data,format:"der",type:"pkcs8"});return new Uint8Array(rX().diffieHellman({publicKey:n,privateKey:i})).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":return tp.parse(t.data,rL.PublicKeyInfo).publicKey;default:throw new t$("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,n,i){switch(e.toLowerCase()){case"jwk":if(t.d){let e=tU.fromJSON(t,{targetSchema:rL.CurvePrivateKey});return this.importPrivateKey(e,r,n,i)}if(!t.x)throw TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(g.FromBase64Url(t.x),r,n,i);case"raw":return this.importPublicKey(t,r,n,i);case"spki":{let e=tp.parse(new Uint8Array(t),rL.PublicKeyInfo);return this.importPublicKey(e.publicKey,r,n,i)}case"pkcs8":{let e=tp.parse(new Uint8Array(t),rL.PrivateKeyInfo),s=tp.parse(e.privateKey,rL.CurvePrivateKey);return this.importPrivateKey(s,r,n,i)}default:throw new t$("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(e,t,r,n){let i=new nM;return i.fromJSON({crv:t.namedCurve,d:g.ToBase64Url(e.d)}),i.algorithm=Object.assign({},t),i.extractable=r,i.usages=n,i}static async importPublicKey(e,t,r,n){let i=new n$;return i.fromJSON({crv:t.namedCurve,x:g.ToBase64Url(e)}),i.algorithm=Object.assign({},t),i.extractable=r,i.usages=n,i}}nq.publicKeyUsages=["verify"],nq.privateKeyUsages=["sign","deriveKey","deriveBits"];class nH extends t9{async onGenerateKey(e,t,r){let n=await nq.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,r);return{privateKey:r5(n.privateKey),publicKey:r5(n.publicKey)}}async onSign(e,t,r){return nq.sign(e,r6(t),new Uint8Array(r))}async onVerify(e,t,r,n){return nq.verify(e,r6(t),new Uint8Array(r),new Uint8Array(n))}async onExportKey(e,t){return nq.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await nq.importKey(e,t,{...r,name:this.name},n,i))}}class nz extends t5{async onGenerateKey(e,t,r){let n=await nq.generateKey({name:this.name,namedCurve:e.namedCurve.toUpperCase()},t,r);return{privateKey:r5(n.privateKey),publicKey:r5(n.publicKey)}}async onDeriveBits(e,t,r){return await nq.deriveBits({...e,public:r6(e.public)},r6(t),r)}async onExportKey(e,t){return nq.exportKey(e,r6(t))}async onImportKey(e,t,r,n,i){return r5(await nq.importKey(e,t,{...r,name:this.name},n,i))}}class nV extends r1{}class nF extends rM{async onDeriveBits(e,t,r){return new Promise((n,i)=>{let s=u.toArrayBuffer(e.salt),a=e.hash.name.replace("-","");rX().pbkdf2(r6(t).data,Buffer.from(s),e.iterations,r>>3,a,(e,t)=>{e?i(e):n(new Uint8Array(t).buffer)})})}async onImportKey(e,t,r,n,i){if("raw"===e){let e=new nV;return e.data=Buffer.from(t),e.algorithm={name:this.name},e.extractable=!1,e.usages=i,r5(e)}throw new t$("format: Must be 'raw'")}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof nV))throw TypeError("key: Is not PBKDF CryptoKey")}}class nW extends r1{get alg(){let e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}}(0,rZ.Cg)([tL({name:"k",converter:r0})],nW.prototype,"data",void 0);class nJ extends rD{async onGenerateKey(e,t,r){let n=(e.length||this.getDefaultLength(e.hash.name))>>3<<3,i=new nW;return i.algorithm={...e,length:n,name:this.name},i.extractable=t,i.usages=r,i.data=rX().randomBytes(n>>3),r5(i)}async onSign(e,t,r){let n=nS.getAlgorithmName(t.algorithm.hash);return new Uint8Array(rX().createHmac(n,r6(t).data).update(Buffer.from(r)).digest()).buffer}async onVerify(e,t,r,n){let i=nS.getAlgorithmName(t.algorithm.hash);return 0===rX().createHmac(i,r6(t).data).update(Buffer.from(n)).digest().compare(Buffer.from(r))}async onImportKey(e,t,r,n,i){let s;switch(e.toLowerCase()){case"jwk":s=tU.fromJSON(t,{targetSchema:nW});break;case"raw":(s=new nW).data=Buffer.from(t);break;default:throw new t$("format: Must be 'jwk' or 'raw'")}return s.algorithm={hash:{name:r.hash.name},name:this.name,length:s.data.length<<3},s.extractable=n,s.usages=i,r5(s)}async onExportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(r6(t));case"raw":return new Uint8Array(r6(t).data).buffer;default:throw new t$("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof nW))throw TypeError("key: Is not HMAC CryptoKey")}}class nG extends r1{}class nY extends r${async onImportKey(e,t,r,n,i){if("raw"!==e.toLowerCase())throw new t$("Operation not supported");let s=new nG;return s.data=Buffer.from(t),s.algorithm={name:this.name},s.extractable=n,s.usages=i,r5(s)}async onDeriveBits(e,t,r){let n=e.hash.name.replace("-",""),i=rX().createHash(n).digest().length,s=r/8,a=u.toUint8Array(e.info),o=rX().createHmac(n,u.toUint8Array(e.salt)).update(u.toUint8Array(r6(t).data)).digest(),l=[Buffer.alloc(0)],c=Math.ceil(s/i)+1;for(let e=1;e<c;++e)l.push(rX().createHmac(n,o).update(Buffer.concat([l[e-1],a,Buffer.from([e])])).digest());return Buffer.concat(l).slice(0,s)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r6(e)instanceof nG))throw TypeError("key: Is not HKDF CryptoKey")}}class nX{static digest(e,t){return new Uint8Array(rX().createHash(e.name.toLowerCase(),{outputLength:e.length}).update(Buffer.from(t)).digest()).buffer}}class nQ extends rH{async onDigest(e,t){return nX.digest(e,t)}}class nZ extends rz{async onDigest(e,t){return nX.digest(e,t)}}class n0 extends rG{constructor(){var e;super(),this.providers.set(new r7),this.providers.set(new no),this.providers.set(new nl),this.providers.set(new na),this.providers.set(new nu),this.providers.set(new nc),this.providers.set(new nf),this.providers.set(new np),this.providers.set(new nw),this.providers.set(new nv),this.providers.set(new nA),this.providers.set(new nk),this.providers.set(new nU),this.providers.set(new nL),this.providers.set(new nT),this.providers.set(new nx),this.providers.set(new nR),this.providers.set(new nP),this.providers.set(new nF),this.providers.set(new nJ),this.providers.set(new nY);let t=null==(e=/^v(\d+)/.exec(rQ.version))?void 0:e[1];t&&parseInt(t,10)>=12&&(this.providers.set(new nQ),this.providers.set(new nZ));let r=rY.getHashes();r.includes("sha3-256")&&this.providers.set(new nO),r.includes("sha3-384")&&this.providers.set(new nN),r.includes("sha3-512")&&this.providers.set(new nI),t&&parseInt(t,10)>=14&&(this.providers.set(new nH),this.providers.set(new nz))}}class n1 extends rV{constructor(){super(...arguments),this.subtle=new n0}getRandomValues(e){if(!ArrayBuffer.isView(e))throw TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let t=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return rX().randomFillSync(t),e}}},44999:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__esModule:()=>n.B,cookies:()=>n.U,draftMode:()=>s.r,headers:()=>i.b});var n=r(99933),i=r(86280),s=r(73913)},48976:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return n}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},49270:(e,t,r)=>{"use strict";r.d(t,{AG:()=>a,IK:()=>c,Sg:()=>i,de:()=>l,sd:()=>o,st:()=>n,vN:()=>s,vf:()=>u});let n=`
Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl.

1) With middleware
   e.g. export default withClerkMiddleware(req => {...}, {domain:'YOUR_DOMAIN',isSatellite:true});
2) With environment variables e.g.
   NEXT_PUBLIC_CLERK_DOMAIN='YOUR_DOMAIN'
   NEXT_PUBLIC_CLERK_IS_SATELLITE='true'
   `,i=`
Invalid signInUrl. A satellite application requires a signInUrl for development instances.
Check if signInUrl is missing from your configuration or if it is not an absolute URL

1) With middleware
   e.g. export default withClerkMiddleware(req => {...}, {signInUrl:'SOME_URL',isSatellite:true});
2) With environment variables e.g.
   NEXT_PUBLIC_CLERK_SIGN_IN_URL='SOME_URL'
   NEXT_PUBLIC_CLERK_IS_SATELLITE='true'`,s=(e,t)=>`Clerk: The middleware was skipped for this request URL: ${e}. For performance reasons, it's recommended to your middleware matcher to:
export const config = {
  matcher: ${t},
};

Alternatively, you can set your own ignoredRoutes. See https://clerk.com/docs/nextjs/middleware
(This log only appears in development mode)
`,a=()=>o("getAuth"),o=(e="auth")=>`Clerk: ${e}() was called but Clerk can't detect usage of authMiddleware(). Please ensure the following:
- authMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/docs/quickstarts/nextjs
`,l=e=>`Clerk: Clock skew detected. This usually means that your system clock is inaccurate. Clerk will continuously try to issue new tokens, as the existing ones will be treated as "expired" due to clock skew.

To resolve this issue, make sure your system's clock is set to the correct time (e.g. turn off and on automatic time synchronization).

---

${e}`,u=()=>`Clerk: Infinite redirect loop detected. That usually means that we were not able to determine the auth state for this request. A list of common causes and solutions follows.

Reason 1:
Your Clerk instance keys are incorrect, or you recently changed keys (Publishable Key, Secret Key).
How to resolve:
-> Make sure you're using the correct keys from the Clerk Dashboard. If you changed keys recently, make sure to clear your browser application data and cookies.

Reason 2:
A bug that may have already been fixed in the latest version of Clerk NextJS package.
How to resolve:
-> Make sure you are using the latest version of '@clerk/nextjs' and 'next'.
`,c=(e,t,r,n,i)=>{let s=n?`INFO: Clerk: The request to ${e} is being protected (401) because there is no signed-in user, and the path is included in \`apiRoutes\`. To prevent this behavior, choose one of:`:`INFO: Clerk: The request to ${e} is being redirected because there is no signed-in user, and the path is not included in \`ignoredRoutes\` or \`publicRoutes\`. To prevent this behavior, choose one of:`,a=n?`To prevent Clerk authentication from protecting (401) the api route, remove the rule matching "${e}" from the \`apiRoutes\` array passed to authMiddleware`:void 0,o=t?`To make the route accessible to both signed in and signed out users, add "${e}" to the \`publicRoutes\` array passed to authMiddleware`:`To make the route accessible to both signed in and signed out users, pass \`publicRoutes: ["${e}"]\` to authMiddleware`,l=[...i,e].map(e=>`"${e}"`).join(", "),u=r?`To prevent Clerk authentication from running at all, add "${e}" to the \`ignoredRoutes\` array passed to authMiddleware`:`To prevent Clerk authentication from running at all, pass \`ignoredRoutes: [${l}]\` to authMiddleware`;return`${s}

${[a,o,u,"Pass a custom `afterAuth` to authMiddleware, and replace Clerk's default behavior of redirecting unless a route is included in publicRoutes"].filter(Boolean).map((e,t)=>`${t+1}. ${e}`).join("\n")}

For additional information about middleware, please visit https://clerk.com/docs/nextjs/middleware
(This log only appears in development mode, or if \`debug: true\` is passed to authMiddleware)`}},49534:(e,t,r)=>{"use strict";r.r(t),r.d(t,{snakeCase:()=>l});var n=r(13476);function i(e){return e.toLowerCase()}var s=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],a=/[^A-Z0-9]+/gi;function o(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(e,t){return e.replace(t,r)},e)}function l(e,t){var r;return void 0===t&&(t={}),void 0===(r=(0,n.Cl)({delimiter:"_"},t))&&(r={}),function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,n=t.stripRegexp,l=t.transform,u=t.delimiter,c=o(o(e,void 0===r?s:r,"$1\0$2"),void 0===n?a:n,"\0"),h=0,d=c.length;"\0"===c.charAt(h);)h++;for(;"\0"===c.charAt(d-1);)d--;return c.slice(h,d).split("\0").map(void 0===l?i:l).join(void 0===u?" ":u)}(e,(0,n.Cl)({delimiter:"."},r))}},51691:(e,t,r)=>{"use strict";var n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty},62765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return i}});let n=""+r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function i(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},70386:(e,t,r)=>{"use strict";r.d(t,{Lx:()=>o,W1:()=>l,io:()=>a});var n=()=>!1,i=()=>{try{return!0}catch(e){}return!1},s=new Set,a=(e,t,r)=>{let a=n()||i(),o=null!=r?r:e;s.has(o)||a||(s.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${t}`))},o=(e,t,r,n=!1)=>{let i=n?e:e.prototype,s=i[t];Object.defineProperty(i,t,{get:()=>(a(t,r,`${e.name}:${t}`),s),set(e){s=e}})},l=(e,t,r,n)=>{let i=e[t];Object.defineProperty(e,t,{get:()=>(a(t,r,n),i),set(e){i=e}})}},70899:(e,t,r)=>{"use strict";function n(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return n}}),r(8704).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},71042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,a.isNextRouterError)(t)||(0,s.isBailoutToCSRError)(t)||(0,l.isDynamicServerError)(t)||(0,o.isDynamicPostpone)(t)||(0,i.isPostpone)(t)||(0,n.isHangingPromiseRejectionError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let n=r(68388),i=r(52637),s=r(51846),a=r(31162),o=r(84971),l=r(98479);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},73832:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n={Headers:{NextRewrite:"x-middleware-rewrite",NextResume:"x-middleware-next",NextRedirect:"Location"}}},73913:(e,t,r)=>{"use strict";Object.defineProperty(t,"r",{enumerable:!0,get:function(){return u}});let n=r(63033),i=r(29294),s=r(84971),a=r(76926),o=r(80023),l=r(98479);function u(){let e=i.workAsyncStorage.getStore(),t=n.workUnitAsyncStorage.getStore();switch((!e||!t)&&(0,n.throwForMissingRequestStore)("draftMode"),t.type){case"request":return c(t.draftMode,e);case"cache":case"unstable-cache":let r=(0,n.getDraftModeProviderForCacheScope)(e,t);if(r)return c(r,e);case"prerender":case"prerender-ppr":case"prerender-legacy":return d(null);default:return t}}function c(e,t){let r,n=h.get(u);return n||(r=d(e),h.set(e,r),r)}let h=new WeakMap;function d(e){let t=new f(e),r=Promise.resolve(t);return Object.defineProperty(r,"isEnabled",{get:()=>t.isEnabled,set(e){Object.defineProperty(r,"isEnabled",{value:e,writable:!0,enumerable:!0})},enumerable:!0,configurable:!0}),r.enable=t.enable.bind(t),r.disable=t.disable.bind(t),r}class f{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){y("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){y("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}let p=(0,a.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})});function y(e){let t=i.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});else if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});else if("after"===r.phase)throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(r){if("prerender"===r.type){let n=Object.defineProperty(Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});(0,s.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,n,r)}else if("prerender-ppr"===r.type)(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let n=Object.defineProperty(new l.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}}}}},76463:(e,t,r)=>{"use strict";let n=r(91026),{snakeCase:i}=r(49534);e.exports=function(e,t){return n(e,function(e,r){var n,s;return[(n=t.exclude,s=e,n.some(function(e){return"string"==typeof e?e===s:e.test(s)}))?e:i(e,t.parsingOptions),r]},t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t))}},81309:(e,t,r)=>{let{fetch:n,Blob:i,FormData:s,Headers:a,Request:o,Response:l,AbortController:u}=r(2880);e.exports=n,e.exports.RuntimeBlob=i,e.exports.RuntimeFormData=s,e.exports.RuntimeHeaders=a,e.exports.RuntimeRequest=o,e.exports.RuntimeResponse=l,e.exports.RuntimeAbortController=u,e.exports.RuntimeFetch=n},86280:(e,t,r)=>{"use strict";Object.defineProperty(t,"b",{enumerable:!0,get:function(){return h}});let n=r(92584),i=r(29294),s=r(63033),a=r(84971),o=r(80023),l=r(68388),u=r(76926),c=(r(44523),r(8719));function h(){let e=i.workAsyncStorage.getStore(),t=s.workUnitAsyncStorage.getStore();if(e){if(t&&"after"===t.phase&&!(0,c.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(e.forceStatic)return f(n.HeadersAdapter.seal(new Headers({})));if(t){if("cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});else if("unstable-cache"===t.type)throw Object.defineProperty(Error(`Route ${e.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(e.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(t)if("prerender"===t.type){var r=e.route,u=t;let n=d.get(u);if(n)return n;let i=(0,l.makeHangingPromise)(u.renderSignal,"`headers()`");return d.set(u,i),Object.defineProperties(i,{append:{value:function(){let e=`\`headers().append(${p(arguments[0])}, ...)\``,t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},delete:{value:function(){let e=`\`headers().delete(${p(arguments[0])})\``,t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},get:{value:function(){let e=`\`headers().get(${p(arguments[0])})\``,t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},has:{value:function(){let e=`\`headers().has(${p(arguments[0])})\``,t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},set:{value:function(){let e=`\`headers().set(${p(arguments[0])}, ...)\``,t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},getSetCookie:{value:function(){let e="`headers().getSetCookie()`",t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},forEach:{value:function(){let e="`headers().forEach(...)`",t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},keys:{value:function(){let e="`headers().keys()`",t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},values:{value:function(){let e="`headers().values()`",t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},entries:{value:function(){let e="`headers().entries()`",t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}},[Symbol.iterator]:{value:function(){let e="`headers()[Symbol.iterator]()`",t=g(r,e);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r,e,t,u)}}}),i}else"prerender-ppr"===t.type?(0,a.postponeWithTracking)(e.route,"headers",t.dynamicTracking):"prerender-legacy"===t.type&&(0,a.throwToInterruptStaticGeneration)("headers",e,t);(0,a.trackDynamicDataInDynamicRender)(e,t)}return f((0,s.getExpectedRequestStore)("headers").headers)}let d=new WeakMap;function f(e){let t=d.get(e);if(t)return t;let r=Promise.resolve(e);return d.set(e,r),Object.defineProperties(r,{append:{value:e.append.bind(e)},delete:{value:e.delete.bind(e)},get:{value:e.get.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},getSetCookie:{value:e.getSetCookie.bind(e)},forEach:{value:e.forEach.bind(e)},keys:{value:e.keys.bind(e)},values:{value:e.values.bind(e)},entries:{value:e.entries.bind(e)},[Symbol.iterator]:{value:e[Symbol.iterator].bind(e)}}),r}function p(e){return"string"==typeof e?`'${e}'`:"..."}let y=(0,u.createDedupedByCallsiteServerErrorLoggerDev)(g);function g(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})}},86897:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return a},getRedirectStatusCodeFromError:function(){return h},getRedirectTypeFromError:function(){return c},getURLFromRedirectError:function(){return u},permanentRedirect:function(){return l},redirect:function(){return o}});let n=r(52836),i=r(49026),s=r(19121).actionAsyncStorage;function a(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let s=Object.defineProperty(Error(i.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s.digest=i.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",s}function o(e,t){var r;throw null!=t||(t=(null==s||null==(r=s.getStore())?void 0:r.isAction)?i.RedirectType.push:i.RedirectType.replace),a(e,t,n.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t=i.RedirectType.replace),a(e,t,n.RedirectStatusCode.PermanentRedirect)}function u(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function c(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function h(e){if(!(0,i.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},88443:(e,t,r)=>{"use strict";r.d(t,{j:()=>f,u:()=>p});var n=r(10773),i=r(5020),s=r(22580);let a=(e,t={})=>{let r,a=(0,s.NE)(e,"AuthToken"),o=(0,s.NE)(e,"AuthStatus"),l=(0,s.NE)(e,"AuthMessage"),u=(0,s.NE)(e,"AuthReason"),c={apiKey:i.Lq,secretKey:i.rB,apiUrl:i.H$,apiVersion:i.mG,authStatus:o,authMessage:l,authReason:u};if(o&&o===n.TD.SignedIn){let{payload:e,raw:t}=(0,n.iU)(a);r=(0,n.Z5)(e,{...c,token:t.text})}else r=(0,n.wI)(c);let h=(0,n.pY)((0,n.LS)({...r,...t}));return(0,s.K_)({},h)};var o=r(1632),l=r(18492),u=r(49270);let c=({debugLoggerName:e,noAuthStatusMessage:t})=>(0,l.V)(e,e=>(r,a)=>{"true"===(0,s._b)(r,n.AA.Headers.EnableDebug)&&e.enable();let l=(0,s.NE)(r,"AuthToken"),u=(0,s.NE)(r,"AuthStatus"),c=(0,s.NE)(r,"AuthMessage"),h=(0,s.NE)(r,"AuthReason");if(e.debug("Debug",{authReason:h,authMessage:c,authStatus:u,authToken:l}),!u)throw Error(t);let d={apiKey:(null==a?void 0:a.apiKey)||i.Lq,authStatus:u,authMessage:c,secretKey:(null==a?void 0:a.secretKey)||i.rB,authReason:h,authToken:l,apiUrl:i.H$,apiVersion:i.mG};if(e.debug("Options debug",d),u!==n.TD.SignedIn)return(0,n.wI)(d);let f=(0,n.iU)(l);e.debug("JWT debug",f.raw.text);let p=(0,n.Z5)(f.payload,{...d,token:f.raw.text});return p&&(p.user&&(0,o.W1)(p,"user","Use `clerkClient.users.getUser` instead."),p.organization&&(0,o.W1)(p,"organization","Use `clerkClient.organizations.getOrganization` instead."),p.session&&(0,o.W1)(p,"session","Use `clerkClient.sessions.getSession` instead.")),p});c({debugLoggerName:"getAuth()",noAuthStatusMessage:(0,u.AG)()});var h=r(32190);let d=()=>{try{let{headers:e}=r(44999);return new h.NextRequest("https://placeholder.com",{headers:e()})}catch(e){if(e&&"message"in e&&"string"==typeof e.message&&e.message.toLowerCase().includes("dynamic server usage"))throw e;throw Error(`Clerk: auth() and currentUser() are only supported in App Router (/app directory).
If you're using /pages, try getAuth() instead.
Original error: ${e}`)}},f=()=>{let e=c({debugLoggerName:"auth()",noAuthStatusMessage:(0,u.sd)()})(d()),{notFound:t,redirect:n}=r(39916);return e.protect=(r,i)=>{let s=(null==r?void 0:r.redirectUrl)?void 0:r,a=(null==r?void 0:r.redirectUrl)||(null==i?void 0:i.redirectUrl),o=()=>{a&&n(a),t()};return e.userId?s?"function"==typeof s?s(e.has)?{...e}:o():e.has(s)?{...e}:o():{...e}:o()},e},p=()=>a(d())},91026:e=>{"use strict";let t=e=>"object"==typeof e&&null!==e,r=Symbol("skip"),n=e=>t(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),i=(e,t,s,a=new WeakMap)=>{if(s={deep:!1,target:{},...s},a.has(e))return a.get(e);a.set(e,s.target);let{target:o}=s;delete s.target;let l=e=>e.map(e=>n(e)?i(e,t,s,a):e);if(Array.isArray(e))return l(e);for(let[u,c]of Object.entries(e)){let h=t(u,c,e);if(h===r)continue;let[d,f,{shouldRecurse:p=!0}={}]=h;"__proto__"!==d&&(s.deep&&p&&n(f)&&(f=Array.isArray(f)?l(f):i(f,t,s,a)),o[d]=f)}return o};e.exports=(e,r,n)=>{if(!t(e))throw TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return i(e,r,n)},e.exports.mapObjectSkip=r},92332:(e,t,r)=>{"use strict";let n=r(37067),i=r(44708),s=r(16141),a=r(57075),o=r(4573),l=r(57975),u=r(73136),c=r(77030);r(73024),r(76760);var h,d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f={exports:{}};if(!globalThis.ReadableStream)try{let e=r(1708),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,r(37830)),e.emitWarning=t}catch(r){throw e.emitWarning=t,r}}catch(e){Object.assign(globalThis,function(){return h?f.exports:(h=1,function(e){let t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:e=>`Symbol(${e})`;function r(){}let n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==d?d:void 0;function i(e){return"object"==typeof e&&null!==e||"function"==typeof e}let s=Promise,a=Promise.prototype.then,o=Promise.resolve.bind(s),l=Promise.reject.bind(s);function u(e){return new s(e)}function c(e,t,r){return a.call(e,t,r)}function h(e,t,n){c(c(e,t,n),void 0,r)}function f(e,t){h(e,void 0,t)}function p(e){c(e,void 0,r)}let y=(()=>{let e=n&&n.queueMicrotask;if("function"==typeof e)return e;let t=o(void 0);return e=>c(t,e)})();function g(e,t,r){if("function"!=typeof e)throw TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function m(e,t,r){try{var n;return n=g(e,t,r),o(n)}catch(e){return l(e)}}class b{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){let t=this._back,r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){let e=this._front,t=e,r=this._cursor,n=r+1,i=e._elements,s=i[r];return 16384===n&&(t=e._next,n=0),--this._size,this._cursor=n,e!==t&&(this._front=t),i[r]=void 0,s}forEach(e){let t=this._cursor,r=this._front,n=r._elements;for(;(t!==n.length||void 0!==r._next)&&(t!==n.length||(n=(r=r._next)._elements,t=0,0!==n.length));)e(n[t]),++t}peek(){let e=this._front,t=this._cursor;return e._elements[t]}}function w(e,t){var r,n,i;e._ownerReadableStream=t,t._reader=e,"readable"===t._state?k(e):"closed"===t._state?(k(r=e),E(r)):(n=e,i=t._storedError,k(n),_(n,i))}function v(e,t){return tH(e._ownerReadableStream,t)}function S(e){"readable"===e._ownerReadableStream._state?_(e,TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e,t){k(e),_(e,t)}(e,TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function A(e){return TypeError("Cannot "+e+" a stream using a released reader")}function k(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function _(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function E(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let B=t("[[AbortSteps]]"),C=t("[[ErrorSteps]]"),T=t("[[CancelSteps]]"),x=t("[[PullSteps]]"),R=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},P=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function O(e,t){if(void 0!==e&&"object"!=typeof e&&"function"!=typeof e)throw TypeError(`${t} is not an object.`)}function N(e,t){if("function"!=typeof e)throw TypeError(`${t} is not a function.`)}function I(e,t){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw TypeError(`${t} is not an object.`)}function K(e,t,r){if(void 0===e)throw TypeError(`Parameter ${t} is required in '${r}'.`)}function U(e,t,r){if(void 0===e)throw TypeError(`${t} is required in '${r}'.`)}function L(e){return Number(e)}function j(e,t){var r,n;let i=Number.MAX_SAFE_INTEGER,s=Number(e);if(!R(s=0===(r=s)?0:r))throw TypeError(`${t} is not a finite number`);if((s=0===(n=P(s))?0:n)<0||s>i)throw TypeError(`${t} is outside the accepted range of 0 to ${i}, inclusive`);return R(s)&&0!==s?s:0}function D(e,t){if(!t$(e))throw TypeError(`${t} is not a ReadableStream.`)}function M(e){return new V(e)}function $(e,t){e._reader._readRequests.push(t)}function q(e,t,r){let n=e._reader._readRequests.shift();r?n._closeSteps():n._chunkSteps(t)}function H(e){return e._reader._readRequests.length}function z(e){let t=e._reader;return void 0!==t&&!!F(t)}class V{constructor(e){if(K(e,1,"ReadableStreamDefaultReader"),D(e,"First parameter"),tq(e))throw TypeError("This stream has already been locked for exclusive reading by another reader");w(this,e),this._readRequests=new b}get closed(){return F(this)?this._closedPromise:l(J("closed"))}cancel(e){return F(this)?void 0===this._ownerReadableStream?l(A("cancel")):v(this,e):l(J("cancel"))}read(){let e,t;if(!F(this))return l(J("read"));if(void 0===this._ownerReadableStream)return l(A("read from"));let r=u((r,n)=>{e=r,t=n});return W(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!F(this))throw J("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");S(this)}}}function F(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof V}function W(e,t){let r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[x](t)}function J(e){return TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(V.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(V.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});let G=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Y{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){let e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?c(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){let t=()=>this._returnSteps(e);return this._ongoingPromise?c(this._ongoingPromise,t,t):t()}_nextSteps(){let e,t;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let r=this._reader;if(void 0===r._ownerReadableStream)return l(A("iterate"));let n=u((r,n)=>{e=r,t=n});return W(r,{_chunkSteps:t=>{this._ongoingPromise=void 0,y(()=>e({value:t,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,S(r),e({value:void 0,done:!0})},_errorSteps:e=>{this._ongoingPromise=void 0,this._isFinished=!0,S(r),t(e)}}),n}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;let t=this._reader;if(void 0===t._ownerReadableStream)return l(A("finish iterating"));if(!this._preventCancel){let r=v(t,e);return S(t),c(r,()=>({value:e,done:!0}),void 0)}return S(t),o({value:e,done:!0})}}let X={next(){return Q(this)?this._asyncIteratorImpl.next():l(Z("next"))},return(e){return Q(this)?this._asyncIteratorImpl.return(e):l(Z("return"))}};function Q(e){if(!i(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Y}catch(e){return!1}}function Z(e){return TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}void 0!==G&&Object.setPrototypeOf(X,G);let ee=Number.isNaN||function(e){return e!=e};function et(e){return e.slice()}function er(e,t,r,n,i){new Uint8Array(e).set(new Uint8Array(r,n,i),t)}function en(e,t,r){if(e.slice)return e.slice(t,r);let n=r-t,i=new ArrayBuffer(n);return er(i,0,e,t,n),i}function ei(e){return new Uint8Array(en(e.buffer,e.byteOffset,e.byteOffset+e.byteLength))}function es(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ea(e,t,r){if(!(!("number"!=typeof r||ee(r))&&!(r<0)&&1)||r===1/0)throw RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function eo(e){e._queue=new b,e._queueTotalSize=0}class el{constructor(){throw TypeError("Illegal constructor")}get view(){if(!eh(this))throw eN("view");return this._view}respond(e){var t;if(!eh(this))throw eN("respond");if(K(e,1,"respond"),e=j(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");this._view.buffer,eR(this._associatedReadableByteStreamController,e)}respondWithNewView(e){var t;if(!eh(this))throw eN("respondWithNewView");if(K(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");e.buffer,eP(this._associatedReadableByteStreamController,e)}}Object.defineProperties(el.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(el.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class eu{constructor(){throw TypeError("Illegal constructor")}get byobRequest(){if(!ec(this))throw eI("byobRequest");return eT(this)}get desiredSize(){if(!ec(this))throw eI("desiredSize");return ex(this)}close(){if(!ec(this))throw eI("close");if(this._closeRequested)throw TypeError("The stream has already been closed; do not close it again!");let e=this._controlledReadableByteStream._state;if("readable"!==e)throw TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);eE(this)}enqueue(e){if(!ec(this))throw eI("enqueue");if(K(e,1,"enqueue"),!ArrayBuffer.isView(e))throw TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw TypeError("stream is closed or draining");let t=this._controlledReadableByteStream._state;if("readable"!==t)throw TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);eB(this,e)}error(e){if(!ec(this))throw eI("error");eC(this,e)}[T](e){ef(this),eo(this);let t=this._cancelAlgorithm(e);return e_(this),t}[x](e){let t=this._controlledReadableByteStream;if(this._queueTotalSize>0){let t=this._queue.shift();this._queueTotalSize-=t.byteLength,ew(this);let r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);e._chunkSteps(r);return}let r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){e._errorSteps(t);return}let n={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(n)}$(t,e),ed(this)}}function ec(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof eu}function eh(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof el}function ed(e){if(function(e){let t=e._controlledReadableByteStream;return"readable"===t._state&&!e._closeRequested&&!!e._started&&!!(z(t)&&H(t)>0||eL(t)&&eU(t)>0||ex(e)>0)}(e)){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0,h(e._pullAlgorithm(),()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ed(e))},t=>{eC(e,t)})}}function ef(e){ev(e),e._pendingPullIntos=new b}function ep(e,t){let r=!1;"closed"===e._state&&(r=!0);let n=ey(t);"default"===t.readerType?q(e,n,r):function(e,t,r){let n=e._reader._readIntoRequests.shift();r?n._closeSteps(t):n._chunkSteps(t)}(e,n,r)}function ey(e){let t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function eg(e,t,r,n){e._queue.push({buffer:t,byteOffset:r,byteLength:n}),e._queueTotalSize+=n}function em(e,t){let r=t.elementSize,n=t.bytesFilled-t.bytesFilled%r,i=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),s=t.bytesFilled+i,a=s-s%r,o=i,l=!1;a>n&&(o=a-t.bytesFilled,l=!0);let u=e._queue;for(;o>0;){let r=u.peek(),n=Math.min(o,r.byteLength),i=t.byteOffset+t.bytesFilled;er(t.buffer,i,r.buffer,r.byteOffset,n),r.byteLength===n?u.shift():(r.byteOffset+=n,r.byteLength-=n),e._queueTotalSize-=n,eb(e,n,t),o-=n}return l}function eb(e,t,r){r.bytesFilled+=t}function ew(e){0===e._queueTotalSize&&e._closeRequested?(e_(e),tz(e._controlledReadableByteStream)):ed(e)}function ev(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function eS(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;let t=e._pendingPullIntos.peek();em(e,t)&&(ek(e),ep(e._controlledReadableByteStream,t))}}function eA(e,t){let r=e._pendingPullIntos.peek();if(ev(e),"closed"===e._controlledReadableByteStream._state){let t=e._controlledReadableByteStream;if(eL(t))for(;eU(t)>0;)ep(t,ek(e))}else!function(e,t,r){if(eb(e,t,r),r.bytesFilled<r.elementSize)return;ek(e);let n=r.bytesFilled%r.elementSize;if(n>0){let t=r.byteOffset+r.bytesFilled,i=en(r.buffer,t-n,t);eg(e,i,0,i.byteLength)}r.bytesFilled-=n,ep(e._controlledReadableByteStream,r),eS(e)}(e,t,r);ed(e)}function ek(e){return e._pendingPullIntos.shift()}function e_(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function eE(e){let t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let t=TypeError("Insufficient bytes to fill elements in the given buffer");throw eC(e,t),t}e_(e),tz(t)}}function eB(e,t){let r=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==r._state)return;let n=t.buffer,i=t.byteOffset,s=t.byteLength;if(e._pendingPullIntos.length>0){var a;let t=e._pendingPullIntos.peek();t.buffer,t.buffer=t.buffer}ev(e),z(r)?0===H(r)?eg(e,n,i,s):(e._pendingPullIntos.length>0&&ek(e),q(r,new Uint8Array(n,i,s),!1)):eL(r)?(eg(e,n,i,s),eS(e)):eg(e,n,i,s),ed(e)}function eC(e,t){let r=e._controlledReadableByteStream;"readable"===r._state&&(ef(e),eo(e),e_(e),tV(r,t))}function eT(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){var t,r,n;let i=e._pendingPullIntos.peek(),s=new Uint8Array(i.buffer,i.byteOffset+i.bytesFilled,i.byteLength-i.bytesFilled),a=Object.create(el.prototype);t=a,r=e,n=s,t._associatedReadableByteStreamController=r,t._view=n,e._byobRequest=a}return e._byobRequest}function ex(e){let t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function eR(e,t){let r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw RangeError("bytesWritten out of range")}r.buffer=r.buffer,eA(e,t)}function eP(e,t){let r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw RangeError("The region specified by view is larger than byobRequest");let n=t.byteLength;r.buffer=t.buffer,eA(e,n)}function eO(e,t,r,n,i,s,a){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,eo(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=s,t._pullAlgorithm=n,t._cancelAlgorithm=i,t._autoAllocateChunkSize=a,t._pendingPullIntos=new b,e._readableStreamController=t,h(o(r()),()=>{t._started=!0,ed(t)},e=>{eC(t,e)})}function eN(e){return TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function eI(e){return TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}Object.defineProperties(eu.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(eu.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function eK(e,t){e._reader._readIntoRequests.push(t)}function eU(e){return e._reader._readIntoRequests.length}function eL(e){let t=e._reader;return void 0!==t&&!!eD(t)}class ej{constructor(e){if(K(e,1,"ReadableStreamBYOBReader"),D(e,"First parameter"),tq(e))throw TypeError("This stream has already been locked for exclusive reading by another reader");if(!ec(e._readableStreamController))throw TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");w(this,e),this._readIntoRequests=new b}get closed(){return eD(this)?this._closedPromise:l(e$("closed"))}cancel(e){return eD(this)?void 0===this._ownerReadableStream?l(A("cancel")):v(this,e):l(e$("cancel"))}read(e){var t;let r,n;if(!eD(this))return l(e$("read"));if(!ArrayBuffer.isView(e))return l(TypeError("view must be an array buffer view"));if(0===e.byteLength)return l(TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return l(TypeError("view's buffer must have non-zero byteLength"));if(e.buffer,void 0===this._ownerReadableStream)return l(A("read from"));let i=u((e,t)=>{r=e,n=t});return eM(this,e,{_chunkSteps:e=>r({value:e,done:!1}),_closeSteps:e=>r({value:e,done:!0}),_errorSteps:e=>n(e)}),i}releaseLock(){if(!eD(this))throw e$("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");S(this)}}}function eD(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof ej}function eM(e,t,r){let n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?r._errorSteps(n._storedError):function(e,t,r){let n=e._controlledReadableByteStream,i=1;t.constructor!==DataView&&(i=t.constructor.BYTES_PER_ELEMENT);let s=t.constructor,a=t.buffer,o={buffer:a,bufferByteLength:a.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:i,viewConstructor:s,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(o),eK(n,r);return}if("closed"===n._state){let e=new s(o.buffer,o.byteOffset,0);r._closeSteps(e);return}if(e._queueTotalSize>0){if(em(e,o)){let t=ey(o);ew(e),r._chunkSteps(t);return}if(e._closeRequested){let t=TypeError("Insufficient bytes to fill elements in the given buffer");eC(e,t),r._errorSteps(t);return}}e._pendingPullIntos.push(o),eK(n,r),ed(e)}(n._readableStreamController,t,r)}function e$(e){return TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function eq(e,t){let{highWaterMark:r}=e;if(void 0===r)return t;if(ee(r)||r<0)throw RangeError("Invalid highWaterMark");return r}function eH(e){let{size:t}=e;return t||(()=>1)}function ez(e,t){var r;O(e,t);let n=null==e?void 0:e.highWaterMark,i=null==e?void 0:e.size;return{highWaterMark:void 0===n?void 0:L(n),size:void 0===i?void 0:(N(r=i,`${t} has member 'size' that`),e=>L(r(e)))}}function eV(e,t){if(!eG(e))throw TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(ej.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(ej.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});let eF="function"==typeof AbortController;class eW{constructor(e={},t={}){void 0===e?e=null:I(e,"First parameter");let r=ez(t,"Second parameter"),n=function(e,t){var r,n,i,s,a,o,l,u;O(e,t);let c=null==e?void 0:e.abort,h=null==e?void 0:e.close,d=null==e?void 0:e.start,f=null==e?void 0:e.type,p=null==e?void 0:e.write;return{abort:void 0===c?void 0:(r=c,n=e,N(r,`${t} has member 'abort' that`),e=>m(r,n,[e])),close:void 0===h?void 0:(i=h,s=e,N(i,`${t} has member 'close' that`),()=>m(i,s,[])),start:void 0===d?void 0:(a=d,o=e,N(a,`${t} has member 'start' that`),e=>g(a,o,[e])),write:void 0===p?void 0:(l=p,u=e,N(l,`${t} has member 'write' that`),(e,t)=>m(l,u,[e,t])),type:f}}(e,"First parameter");if(eJ(this),void 0!==n.type)throw RangeError("Invalid type is specified");let i=eH(r);!function(e,t,r,n){let i=Object.create(tr.prototype),s=()=>void 0,a=()=>o(void 0),l=()=>o(void 0),u=()=>o(void 0);void 0!==t.start&&(s=()=>t.start(i)),void 0!==t.write&&(a=e=>t.write(e,i)),void 0!==t.close&&(l=()=>t.close()),void 0!==t.abort&&(u=e=>t.abort(e)),ti(e,i,s,a,l,u,r,n)}(this,n,eq(r,1),i)}get locked(){if(!eG(this))throw tc("locked");return eY(this)}abort(e){return eG(this)?eY(this)?l(TypeError("Cannot abort a stream that already has a writer")):eX(this,e):l(tc("abort"))}close(){return eG(this)?eY(this)?l(TypeError("Cannot close a stream that already has a writer")):e2(this)?l(TypeError("Cannot close an already-closing stream")):eQ(this):l(tc("close"))}getWriter(){var e;if(!eG(this))throw tc("getWriter");return e=this,new e4(e)}}function eJ(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new b,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function eG(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof eW}function eY(e){return void 0!==e._writer}function eX(e,t){var r;if("closed"===e._state||"errored"===e._state)return o(void 0);e._writableStreamController._abortReason=t,null==(r=e._writableStreamController._abortController)||r.abort();let n=e._state;if("closed"===n||"errored"===n)return o(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let i=!1;"erroring"===n&&(i=!0,t=void 0);let s=u((r,n)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:n,_reason:t,_wasAlreadyErroring:i}});return e._pendingAbortRequest._promise=s,i||e0(e,t),s}function eQ(e){var t;let r=e._state;if("closed"===r||"errored"===r)return l(TypeError(`The stream (in ${r} state) is not in the writable state and cannot be closed`));let n=u((t,r)=>{e._closeRequest={_resolve:t,_reject:r}}),i=e._writer;return void 0!==i&&e._backpressure&&"writable"===r&&tv(i),ea(t=e._writableStreamController,tt,0),to(t),n}function eZ(e,t){if("writable"===e._state)return void e0(e,t);e1(e)}function e0(e,t){var r;let n=e._writableStreamController;e._state="erroring",e._storedError=t;let i=e._writer;void 0!==i&&e9(i,t),void 0===(r=e)._inFlightWriteRequest&&void 0===r._inFlightCloseRequest&&n._started&&e1(e)}function e1(e){e._state="errored",e._writableStreamController[C]();let t=e._storedError;if(e._writeRequests.forEach(e=>{e._reject(t)}),e._writeRequests=new b,void 0===e._pendingAbortRequest)return void e8(e);let r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring){r._reject(t),e8(e);return}h(e._writableStreamController[B](r._reason),()=>{r._resolve(),e8(e)},t=>{r._reject(t),e8(e)})}function e2(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function e8(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;void 0!==t&&ty(t,e._storedError)}function e3(e,t){let r=e._writer;void 0!==r&&t!==e._backpressure&&(t?tm(r):tv(r)),e._backpressure=t}Object.defineProperties(eW.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(eW.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});class e4{constructor(e){var t,r,n,i,s;if(K(e,1,"WritableStreamDefaultWriter"),eV(e,"First parameter"),eY(e))throw TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;let a=e._state;if("writable"===a){!e2(e)&&e._backpressure?tm(this):(t=this,tm(t),tv(t)),tp(this)}else if("erroring"===a)tb(this,e._storedError),tp(this);else if("closed"===a){r=this,tm(r),tv(r),n=this,tp(n),tg(n)}else{let t=e._storedError;tb(this,t),i=this,s=t,tp(i),ty(i,s)}}get closed(){return e6(this)?this._closedPromise:l(td("closed"))}get desiredSize(){if(!e6(this))throw td("desiredSize");if(void 0===this._ownerWritableStream)throw tf("desiredSize");var e=this;let t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:ta(t._writableStreamController)}get ready(){return e6(this)?this._readyPromise:l(td("ready"))}abort(e){var t,r;if(!e6(this))return l(td("abort"));if(void 0===this._ownerWritableStream)return l(tf("abort"));return t=this,r=e,eX(t._ownerWritableStream,r)}close(){if(!e6(this))return l(td("close"));let e=this._ownerWritableStream;return void 0===e?l(tf("close")):e2(e)?l(TypeError("Cannot close an already-closing stream")):e5(this)}releaseLock(){if(!e6(this))throw td("releaseLock");void 0!==this._ownerWritableStream&&e7(this)}write(e){return e6(this)?void 0===this._ownerWritableStream?l(tf("write to")):te(this,e):l(td("write"))}}function e6(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof e4}function e5(e){return eQ(e._ownerWritableStream)}function e9(e,t){"pending"===e._readyPromiseState?tw(e,t):tb(e,t)}function e7(e){let t=e._ownerWritableStream,r=TypeError("Writer was released and can no longer be used to monitor the stream's closedness");e9(e,r),"pending"===e._closedPromiseState?ty(e,r):function(e,t){tp(e),ty(e,t)}(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function te(e,t){let r=e._ownerWritableStream,n=r._writableStreamController,i=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return tl(e,t),1}}(n,t);if(r!==e._ownerWritableStream)return l(tf("write to"));let s=r._state;if("errored"===s)return l(r._storedError);if(e2(r)||"closed"===s)return l(TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===s)return l(r._storedError);let a=u((e,t)=>{r._writeRequests.push({_resolve:e,_reject:t})});return function(e,t,r){try{ea(e,t,r)}catch(t){tl(e,t);return}let n=e._controlledWritableStream;e2(n)||"writable"!==n._state||e3(n,0>=ta(e)),to(e)}(n,t,i),a}Object.defineProperties(e4.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(e4.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});let tt={};class tr{constructor(){throw TypeError("Illegal constructor")}get abortReason(){if(!tn(this))throw th("abortReason");return this._abortReason}get signal(){if(!tn(this))throw th("signal");if(void 0===this._abortController)throw TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e){if(!tn(this))throw th("error");"writable"===this._controlledWritableStream._state&&tu(this,e)}[B](e){let t=this._abortAlgorithm(e);return ts(this),t}[C](){eo(this)}}function tn(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof tr}function ti(e,t,r,n,i,s,a,l){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,eo(t),t._abortReason=void 0,t._abortController=function(){if(eF)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=l,t._strategyHWM=a,t._writeAlgorithm=n,t._closeAlgorithm=i,t._abortAlgorithm=s,e3(e,0>=ta(t)),h(o(r()),()=>{t._started=!0,to(t)},r=>{t._started=!0,eZ(e,r)})}function ts(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ta(e){return e._strategyHWM-e._queueTotalSize}function to(e){let t=e._controlledWritableStream;if(!e._started||void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void e1(t);if(0===e._queue.length)return;let r=e._queue.peek().value;r===tt?function(e){let t=e._controlledWritableStream;t._inFlightCloseRequest=t._closeRequest,t._closeRequest=void 0,es(e);let r=e._closeAlgorithm();ts(e),h(r,()=>{t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0,"erroring"===t._state&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";let e=t._writer;void 0!==e&&tg(e)},e=>{t._inFlightCloseRequest._reject(e),t._inFlightCloseRequest=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._reject(e),t._pendingAbortRequest=void 0),eZ(t,e)})}(e):function(e,t){let r=e._controlledWritableStream;r._inFlightWriteRequest=r._writeRequests.shift(),h(e._writeAlgorithm(t),()=>{r._inFlightWriteRequest._resolve(void 0),r._inFlightWriteRequest=void 0;let t=r._state;es(e),e2(r)||"writable"!==t||e3(r,0>=ta(e)),to(e)},t=>{"writable"===r._state&&ts(e),r._inFlightWriteRequest._reject(t),r._inFlightWriteRequest=void 0,eZ(r,t)})}(e,r)}function tl(e,t){"writable"===e._controlledWritableStream._state&&tu(e,t)}Object.defineProperties(tr.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(tr.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function tu(e,t){let r=e._controlledWritableStream;ts(e),e0(r,t)}function tc(e){return TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function th(e){return TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function td(e){return TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function tf(e){return TypeError("Cannot "+e+" a stream using a released writer")}function tp(e){e._closedPromise=u((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"})}function ty(e,t){void 0!==e._closedPromise_reject&&(p(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function tg(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function tm(e){e._readyPromise=u((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState="pending"}function tb(e,t){tm(e),tw(e,t)}function tw(e,t){void 0!==e._readyPromise_reject&&(p(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function tv(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let tS="undefined"!=typeof DOMException?DOMException:void 0,tA=!function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{return new e,!0}catch(e){return!1}}(tS)?function(){let e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}():tS;function tk(e,t,n,i,s,a){let d=M(e),y=new e4(t);e._disturbed=!0;let g=!1,m=o(void 0);return u((b,w)=>{var v,A,k;let _;if(void 0!==a){if(_=()=>{let r=new tA("Aborted","AbortError"),n=[];i||n.push(()=>"writable"===t._state?eX(t,r):o(void 0)),s||n.push(()=>"readable"===e._state?tH(e,r):o(void 0)),C(()=>Promise.all(n.map(e=>e())),!0,r)},a.aborted)return void _();a.addEventListener("abort",_)}if(B(e,d._closedPromise,e=>{i?T(!0,e):C(()=>eX(t,e),!0,e)}),B(t,y._closedPromise,t=>{s?T(!0,t):C(()=>tH(e,t),!0,t)}),v=e,A=d._closedPromise,k=()=>{n?T():C(()=>(function(e){let t=e._ownerWritableStream,r=t._state;return e2(t)||"closed"===r?o(void 0):"errored"===r?l(t._storedError):e5(e)})(y))},"closed"===v._state?k():h(A,k),e2(t)||"closed"===t._state){let t=TypeError("the destination writable stream closed before all data could be piped to it");s?T(!0,t):C(()=>tH(e,t),!0,t)}function E(){let e=m;return c(m,()=>e!==m?E():void 0)}function B(e,t,r){"errored"===e._state?r(e._storedError):f(t,r)}function C(e,r,n){if(!g)if(g=!0,"writable"!==t._state||e2(t))i();else h(E(),i);function i(){h(e(),()=>x(r,n),e=>x(!0,e))}}function T(e,r){if(!g)if(g=!0,"writable"!==t._state||e2(t))x(e,r);else h(E(),()=>x(e,r))}function x(e,t){e7(y),S(d),void 0!==a&&a.removeEventListener("abort",_),e?w(t):b(void 0)}p(u((e,t)=>{!function n(i){i?e():c(g?o(!0):c(y._readyPromise,()=>u((e,t)=>{W(d,{_chunkSteps:t=>{m=c(te(y,t),void 0,r),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})),n,t)}(!1)}))})}class t_{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!tE(this))throw tK("desiredSize");return tO(this)}close(){if(!tE(this))throw tK("close");if(!tN(this))throw TypeError("The stream is not in a state that permits close");tx(this)}enqueue(e){if(!tE(this))throw tK("enqueue");if(!tN(this))throw TypeError("The stream is not in a state that permits enqueue");return tR(this,e)}error(e){if(!tE(this))throw tK("error");tP(this,e)}[T](e){eo(this);let t=this._cancelAlgorithm(e);return tT(this),t}[x](e){let t=this._controlledReadableStream;if(this._queue.length>0){let r=es(this);this._closeRequested&&0===this._queue.length?(tT(this),tz(t)):tB(this),e._chunkSteps(r)}else $(t,e),tB(this)}}function tE(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof t_}function tB(e){if(tC(e)){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0,h(e._pullAlgorithm(),()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,tB(e))},t=>{tP(e,t)})}}function tC(e){let t=e._controlledReadableStream;return!!tN(e)&&!!e._started&&!!(tq(t)&&H(t)>0||tO(e)>0)}function tT(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function tx(e){if(!tN(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(tT(e),tz(t))}function tR(e,t){if(!tN(e))return;let r=e._controlledReadableStream;if(tq(r)&&H(r)>0)q(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw tP(e,t),t}try{ea(e,t,r)}catch(t){throw tP(e,t),t}}tB(e)}function tP(e,t){let r=e._controlledReadableStream;"readable"===r._state&&(eo(e),tT(e),tV(r,t))}function tO(e){let t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function tN(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function tI(e,t,r,n,i,s,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,eo(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=s,t._pullAlgorithm=n,t._cancelAlgorithm=i,e._readableStreamController=t,h(o(r()),()=>{t._started=!0,tB(t)},e=>{tP(t,e)})}function tK(e){return TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function tU(e,t){O(e,t);let r=null==e?void 0:e.preventAbort,n=null==e?void 0:e.preventCancel,i=null==e?void 0:e.preventClose,s=null==e?void 0:e.signal;return void 0!==s&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw TypeError(`${t} is not an AbortSignal.`)}(s,`${t} has member 'signal' that`),{preventAbort:!!r,preventCancel:!!n,preventClose:!!i,signal:s}}Object.defineProperties(t_.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(t_.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class tL{constructor(e={},t={}){void 0===e?e=null:I(e,"First parameter");let r=ez(t,"Second parameter"),n=function(e,t){var r,n,i,s,a,o;O(e,t);let l=null==e?void 0:e.autoAllocateChunkSize,u=null==e?void 0:e.cancel,c=null==e?void 0:e.pull,h=null==e?void 0:e.start,d=null==e?void 0:e.type;return{autoAllocateChunkSize:void 0===l?void 0:j(l,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===u?void 0:(r=u,n=e,N(r,`${t} has member 'cancel' that`),e=>m(r,n,[e])),pull:void 0===c?void 0:(i=c,s=e,N(i,`${t} has member 'pull' that`),e=>m(i,s,[e])),start:void 0===h?void 0:(a=h,o=e,N(a,`${t} has member 'start' that`),e=>g(a,o,[e])),type:void 0===d?void 0:function(e,t){if("bytes"!=(e=`${e}`))throw TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}(d,`${t} has member 'type' that`)}}(e,"First parameter");if(tM(this),"bytes"===n.type){if(void 0!==r.size)throw RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,r){let n=Object.create(eu.prototype),i=()=>void 0,s=()=>o(void 0),a=()=>o(void 0);void 0!==t.start&&(i=()=>t.start(n)),void 0!==t.pull&&(s=()=>t.pull(n)),void 0!==t.cancel&&(a=e=>t.cancel(e));let l=t.autoAllocateChunkSize;if(0===l)throw TypeError("autoAllocateChunkSize must be greater than 0");eO(e,n,i,s,a,r,l)}(this,n,eq(r,0))}else{let e=eH(r);!function(e,t,r,n){let i=Object.create(t_.prototype),s=()=>void 0,a=()=>o(void 0),l=()=>o(void 0);void 0!==t.start&&(s=()=>t.start(i)),void 0!==t.pull&&(a=()=>t.pull(i)),void 0!==t.cancel&&(l=e=>t.cancel(e)),tI(e,i,s,a,l,r,n)}(this,n,eq(r,1),e)}}get locked(){if(!t$(this))throw tF("locked");return tq(this)}cancel(e){return t$(this)?tq(this)?l(TypeError("Cannot cancel a stream that already has a reader")):tH(this,e):l(tF("cancel"))}getReader(e){if(!t$(this))throw tF("getReader");return void 0===function(e,t){O(e,t);let r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:function(e,t){if("byob"!=(e=`${e}`))throw TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}(r,`${t} has member 'mode' that`)}}(e,"First parameter").mode?M(this):new ej(this)}pipeThrough(e,t={}){if(!t$(this))throw tF("pipeThrough");K(e,1,"pipeThrough");let r=function(e,t){O(e,t);let r=null==e?void 0:e.readable;U(r,"readable","ReadableWritablePair"),D(r,`${t} has member 'readable' that`);let n=null==e?void 0:e.writable;return U(n,"writable","ReadableWritablePair"),eV(n,`${t} has member 'writable' that`),{readable:r,writable:n}}(e,"First parameter"),n=tU(t,"Second parameter");if(tq(this))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(eY(r.writable))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return p(tk(this,r.writable,n.preventClose,n.preventAbort,n.preventCancel,n.signal)),r.readable}pipeTo(e,t={}){let r;if(!t$(this))return l(tF("pipeTo"));if(void 0===e)return l("Parameter 1 is required in 'pipeTo'.");if(!eG(e))return l(TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));try{r=tU(t,"Second parameter")}catch(e){return l(e)}return tq(this)?l(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):eY(e)?l(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):tk(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!t$(this))throw tF("tee");let e=ec(this._readableStreamController)?function(e){let t,r,n,i,s,a=M(e),l=!1,c=!1,h=!1,d=!1,p=!1,g=u(e=>{s=e});function m(e){f(e._closedPromise,t=>{e===a&&(eC(n._readableStreamController,t),eC(i._readableStreamController,t),d&&p||s(void 0))})}function b(){eD(a)&&(S(a),m(a=M(e))),W(a,{_chunkSteps:t=>{y(()=>{c=!1,h=!1;let r=t;if(!d&&!p)try{r=ei(t)}catch(t){eC(n._readableStreamController,t),eC(i._readableStreamController,t),s(tH(e,t));return}d||eB(n._readableStreamController,t),p||eB(i._readableStreamController,r),l=!1,c?v():h&&A()})},_closeSteps:()=>{l=!1,d||eE(n._readableStreamController),p||eE(i._readableStreamController),n._readableStreamController._pendingPullIntos.length>0&&eR(n._readableStreamController,0),i._readableStreamController._pendingPullIntos.length>0&&eR(i._readableStreamController,0),d&&p||s(void 0)},_errorSteps:()=>{l=!1}})}function w(t,r){F(a)&&(S(a),m(a=new ej(e)));let o=r?i:n,u=r?n:i;eM(a,t,{_chunkSteps:t=>{y(()=>{c=!1,h=!1;let n=r?p:d;if(r?d:p)n||eP(o._readableStreamController,t);else{let r;try{r=ei(t)}catch(t){eC(o._readableStreamController,t),eC(u._readableStreamController,t),s(tH(e,t));return}n||eP(o._readableStreamController,t),eB(u._readableStreamController,r)}l=!1,c?v():h&&A()})},_closeSteps:e=>{l=!1;let t=r?p:d,n=r?d:p;t||eE(o._readableStreamController),n||eE(u._readableStreamController),void 0!==e&&(t||eP(o._readableStreamController,e),!n&&u._readableStreamController._pendingPullIntos.length>0&&eR(u._readableStreamController,0)),t&&n||s(void 0)},_errorSteps:()=>{l=!1}})}function v(){if(l)return c=!0,o(void 0);l=!0;let e=eT(n._readableStreamController);return null===e?b():w(e._view,!1),o(void 0)}function A(){if(l)return h=!0,o(void 0);l=!0;let e=eT(i._readableStreamController);return null===e?b():w(e._view,!0),o(void 0)}function k(){}return n=tD(k,v,function(n){if(d=!0,t=n,p){let n=tH(e,et([t,r]));s(n)}return g}),i=tD(k,A,function(n){if(p=!0,r=n,d){let n=tH(e,et([t,r]));s(n)}return g}),m(a),[n,i]}(this):function(e,t){let r,n,i,s,a,l=M(e),c=!1,h=!1,d=!1,p=!1,g=u(e=>{a=e});function m(){return c?(h=!0,o(void 0)):(c=!0,W(l,{_chunkSteps:e=>{y(()=>{h=!1,d||tR(i._readableStreamController,e),p||tR(s._readableStreamController,e),c=!1,h&&m()})},_closeSteps:()=>{c=!1,d||tx(i._readableStreamController),p||tx(s._readableStreamController),d&&p||a(void 0)},_errorSteps:()=>{c=!1}}),o(void 0))}function b(){}return i=tj(b,m,function(t){if(d=!0,r=t,p){let t=tH(e,et([r,n]));a(t)}return g}),s=tj(b,m,function(t){if(p=!0,n=t,d){let t=tH(e,et([r,n]));a(t)}return g}),f(l._closedPromise,e=>{tP(i._readableStreamController,e),tP(s._readableStreamController,e),d&&p||a(void 0)}),[i,s]}(this);return et(e)}values(e){if(!t$(this))throw tF("values");return function(e,t){let r=new Y(M(e),t),n=Object.create(X);return n._asyncIteratorImpl=r,n}(this,(O(e,"First parameter"),{preventCancel:!!(null==e?void 0:e.preventCancel)}).preventCancel)}}function tj(e,t,r,n=1,i=()=>1){let s=Object.create(tL.prototype);return tM(s),tI(s,Object.create(t_.prototype),e,t,r,n,i),s}function tD(e,t,r){let n=Object.create(tL.prototype);return tM(n),eO(n,Object.create(eu.prototype),e,t,r,0,void 0),n}function tM(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function t$(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof tL}function tq(e){return void 0!==e._reader}function tH(e,t){if(e._disturbed=!0,"closed"===e._state)return o(void 0);if("errored"===e._state)return l(e._storedError);tz(e);let n=e._reader;return void 0!==n&&eD(n)&&(n._readIntoRequests.forEach(e=>{e._closeSteps(void 0)}),n._readIntoRequests=new b),c(e._readableStreamController[T](t),r,void 0)}function tz(e){e._state="closed";let t=e._reader;void 0!==t&&(E(t),F(t)&&(t._readRequests.forEach(e=>{e._closeSteps()}),t._readRequests=new b))}function tV(e,t){e._state="errored",e._storedError=t;let r=e._reader;void 0!==r&&(_(r,t),F(r)?(r._readRequests.forEach(e=>{e._errorSteps(t)}),r._readRequests=new b):(r._readIntoRequests.forEach(e=>{e._errorSteps(t)}),r._readIntoRequests=new b))}function tF(e){return TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function tW(e,t){O(e,t);let r=null==e?void 0:e.highWaterMark;return U(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:L(r)}}Object.defineProperties(tL.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(tL.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof t.asyncIterator&&Object.defineProperty(tL.prototype,t.asyncIterator,{value:tL.prototype.values,writable:!0,configurable:!0});let tJ=e=>e.byteLength;try{Object.defineProperty(tJ,"name",{value:"size",configurable:!0})}catch(e){}class tG{constructor(e){K(e,1,"ByteLengthQueuingStrategy"),e=tW(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!tX(this))throw tY("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!tX(this))throw tY("size");return tJ}}function tY(e){return TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function tX(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof tG}Object.defineProperties(tG.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(tG.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});let tQ=()=>1;try{Object.defineProperty(tQ,"name",{value:"size",configurable:!0})}catch(e){}class tZ{constructor(e){K(e,1,"CountQueuingStrategy"),e=tW(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!t1(this))throw t0("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!t1(this))throw t0("size");return tQ}}function t0(e){return TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function t1(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof tZ}Object.defineProperties(tZ.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(tZ.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class t2{constructor(e={},t={},r={}){let n;void 0===e&&(e=null);let i=ez(t,"Second parameter"),s=ez(r,"Third parameter"),a=function(e,t){var r,n,i,s,a,o;O(e,t);let l=null==e?void 0:e.flush,u=null==e?void 0:e.readableType,c=null==e?void 0:e.start,h=null==e?void 0:e.transform,d=null==e?void 0:e.writableType;return{flush:void 0===l?void 0:(r=l,n=e,N(r,`${t} has member 'flush' that`),e=>m(r,n,[e])),readableType:u,start:void 0===c?void 0:(i=c,s=e,N(i,`${t} has member 'start' that`),e=>g(i,s,[e])),transform:void 0===h?void 0:(a=h,o=e,N(a,`${t} has member 'transform' that`),(e,t)=>m(a,o,[e,t])),writableType:d}}(e,"First parameter");if(void 0!==a.readableType)throw RangeError("Invalid readableType specified");if(void 0!==a.writableType)throw RangeError("Invalid writableType specified");let h=eq(s,0),d=eH(s),f=eq(i,1),p=eH(i);(function(e,t,r,n,i,s){function a(){return t}e._writable=function(e,t,r,n,i=1,s=()=>1){let a=Object.create(eW.prototype);return eJ(a),ti(a,Object.create(tr.prototype),e,t,r,n,i,s),a}(a,function(t){var r=e,n=t;let i=r._transformStreamController;return r._backpressure?c(r._backpressureChangePromise,()=>{let e=r._writable;if("erroring"===e._state)throw e._storedError;return rt(i,n)},void 0):rt(i,n)},function(){var t=e;let r=t._readable,n=t._transformStreamController,i=n._flushAlgorithm();return t7(n),c(i,()=>{if("errored"===r._state)throw r._storedError;tx(r._readableStreamController)},e=>{throw t3(t,e),r._storedError})},function(t){return t3(e,t),o(void 0)},r,n),e._readable=tj(a,function(){var t;return t6(t=e,!1),t._backpressureChangePromise},function(t){return t4(e,t),o(void 0)},i,s),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,t6(e,!0),e._transformStreamController=void 0})(this,u(e=>{n=e}),f,p,h,d),function(e,t){var r,n;let i=Object.create(t5.prototype),s=e=>{try{var t;return re(i,e),t=void 0,o(t)}catch(e){return l(e)}},a=()=>o(void 0);void 0!==t.transform&&(s=e=>t.transform(e,i)),void 0!==t.flush&&(a=()=>t.flush(i)),r=s,n=a,i._controlledTransformStream=e,e._transformStreamController=i,i._transformAlgorithm=r,i._flushAlgorithm=n}(this,a),void 0!==a.start?n(a.start(this._transformStreamController)):n(void 0)}get readable(){if(!t8(this))throw rn("readable");return this._readable}get writable(){if(!t8(this))throw rn("writable");return this._writable}}function t8(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof t2}function t3(e,t){tP(e._readable._readableStreamController,t),t4(e,t)}function t4(e,t){t7(e._transformStreamController),tl(e._writable._writableStreamController,t),e._backpressure&&t6(e,!1)}function t6(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=u(t=>{e._backpressureChangePromise_resolve=t}),e._backpressure=t}Object.defineProperties(t2.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(t2.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});class t5{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!t9(this))throw rr("desiredSize");return tO(this._controlledTransformStream._readable._readableStreamController)}enqueue(e){if(!t9(this))throw rr("enqueue");re(this,e)}error(e){var t,r;if(!t9(this))throw rr("error");t=this,r=e,t3(t._controlledTransformStream,r)}terminate(){if(!t9(this))throw rr("terminate");var e=this;let t=e._controlledTransformStream;tx(t._readable._readableStreamController),t4(t,TypeError("TransformStream terminated"))}}function t9(e){return!!i(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof t5}function t7(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function re(e,t){let r=e._controlledTransformStream,n=r._readable._readableStreamController;if(!tN(n))throw TypeError("Readable side is not in a state that permits enqueue");try{tR(n,t)}catch(e){throw t4(r,e),r._readable._storedError}!tC(n)!==r._backpressure&&t6(r,!0)}function rt(e,t){return c(e._transformAlgorithm(t),void 0,t=>{throw t3(e._controlledTransformStream,t),t})}function rr(e){return TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function rn(e){return TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(t5.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof t.toStringTag&&Object.defineProperty(t5.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=tG,e.CountQueuingStrategy=tZ,e.ReadableByteStreamController=eu,e.ReadableStream=tL,e.ReadableStreamBYOBReader=ej,e.ReadableStreamBYOBRequest=el,e.ReadableStreamDefaultController=t_,e.ReadableStreamDefaultReader=V,e.TransformStream=t2,e.TransformStreamDefaultController=t5,e.WritableStream=eW,e.WritableStreamDefaultController=tr,e.WritableStreamDefaultWriter=e4,Object.defineProperty(e,"__esModule",{value:!0})}(f.exports),f.exports)}())}try{let{Blob:e}=r(79428);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0,r=this;return new ReadableStream({type:"bytes",async pull(e){let n=r.slice(t,Math.min(r.size,t+65536)),i=await n.arrayBuffer();t+=i.byteLength,e.enqueue(new Uint8Array(i)),t===r.size&&e.close()}})})}catch(e){}async function*p(e,t=!0){for(let r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(t){let e=r.byteOffset,t=r.byteOffset+r.byteLength;for(;e!==t;){let n=Math.min(t-e,65536),i=r.buffer.slice(e,e+n);e+=i.byteLength,yield new Uint8Array(i)}}else yield r;else{let e=0;for(;e!==r.size;){let t=r.slice(e,Math.min(r.size,e+65536)),n=await t.arrayBuffer();e+=n.byteLength,yield new Uint8Array(n)}}}let y=class e{#r=[];#n="";#i=0;#s="transparent";constructor(t=[],r={}){if("object"!=typeof t||null===t)throw TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===r&&(r={});let n=new TextEncoder;for(let r of t){let t,i=ArrayBuffer.isView(t=ArrayBuffer.isView(r)?new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)):r instanceof ArrayBuffer?new Uint8Array(r.slice(0)):r instanceof e?r:n.encode(`${r}`))?t.byteLength:t.size;i&&(this.#i+=i,this.#r.push(t))}this.#s=`${void 0===r.endings?"transparent":r.endings}`;let i=void 0===r.type?"":String(r.type);this.#n=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#i}get type(){return this.#n}async text(){let e=new TextDecoder,t="";for await(let r of p(this.#r,!1))t+=e.decode(r,{stream:!0});return t+e.decode()}async arrayBuffer(){let e=new Uint8Array(this.size),t=0;for await(let r of p(this.#r,!1))e.set(r,t),t+=r.length;return e.buffer}stream(){let e=p(this.#r,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){let r=await e.next();r.done?t.close():t.enqueue(r.value)},async cancel(){await e.return()}})}slice(t=0,r=this.size,n=""){let{size:i}=this,s=t<0?Math.max(i+t,0):Math.min(t,i),a=r<0?Math.max(i+r,0):Math.min(r,i),o=Math.max(a-s,0),l=this.#r,u=[],c=0;for(let e of l){if(c>=o)break;let t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(s&&t<=s)s-=t,a-=t;else{let r;ArrayBuffer.isView(e)?c+=(r=e.subarray(s,Math.min(t,a))).byteLength:c+=(r=e.slice(s,Math.min(t,a))).size,a-=t,u.push(r),s=0}}let h=new e([],{type:String(n).toLowerCase()});return h.#i=o,h.#r=u,h}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(y.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});let g=y,m=class extends g{#a=0;#o="";constructor(e,t,r={}){if(arguments.length<2)throw TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,r),null===r&&(r={});let n=void 0===r.lastModified?Date.now():Number(r.lastModified);Number.isNaN(n)||(this.#a=n),this.#o=String(t)}get name(){return this.#o}get lastModified(){return this.#a}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof g&&/^(File)$/.test(e[Symbol.toStringTag])}};var{toStringTag:b,iterator:w,hasInstance:v}=Symbol,S=Math.random,A="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),k=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[b])?[(r=void 0!==r?r+"":"File"==t[b]?t.name:"blob",e),t.name!==r||"blob"==t[b]?new m([t],r,t):t]:[e,t+""]),_=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),E=(e,t,r)=>{if(t.length<r)throw TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)};let B=class{#l=[];constructor(...e){if(e.length)throw TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[b](){return"FormData"}[w](){return this.entries()}static[v](e){return e&&"object"==typeof e&&"FormData"===e[b]&&!A.some(t=>"function"!=typeof e[t])}append(...e){E("append",arguments,2),this.#l.push(k(...e))}delete(e){E("delete",arguments,1),e+="",this.#l=this.#l.filter(([t])=>t!==e)}get(e){E("get",arguments,1),e+="";for(var t=this.#l,r=t.length,n=0;n<r;n++)if(t[n][0]===e)return t[n][1];return null}getAll(e,t){return E("getAll",arguments,1),t=[],e+="",this.#l.forEach(r=>r[0]===e&&t.push(r[1])),t}has(e){return E("has",arguments,1),e+="",this.#l.some(t=>t[0]===e)}forEach(e,t){for(var[r,n]of(E("forEach",arguments,1),this))e.call(t,n,r,this)}set(...e){E("set",arguments,2);var t=[],r=!0;e=k(...e),this.#l.forEach(n=>{n[0]===e[0]?r&&(r=!t.push(e)):t.push(n)}),r&&t.push(e),this.#l=t}*entries(){yield*this.#l}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};class C extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class T extends C{constructor(e,t,r){super(e,t),r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}let x=Symbol.toStringTag,R=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[x],P=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[x]),O=e=>"object"==typeof e&&("AbortSignal"===e[x]||"EventTarget"===e[x]),N=(e,t)=>{let r=new URL(t).hostname,n=new URL(e).hostname;return r===n||r.endsWith(`.${n}`)},I=(e,t)=>new URL(t).protocol===new URL(e).protocol,K=l.promisify(a.pipeline),U=Symbol("Body internals");class L{constructor(e,{size:t=0}={}){let r=null;null===e?e=null:R(e)?e=o.Buffer.from(e.toString()):P(e)||o.Buffer.isBuffer(e)||(l.types.isAnyArrayBuffer(e)?e=o.Buffer.from(e):ArrayBuffer.isView(e)?e=o.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof a||(e instanceof B?r=(e=function(e,t=g){var r=`${S()}${S()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r
Content-Disposition: form-data; name="`;return e.forEach((e,t)=>"string"==typeof e?n.push(i+_(t)+`"\r
\r
${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r
`):n.push(i+_(t)+`"; filename="${_(e.name,1)}"\r
Content-Type: ${e.type||"application/octet-stream"}\r
\r
`,e,"\r\n")),n.push(`--${r}--`),new t(n,{type:"multipart/form-data; boundary="+r})}(e)).type.split("=")[1]:e=o.Buffer.from(String(e))));let n=e;o.Buffer.isBuffer(e)?n=a.Readable.from(e):P(e)&&(n=a.Readable.from(e.stream())),this[U]={body:e,stream:n,boundary:r,disturbed:!1,error:null},this.size=t,e instanceof a&&e.on("error",e=>{let t=e instanceof C?e:new T(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[U].error=t})}get body(){return this[U].stream}get bodyUsed(){return this[U].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:t,byteLength:r}=await j(this);return e.slice(t,t+r)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let e=new B;for(let[t,r]of new URLSearchParams(await this.text()))e.append(t,r);return e}let{toFormData:t}=await r.e(919).then(r.t.bind(r,44300,19));return t(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[U].body&&this[U].body.type||"";return new g([await this.arrayBuffer()],{type:e})}async json(){return JSON.parse(await this.text())}async text(){let e=await j(this);return new TextDecoder().decode(e)}buffer(){return j(this)}}async function j(e){if(e[U].disturbed)throw TypeError(`body used already for: ${e.url}`);if(e[U].disturbed=!0,e[U].error)throw e[U].error;let{body:t}=e;if(null===t||!(t instanceof a))return o.Buffer.alloc(0);let r=[],n=0;try{for await(let i of t){if(e.size>0&&n+i.length>e.size){let r=new T(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(r),r}n+=i.length,r.push(i)}}catch(t){throw t instanceof C?t:new T(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0===t.readableEnded||!0===t._readableState.ended)try{if(r.every(e=>"string"==typeof e))return o.Buffer.from(r.join(""));return o.Buffer.concat(r,n)}catch(t){throw new T(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}throw new T(`Premature close of server response while trying to fetch ${e.url}`)}L.prototype.buffer=l.deprecate(L.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(L.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:l.deprecate(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});let D=(e,t)=>{let r,n,{body:i}=e[U];if(e.bodyUsed)throw Error("cannot clone body after it is used");return i instanceof a&&"function"!=typeof i.getBoundary&&(r=new a.PassThrough({highWaterMark:t}),n=new a.PassThrough({highWaterMark:t}),i.pipe(r),i.pipe(n),e[U].stream=r,i=n),i},M=l.deprecate(e=>e.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),$=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":R(e)?"application/x-www-form-urlencoded;charset=UTF-8":P(e)?e.type||null:o.Buffer.isBuffer(e)||l.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof B?`multipart/form-data; boundary=${t[U].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${M(e)}`:e instanceof a?null:"text/plain;charset=UTF-8",q=e=>{let{body:t}=e[U];return null===t?0:P(t)?t.size:o.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},H=async(e,{body:t})=>{null===t?e.end():await K(t,e)},z="function"==typeof n.validateHeaderName?n.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let t=TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},V="function"==typeof n.validateHeaderValue?n.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let t=TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class F extends URLSearchParams{constructor(e){let t=[];if(e instanceof F)for(let[r,n]of Object.entries(e.raw()))t.push(...n.map(e=>[r,e]));else if(null==e);else if("object"!=typeof e||l.types.isBoxedPrimitive(e))throw TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");else{let r=e[Symbol.iterator];if(null==r)t.push(...Object.entries(e));else{if("function"!=typeof r)throw TypeError("Header pairs must be iterable");t=[...e].map(e=>{if("object"!=typeof e||l.types.isBoxedPrimitive(e))throw TypeError("Each header pair must be an iterable object");return[...e]}).map(e=>{if(2!==e.length)throw TypeError("Each header pair must be a name/value tuple");return[...e]})}}return super(t=t.length>0?t.map(([e,t])=>(z(e),V(e,String(t)),[String(e).toLowerCase(),String(t)])):void 0),new Proxy(this,{get(e,t,r){switch(t){case"append":case"set":return(r,n)=>(z(r),V(r,String(n)),URLSearchParams.prototype[t].call(e,String(r).toLowerCase(),String(n)));case"delete":case"has":case"getAll":return r=>(z(r),URLSearchParams.prototype[t].call(e,String(r).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,r)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let t=this.getAll(e);if(0===t.length)return null;let r=t.join(", ");return/^content-encoding$/i.test(e)&&(r=r.toLowerCase()),r}forEach(e,t){for(let r of this.keys())Reflect.apply(e,t,[this.get(r),r,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,t)=>(e[t]=this.getAll(t),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,t)=>{let r=this.getAll(t);return"host"===t?e[t]=r[0]:e[t]=r.length>1?r:r[0],e},{})}}Object.defineProperties(F.prototype,["get","entries","forEach","values"].reduce((e,t)=>(e[t]={enumerable:!0},e),{}));let W=new Set([301,302,303,307,308]),J=e=>W.has(e),G=Symbol("Response internals");class Y extends L{constructor(e=null,t={}){super(e,t);let r=null!=t.status?t.status:200,n=new F(t.headers);if(null!==e&&!n.has("Content-Type")){let t=$(e,this);t&&n.append("Content-Type",t)}this[G]={type:"default",url:t.url,status:r,statusText:t.statusText||"",headers:n,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[G].type}get url(){return this[G].url||""}get status(){return this[G].status}get ok(){return this[G].status>=200&&this[G].status<300}get redirected(){return this[G].counter>0}get statusText(){return this[G].statusText}get headers(){return this[G].headers}get highWaterMark(){return this[G].highWaterMark}clone(){return new Y(D(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!J(t))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Y(null,{headers:{location:new URL(e).toString()},status:t})}static error(){let e=new Y(null,{status:0,statusText:""});return e[G].type="error",e}static json(e,t={}){let r=JSON.stringify(e);if(void 0===r)throw TypeError("data is not JSON serializable");let n=new F(t&&t.headers);return n.has("content-type")||n.set("content-type","application/json"),new Y(r,{...t,headers:n})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(Y.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});let X=e=>{if(e.search)return e.search;let t=e.href.length-1,r=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-r.length]?"?":""};function Q(e,t=!1){return null==e||(e=new URL(e),/^(about|blob|data):$/.test(e.protocol))?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e)}let Z=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function ee(e){if(/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||/^(blob|filesystem):$/.test(e.protocol))return!0;if(/^(http|ws)s:$/.test(e.protocol))return!0;let t=e.host.replace(/(^\[)|(]$)/g,""),r=c.isIP(t);return!!(4===r&&/^127\./.test(t)||6===r&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||!("localhost"===e.host||e.host.endsWith(".localhost"))&&"file:"===e.protocol}let et=Symbol("Request internals"),er=e=>"object"==typeof e&&"object"==typeof e[et],en=l.deprecate(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class ei extends L{constructor(e,t={}){let r;if(er(e)?r=new URL(e.url):(r=new URL(e),e={}),""!==r.username||""!==r.password)throw TypeError(`${r} is an url with embedded credentials.`);let n=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(n)&&(n=n.toUpperCase()),!er(t)&&"data"in t&&en(),(null!=t.body||er(e)&&null!==e.body)&&("GET"===n||"HEAD"===n))throw TypeError("Request with GET/HEAD method cannot have body");let i=t.body?t.body:er(e)&&null!==e.body?D(e):null;super(i,{size:t.size||e.size||0});let s=new F(t.headers||e.headers||{});if(null!==i&&!s.has("Content-Type")){let e=$(i,this);e&&s.set("Content-Type",e)}let a=er(e)?e.signal:null;if("signal"in t&&(a=t.signal),null!=a&&!O(a))throw TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let o=null==t.referrer?e.referrer:t.referrer;if(""===o)o="no-referrer";else if(o){let e=new URL(o);o=/^about:(\/\/)?client$/.test(e)?"client":e}else o=void 0;this[et]={method:n,redirect:t.redirect||e.redirect||"follow",headers:s,parsedURL:r,signal:a,referrer:o},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[et].method}get url(){return u.format(this[et].parsedURL)}get headers(){return this[et].headers}get redirect(){return this[et].redirect}get signal(){return this[et].signal}get referrer(){return"no-referrer"===this[et].referrer?"":"client"===this[et].referrer?"about:client":this[et].referrer?this[et].referrer.toString():void 0}get referrerPolicy(){return this[et].referrerPolicy}set referrerPolicy(e){this[et].referrerPolicy=function(e){if(!Z.has(e))throw TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new ei(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(ei.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});let es=e=>{let{parsedURL:t}=e[et],r=new F(e[et].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(n="0"),null!==e.body){let t=q(e);"number"!=typeof t||Number.isNaN(t)||(n=String(t))}n&&r.set("Content-Length",n),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[et].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;let n=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";let i=e.referrer,s=Q(i),a=Q(i,!0);s.toString().length>4096&&(s=a),t&&(s=t(s)),r&&(a=r(a));let o=new URL(e.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return a;case"unsafe-url":return s;case"strict-origin":if(ee(s)&&!ee(o))return"no-referrer";return a.toString();case"strict-origin-when-cross-origin":if(s.origin===o.origin)return s;if(ee(s)&&!ee(o))return"no-referrer";return a;case"same-origin":if(s.origin===o.origin)return s;return"no-referrer";case"origin-when-cross-origin":if(s.origin===o.origin)return s;return a;case"no-referrer-when-downgrade":if(ee(s)&&!ee(o))return"no-referrer";return s;default:throw TypeError(`Invalid referrerPolicy: ${n}`)}}(e):e[et].referrer="no-referrer",e[et].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=e;"function"==typeof i&&(i=i(t)),r.has("Connection")||i||r.set("Connection","close");let s=X(t),a={path:t.pathname+s,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:i};return{parsedURL:t,options:a}};class ea extends C{constructor(e,t="aborted"){super(e,t)}}if(!globalThis.DOMException)try{let{MessageChannel:e}=r(73566),t=new e().port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}var eo=globalThis.DOMException;let el=new Set(["data:","http:","https:"]);async function eu(e,t){return new Promise((r,l)=>{let u=new ei(e,t),{parsedURL:c,options:h}=es(u);if(!el.has(c.protocol))throw TypeError(`node-fetch cannot load ${e}. URL scheme "${c.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===c.protocol){let e=function(e){if(!/^data:/i.test(e))throw TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');let t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw TypeError("malformed data: URI");let r=e.substring(5,t).split(";"),n="",i=!1,s=r[0]||"text/plain",a=s;for(let e=1;e<r.length;e++)"base64"===r[e]?i=!0:(a+=`;${r[e]}`,0===r[e].indexOf("charset=")&&(n=r[e].substring(8)));r[0]||n.length||(a+=";charset=US-ASCII",n="US-ASCII");let o=i?"base64":"ascii",l=unescape(e.substring(t+1)),u=Buffer.from(l,o);return u.type=s,u.typeFull=a,u.charset=n,u}(u.url);r(new Y(e,{headers:{"Content-Type":e.typeFull}}));return}let d=("https:"===c.protocol?i:n).request,{signal:f}=u,p=null,y=()=>{let e=new ea("The operation was aborted.");l(e),u.body&&u.body instanceof a.Readable&&u.body.destroy(e),p&&p.body&&p.body.emit("error",e)};if(f&&f.aborted)return void y();let g=()=>{y(),b()},m=d(c.toString(),h);f&&f.addEventListener("abort",g);let b=()=>{m.abort(),f&&f.removeEventListener("abort",g)};m.on("error",e=>{l(new T(`request to ${u.url} failed, reason: ${e.message}`,"system",e)),b()}),function(e,t){let r,n=o.Buffer.from("0\r\n\r\n"),i=!1,s=!1;e.on("response",e=>{let{headers:t}=e;i="chunked"===t["transfer-encoding"]&&!t["content-length"]}),e.on("socket",a=>{let l=()=>{if(i&&!s){let e=Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",t(e)}},u=e=>{(s=0===o.Buffer.compare(e.slice(-5),n))||!r||(s=0===o.Buffer.compare(r.slice(-3),n.slice(0,3))&&0===o.Buffer.compare(e.slice(-2),n.slice(3))),r=e};a.prependListener("close",l),a.on("data",u),e.on("close",()=>{a.removeListener("close",l),a.removeListener("data",u)})})}(m,e=>{p&&p.body&&p.body.destroy(e)}),process.version<"v14"&&m.on("socket",e=>{let t;e.prependListener("end",()=>{t=e._eventsCount}),e.prependListener("close",r=>{if(p&&t<e._eventsCount&&!r){let e=Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",p.body.emit("error",e)}})}),m.on("response",e=>{m.setTimeout(0);let n=function(e=[]){return new F(e.reduce((e,t,r,n)=>(r%2==0&&e.push(n.slice(r,r+2)),e),[]).filter(([e,t])=>{try{return z(e),V(e,String(t)),!0}catch{return!1}}))}(e.rawHeaders);if(J(e.statusCode)){let i=n.get("Location"),s=null;try{s=null===i?null:new URL(i,u.url)}catch{if("manual"!==u.redirect){l(new T(`uri requested responds with an invalid redirect URL: ${i}`,"invalid-redirect")),b();return}}switch(u.redirect){case"error":l(new T(`uri requested responds with a redirect, redirect mode is set to error: ${u.url}`,"no-redirect")),b();return;case"manual":break;case"follow":{if(null===s)break;if(u.counter>=u.follow){l(new T(`maximum redirect reached at: ${u.url}`,"max-redirect")),b();return}let i={headers:new F(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:D(u),signal:u.signal,size:u.size,referrer:u.referrer,referrerPolicy:u.referrerPolicy};if(!N(u.url,s)||!I(u.url,s))for(let e of["authorization","www-authenticate","cookie","cookie2"])i.headers.delete(e);if(303!==e.statusCode&&u.body&&t.body instanceof a.Readable){l(new T("Cannot follow redirect with body being a readable stream","unsupported-redirect")),b();return}(303===e.statusCode||(301===e.statusCode||302===e.statusCode)&&"POST"===u.method)&&(i.method="GET",i.body=void 0,i.headers.delete("content-length"));let o=function(e){let t=(e.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let e of t)e&&Z.has(e)&&(r=e);return r}(n);o&&(i.referrerPolicy=o),r(eu(new ei(s,i))),b();return}default:return l(TypeError(`Redirect option '${u.redirect}' is not a valid value of RequestRedirect`))}}f&&e.once("end",()=>{f.removeEventListener("abort",g)});let i=a.pipeline(e,new a.PassThrough,e=>{e&&l(e)});process.version<"v12.10"&&e.on("aborted",g);let o={url:u.url,status:e.statusCode,statusText:e.statusMessage,headers:n,size:u.size,counter:u.counter,highWaterMark:u.highWaterMark},c=n.get("Content-Encoding");if(!u.compress||"HEAD"===u.method||null===c||204===e.statusCode||304===e.statusCode)return void r(p=new Y(i,o));let h={flush:s.Z_SYNC_FLUSH,finishFlush:s.Z_SYNC_FLUSH};if("gzip"===c||"x-gzip"===c)return void r(p=new Y(i=a.pipeline(i,s.createGunzip(h),e=>{e&&l(e)}),o));if("deflate"===c||"x-deflate"===c){let t=a.pipeline(e,new a.PassThrough,e=>{e&&l(e)});t.once("data",e=>{r(p=new Y(i=(15&e[0])==8?a.pipeline(i,s.createInflate(),e=>{e&&l(e)}):a.pipeline(i,s.createInflateRaw(),e=>{e&&l(e)}),o))}),t.once("end",()=>{p||r(p=new Y(i,o))});return}if("br"===c)return void r(p=new Y(i=a.pipeline(i,s.createBrotliDecompress(),e=>{e&&l(e)}),o));r(p=new Y(i,o))}),H(m,u).catch(l)})}let ec=new WeakMap,eh=new WeakMap;function ed(e){let t=ec.get(e);return console.assert(null!=t,"'this' is expected an Event object, but got",e),t}function ef(e){if(null!=e.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",e.passiveListener);return}e.event.cancelable&&(e.canceled=!0,"function"==typeof e.event.preventDefault&&e.event.preventDefault())}function ep(e,t){ec.set(this,{eventTarget:e,event:t,eventPhase:2,currentTarget:e,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:t.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(t);for(let e=0;e<r.length;++e){let t=r[e];t in this||Object.defineProperty(this,t,ey(t))}}function ey(e){return{get(){return ed(this).event[e]},set(t){ed(this).event[e]=t},configurable:!0,enumerable:!0}}function eg(e,t){ed(e).passiveListener=t}ep.prototype={get type(){return ed(this).event.type},get target(){return ed(this).eventTarget},get currentTarget(){return ed(this).currentTarget},composedPath(){let e=ed(this).currentTarget;return null==e?[]:[e]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return ed(this).eventPhase},stopPropagation(){let e=ed(this);e.stopped=!0,"function"==typeof e.event.stopPropagation&&e.event.stopPropagation()},stopImmediatePropagation(){let e=ed(this);e.stopped=!0,e.immediateStopped=!0,"function"==typeof e.event.stopImmediatePropagation&&e.event.stopImmediatePropagation()},get bubbles(){return!!ed(this).event.bubbles},get cancelable(){return!!ed(this).event.cancelable},preventDefault(){ef(ed(this))},get defaultPrevented(){return ed(this).canceled},get composed(){return!!ed(this).event.composed},get timeStamp(){return ed(this).timeStamp},get srcElement(){return ed(this).eventTarget},get cancelBubble(){return ed(this).stopped},set cancelBubble(value){if(!value)return;let e=ed(this);e.stopped=!0,"boolean"==typeof e.event.cancelBubble&&(e.event.cancelBubble=!0)},get returnValue(){return!ed(this).canceled},set returnValue(value){value||ef(ed(this))},initEvent(){}},Object.defineProperty(ep.prototype,"constructor",{value:ep,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(ep.prototype,window.Event.prototype),eh.set(window.Event.prototype,ep));let em=new WeakMap;function eb(e){return null!==e&&"object"==typeof e}function ew(e){let t=em.get(e);if(null==t)throw TypeError("'this' is expected an EventTarget object, but got another value.");return t}function ev(e,t){Object.defineProperty(e,`on${t}`,{get(){let e=ew(this).get(t);for(;null!=e;){if(3===e.listenerType)return e.listener;e=e.next}return null},set(e){"function"==typeof e||eb(e)||(e=null);let r=ew(this),n=null,i=r.get(t);for(;null!=i;)3===i.listenerType?null!==n?n.next=i.next:null!==i.next?r.set(t,i.next):r.delete(t):n=i,i=i.next;if(null!==e){let i={listener:e,listenerType:3,passive:!1,once:!1,next:null};null===n?r.set(t,i):n.next=i}},configurable:!0,enumerable:!0})}function eS(e){function t(){eA.call(this)}t.prototype=Object.create(eA.prototype,{constructor:{value:t,configurable:!0,writable:!0}});for(let r=0;r<e.length;++r)ev(t.prototype,e[r]);return t}function eA(){if(this instanceof eA)return void em.set(this,new Map);if(1==arguments.length&&Array.isArray(arguments[0]))return eS(arguments[0]);if(arguments.length>0){let e=Array(arguments.length);for(let t=0;t<arguments.length;++t)e[t]=arguments[t];return eS(e)}throw TypeError("Cannot call a class as a function")}eA.prototype={addEventListener(e,t,r){if(null==t)return;if("function"!=typeof t&&!eb(t))throw TypeError("'listener' should be a function or an object.");let n=ew(this),i=eb(r),s=(i?r.capture:r)?1:2,a={listener:t,listenerType:s,passive:i&&!!r.passive,once:i&&!!r.once,next:null},o=n.get(e);if(void 0===o)return void n.set(e,a);let l=null;for(;null!=o;){if(o.listener===t&&o.listenerType===s)return;l=o,o=o.next}l.next=a},removeEventListener(e,t,r){if(null==t)return;let n=ew(this),i=(eb(r)?r.capture:r)?1:2,s=null,a=n.get(e);for(;null!=a;){if(a.listener===t&&a.listenerType===i)return void(null!==s?s.next=a.next:null!==a.next?n.set(e,a.next):n.delete(e));s=a,a=a.next}},dispatchEvent(e){if(null==e||"string"!=typeof e.type)throw TypeError('"event.type" should be a string.');let t=ew(this),r=e.type,n=t.get(r);if(null==n)return!0;let i=new(function e(t){if(null==t||t===Object.prototype)return ep;let r=eh.get(t);return null==r&&(r=function(e,t){let r=Object.keys(t);if(0===r.length)return e;function n(t,r){e.call(this,t,r)}n.prototype=Object.create(e.prototype,{constructor:{value:n,configurable:!0,writable:!0}});for(let i=0;i<r.length;++i){let s=r[i];if(!(s in e.prototype)){let e="function"==typeof Object.getOwnPropertyDescriptor(t,s).value;Object.defineProperty(n.prototype,s,e?function(e){return{value(){let t=ed(this).event;return t[e].apply(t,arguments)},configurable:!0,enumerable:!0}}(s):ey(s))}}return n}(e(Object.getPrototypeOf(t)),t),eh.set(t,r)),r}(Object.getPrototypeOf(e)))(this,e),s=null;for(;null!=n;){if(n.once?null!==s?s.next=n.next:null!==n.next?t.set(r,n.next):t.delete(r):s=n,eg(i,n.passive?n.listener:null),"function"==typeof n.listener)try{n.listener.call(this,i)}catch(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}else 3!==n.listenerType&&"function"==typeof n.listener.handleEvent&&n.listener.handleEvent(i);if(ed(i).immediateStopped)break;n=n.next}return eg(i,null),ed(i).eventPhase=0,ed(i).currentTarget=null,!i.defaultPrevented}},Object.defineProperty(eA.prototype,"constructor",{value:eA,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(eA.prototype,window.EventTarget.prototype);class AbortSignal extends eA{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=ek.get(this);if("boolean"!=typeof e)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}}ev(AbortSignal.prototype,"abort");let ek=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class e_{constructor(){eE.set(this,function(){let e=Object.create(AbortSignal.prototype);return eA.call(e),ek.set(e,!1),e}())}get signal(){return eB(this)}abort(){var e;e=eB(this),!1===ek.get(e)&&(ek.set(e,!0),e.dispatchEvent({type:"abort"}))}}let eE=new WeakMap;function eB(e){let t=eE.get(e);if(null==t)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===e?"null":typeof e}`);return t}Object.defineProperties(e_.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(e_.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),t.AbortController=e_,t.AbortError=ea,t.FetchError=T,t.File=m,t.FormData=B,t.Headers=F,t.Request=ei,t.Response=Y,t._Blob=g,t.fetch=eu,t.isRedirect=J,t.nodeDomexception=eo},92584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return i}});let n=r(43763);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return n.ReflectAdapter.get(t,r,i);let s=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===s);if(void 0!==a)return n.ReflectAdapter.get(t,a,i)},set(t,r,i,s){if("symbol"==typeof r)return n.ReflectAdapter.set(t,r,i,s);let a=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===a);return n.ReflectAdapter.set(t,o??r,i,s)},has(t,r){if("symbol"==typeof r)return n.ReflectAdapter.has(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==s&&n.ReflectAdapter.has(t,s)},deleteProperty(t,r){if("symbol"==typeof r)return n.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===s||n.ReflectAdapter.deleteProperty(t,s)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},94069:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return d},ReadonlyRequestCookiesError:function(){return o},RequestCookiesAdapter:function(){return l},appendMutableCookies:function(){return h},areCookiesMutableInCurrentPhase:function(){return p},getModifiedCookieValues:function(){return c},responseCookiesToRequestCookies:function(){return g},wrapWithMutableAccessCheck:function(){return f}});let n=r(23158),i=r(43763),s=r(29294),a=r(63033);class o extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new o}}class l{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return o.callable;default:return i.ReflectAdapter.get(e,t,r)}}})}}let u=Symbol.for("next.mutated.cookies");function c(e){let t=e[u];return t&&Array.isArray(t)&&0!==t.length?t:[]}function h(e,t){let r=c(t);if(0===r.length)return!1;let i=new n.ResponseCookies(e),s=i.getAll();for(let e of r)i.set(e);for(let e of s)i.set(e);return!0}class d{static wrap(e,t){let r=new n.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let a=[],o=new Set,l=()=>{let e=s.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),a=r.getAll().filter(e=>o.has(e.name)),t){let e=[];for(let t of a){let r=new n.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},c=new Proxy(r,{get(e,t,r){switch(t){case u:return a;case"delete":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),c}finally{l()}};case"set":return function(...t){o.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),c}finally{l()}};default:return i.ReflectAdapter.get(e,t,r)}}});return c}}function f(e){let t=new Proxy(e,{get(e,r,n){switch(r){case"delete":return function(...r){return y("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return y("cookies().set"),e.set(...r),t};default:return i.ReflectAdapter.get(e,r,n)}}});return t}function p(e){return"action"===e.phase}function y(e){if(!p((0,a.getExpectedRequestStore)(e)))throw new o}function g(e){let t=new n.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},97576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return c},RedirectType:function(){return i.RedirectType},forbidden:function(){return a.forbidden},notFound:function(){return s.notFound},permanentRedirect:function(){return n.permanentRedirect},redirect:function(){return n.redirect},unauthorized:function(){return o.unauthorized},unstable_rethrow:function(){return l.unstable_rethrow}});let n=r(86897),i=r(49026),s=r(62765),a=r(48976),o=r(70899),l=r(163);class u extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class c extends URLSearchParams{append(){throw new u}delete(){throw new u}set(){throw new u}sort(){throw new u}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},99933:(e,t,r)=>{"use strict";Object.defineProperty(t,"B",{value:!0}),Object.defineProperty(t,"U",{enumerable:!0,get:function(){return d}});let n=r(94069),i=r(23158),s=r(29294),a=r(63033),o=r(84971),l=r(80023),u=r(68388),c=r(76926),h=(r(44523),r(8719));function d(){let e="cookies",t=s.workAsyncStorage.getStore(),r=a.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,h.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(t.forceStatic)return p(n.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});else if("unstable-cache"===r.type)throw Object.defineProperty(Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new l.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(r)if("prerender"===r.type){var c=t.route,d=r;let e=f.get(d);if(e)return e;let n=(0,u.makeHangingPromise)(d.renderSignal,"`cookies()`");return f.set(d,n),Object.defineProperties(n,{[Symbol.iterator]:{value:function(){let e="`cookies()[Symbol.iterator]()`",t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}},size:{get(){let e="`cookies().size`",t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}},get:{value:function(){let e;e=0==arguments.length?"`cookies().get()`":`\`cookies().get(${y(arguments[0])})\``;let t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}},getAll:{value:function(){let e;e=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${y(arguments[0])})\``;let t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}},has:{value:function(){let e;e=0==arguments.length?"`cookies().has()`":`\`cookies().has(${y(arguments[0])})\``;let t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}},set:{value:function(){let e;if(0==arguments.length)e="`cookies().set()`";else{let t=arguments[0];e=t?`\`cookies().set(${y(t)}, ...)\``:"`cookies().set(...)`"}let t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}},delete:{value:function(){let e;e=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${y(arguments[0])})\``:`\`cookies().delete(${y(arguments[0])}, ...)\``;let t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}},clear:{value:function(){let e="`cookies().clear()`",t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}},toString:{value:function(){let e="`cookies().toString()`",t=m(c,e);(0,o.abortAndThrowOnSynchronousRequestDataAccess)(c,e,t,d)}}}),n}else"prerender-ppr"===r.type?(0,o.postponeWithTracking)(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&(0,o.throwToInterruptStaticGeneration)(e,t,r);(0,o.trackDynamicDataInDynamicRender)(t,r)}let g=(0,a.getExpectedRequestStore)(e);return p((0,n.areCookiesMutableInCurrentPhase)(g)?g.userspaceMutableCookies:g.cookies)}let f=new WeakMap;function p(e){let t=f.get(e);if(t)return t;let r=Promise.resolve(e);return f.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):b.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):w.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function y(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}let g=(0,c.createDedupedByCallsiteServerErrorLoggerDev)(m);function m(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})}function b(){return this.getAll().map(e=>[e.name,e]).values()}function w(e){for(let e of this.getAll())this.delete(e.name);return e}}};